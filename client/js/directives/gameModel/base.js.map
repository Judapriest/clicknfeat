{"version":3,"sources":["../../../es6/directives/gameModel/base.js"],"names":[],"mappings":"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","file":"base.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.directives')\n  .factory('clickGameModelBase', [\n    'model',\n    function(modelService) {\n      return {\n        create: function clickGameModelBaseCreate(svgNS, info, model, parent) {\n          var base = document.createElementNS(svgNS, 'circle');\n          base.classList.add('model-base');\n          base.setAttribute('cx', (info.img[0].width/2)+'');\n          base.setAttribute('cy', (info.img[0].height/2)+'');\n          base.setAttribute('r', info.base_radius);\n          base.setAttribute('style', [\n            'fill:', info.base_color, ';',\n          ].join(''));\n          base.setAttribute('data-stamp', model.state.stamp);\n          parent.appendChild(base);\n\n          var title = document.createElementNS(svgNS, 'title');\n          base.appendChild(title);\n          title.innerHTML = modelService.descriptionFromInfo(info, model);\n          \n          var direction = document.createElementNS(svgNS, 'line');\n          direction.classList.add('model-los');\n          direction.setAttribute('x1', (info.img[0].width/2)+'');\n          direction.setAttribute('y1', (info.img[0].height/2)+'');\n          direction.setAttribute('x2', (info.img[0].width/2)+'');\n          direction.setAttribute('y2', (info.img[0].height/2-info.base_radius)+'');\n          parent.appendChild(direction);\n\n          var front_arc = document.createElementNS(svgNS, 'line');\n          front_arc.classList.add('model-los');\n          front_arc.setAttribute('x1', (info.img[0].width/2-info.base_radius)+'');\n          front_arc.setAttribute('y1', (info.img[0].height/2)+'');\n          front_arc.setAttribute('x2', (info.img[0].width/2+info.base_radius)+'');\n          front_arc.setAttribute('y2', (info.img[0].height/2)+'');\n          parent.appendChild(front_arc);\n\n          var image = document.createElementNS(svgNS, 'image');\n          image.classList.add('model-image');\n          image.setAttribute('x', '0');\n          image.setAttribute('y', '0');\n          parent.appendChild(image);\n          \n          var edge = document.createElementNS(svgNS, 'circle');\n          edge.classList.add('model-edge');\n          edge.setAttribute('cx', (info.img[0].width/2)+'');\n          edge.setAttribute('cy', (info.img[0].height/2)+'');\n          edge.setAttribute('r', info.base_radius);\n          parent.appendChild(edge);\n\n          return [ base, direction, front_arc, image, edge ];\n        },\n        update: function clickGameModelBaseUpdate(info, model, img, el) {\n          var image = el[3];\n          image.setAttribute('width', img.width+'');\n          image.setAttribute('height', img.height+'');\n          if(R.exists(img.link)) {\n            image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', img.link);\n            image.style.visibility = 'visible';\n          }\n          else {\n            image.style.visibility = 'hidden';\n          }\n        },\n      };\n    }\n  ]);\n"]}
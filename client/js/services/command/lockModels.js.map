{"version":3,"sources":["../../../es6/services/command/lockModels.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,mBAAmB,EAAE,CAC5B,UAAU,EACV,YAAY,EACZ,SAAS,+BAA+B,CAAC,eAAe,EACf,iBAAiB,EAAE;AAC1D,MAAI,wBAAwB,GAAG;AAC7B,WAAO,EAAE,SAAS,iBAAiB,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE;AAC7D,UAAI,IAAI,GAAG;AACT,YAAI,EAAE,IAAI;AACV,cAAM,EAAE,MAAM;OACf,CAAC;;AAEF,aAAO,CAAC,CAAC,KAAK,CACZ,iBAAiB,CAAC,WAAW,CAAC,IAAI,EAAE,MAAM,CAAC,EAC3C,UAAS,WAAW,EAAE;AACpB,YAAI,CAAC,MAAM,GAAG,WAAW,CAAC;;AAE1B,SAAC,CAAC,OAAO,CAAC,UAAS,KAAK,EAAE;AACxB,eAAK,CAAC,SAAS,CAAC,cAAc,GAAC,KAAK,CAAC,CAAC;SACvC,EAAE,MAAM,CAAC,CAAC;;AAEX,eAAO,IAAI,CAAC;OACb,CACF,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAChB;AACD,UAAM,EAAE,SAAS,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AACjD,aAAO,CAAC,CAAC,KAAK,CACZ,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EACrD,UAAS,WAAW,EAAE;AACpB,YAAI,CAAC,MAAM,GAAG,WAAW,CAAC;;AAE1B,SAAC,CAAC,OAAO,CAAC,UAAS,KAAK,EAAE;AACxB,eAAK,CAAC,SAAS,CAAC,cAAc,GAAC,KAAK,CAAC,CAAC;SACvC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;OACjB,CACF,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAChB;AACD,QAAI,EAAE,SAAS,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AAC/C,aAAO,CAAC,CAAC,KAAK,CACZ,iBAAiB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EACtD,UAAS,WAAW,EAAE;AACpB,YAAI,CAAC,MAAM,GAAG,WAAW,CAAC;;AAE1B,SAAC,CAAC,OAAO,CAAC,UAAS,KAAK,EAAE;AACxB,eAAK,CAAC,SAAS,CAAC,cAAc,GAAC,KAAK,CAAC,CAAC;SACvC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;OACjB,CACF,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAChB;GACF,CAAC;AACF,iBAAe,CAAC,eAAe,CAAC,YAAY,EAAE,wBAAwB,CAAC,CAAC;AACxE,SAAO,wBAAwB,CAAC;CACjC,CACF,CAAC,CAAC","file":"lockModels.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('lockModelsCommand', [\n    'commands',\n    'gameModels',\n    function lockModelsCommandServiceFactory(commandsService,\n                                             gameModelsService) {\n      var lockModelsCommandService = {\n        execute: function lockModelsExecute(lock, stamps, scope, game) {\n          var ctxt = {\n            desc: lock,\n            stamps: stamps,\n          };\n\n          return R.pipeP(\n            gameModelsService.lockStamps$(lock, stamps),\n            function(game_models) {\n              game.models = game_models;\n\n              R.forEach(function(stamp) {\n                scope.gameEvent('changeModel-'+stamp);\n              }, stamps);\n              \n              return ctxt;\n            }\n          )(game.models);\n        },\n        replay: function lockModelsRedo(ctxt, scope, game) {\n          return R.pipeP(\n            gameModelsService.lockStamps$(ctxt.desc, ctxt.stamps),\n            function(game_models) {\n              game.models = game_models;\n              \n              R.forEach(function(stamp) {\n                scope.gameEvent('changeModel-'+stamp);\n              }, ctxt.stamps);\n            }\n          )(game.models);\n        },\n        undo: function lockModelsUndo(ctxt, scope, game) {\n          return R.pipeP(\n            gameModelsService.lockStamps$(!ctxt.desc, ctxt.stamps),\n            function(game_models) {\n              game.models = game_models;\n              \n              R.forEach(function(stamp) {\n                scope.gameEvent('changeModel-'+stamp);\n              }, ctxt.stamps);\n            }\n          )(game.models);\n        }\n      };\n      commandsService.registerCommand('lockModels', lockModelsCommandService);\n      return lockModelsCommandService;\n    }\n  ]);\n"]}
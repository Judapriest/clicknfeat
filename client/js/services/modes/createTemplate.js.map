{"version":3,"sources":["../../../es6/services/modes/createTemplate.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,oBAAoB,EAAE,CAC7B,OAAO,EACP,UAAU,EACV,YAAY,EACZ,MAAM,EACN,SAAS,gCAAgC,CAAC,YAAY,EACZ,eAAe,EACf,iBAAiB,EACjB,WAAW,EAAE;AACrD,MAAI,sBAAsB,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;AACtE,wBAAsB,CAAC,OAAO,GAAG,SAAS,qBAAqB,CAAC,KAAK,EAAE,KAAK,EAAE;AAC5E,SAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClC,SAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AAClC,SAAK,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;GACvC,CAAC;AACF,wBAAsB,CAAC,MAAM,GAAG,SAAS,oBAAoB,CAAC,KAAK,EAAE,KAAK,EAAE;AAC1E,SAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC5C,SAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC5C,SAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,EAAC,UAAU,CAAC,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC;AAC3E,WAAO,WAAW,CAAC,cAAc,CAAC,gBAAgB,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,EACzC,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;GACtD,CAAC;AACF,MAAI,+BAA+B,GAAG;AACpC,UAAM,EAAE,UAAU;GACnB,CAAC;AACF,MAAI,uBAAuB,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EACzC,+BAA+B,CAAC,CAAC;AACxE,MAAI,sBAAsB,GAAG,EAAE,CAAC;AAChC,MAAI,mBAAmB,GAAG;AACxB,WAAO,EAAE,SAAS,qBAAqB,CAAC,KAAK,EAAE;AAC7C,WAAK,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;AACxC,WAAK,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;KAClC;AACD,WAAO,EAAE,SAAS,qBAAqB,CAAC,KAAK,EAAE;AAC7C,WAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,CAAC;AAC7B,WAAK,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;AAClC,WAAK,CAAC,SAAS,CAAC,uBAAuB,CAAC,CAAC;KAC1C;AACD,QAAI,EAAE,gBAAgB;AACtB,WAAO,EAAE,sBAAsB;AAC/B,WAAO,EAAE,sBAAsB;AAC/B,YAAQ,EAAE,uBAAuB;GAClC,CAAC;AACF,cAAY,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;AAC/C,iBAAe,CAAC,QAAQ,CAAC,UAAU,EACV,mBAAmB,CAAC,IAAI,EACxB,+BAA+B,EAC/B,UAAS,EAAE,EAAE;AACX,KAAC,CAAC,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;GAC5C,CAAC,CAAC;AAC5B,SAAO,mBAAmB,CAAC;CAC5B,CACF,CAAC,CAAC","file":"createTemplate.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('createTemplateMode', [\n    'modes',\n    'settings',\n    'commonMode',\n    'game',\n    function createTemplateModeServiceFactory(modesService,\n                                              settingsService,\n                                              commonModeService,\n                                              gameService) {\n      var createTemplate_actions = Object.create(commonModeService.actions);\n      createTemplate_actions.moveMap = function createTemplateMoveMap(scope, coord) {\n        scope.create.template.x = coord.x;\n        scope.create.template.y = coord.y;\n        scope.gameEvent('moveCreateTemplate');\n      };\n      createTemplate_actions.create = function createTemplateCreate(scope, event) {\n        scope.create.template.x = event['click#'].x;\n        scope.create.template.y = event['click#'].y;\n        scope.create.template.r = R.path(['ui_state','flip_map'], scope) ? 180 : 0;\n        return gameService.executeCommand('createTemplate', [scope.create.template],\n                                          scope, scope.game);\n      };\n      var createTemplate_default_bindings = {\n        create: 'clickMap',\n      };\n      var createTemplate_bindings = R.extend(Object.create(commonModeService.bindings),\n                                             createTemplate_default_bindings);\n      var createTemplate_buttons = [];\n      var createTemplate_mode = {\n        onEnter: function createTemplateOnEnter(scope) {\n          scope.gameEvent('enableCreateTemplate');\n          scope.gameEvent('enableMoveMap');\n        },\n        onLeave: function createTemplateOnLeave(scope) {\n          scope.create.template = null;\n          scope.gameEvent('disableMoveMap');\n          scope.gameEvent('disableCreateTemplate');\n        },\n        name: 'CreateTemplate',\n        actions: createTemplate_actions,\n        buttons: createTemplate_buttons,\n        bindings: createTemplate_bindings,\n      };\n      modesService.registerMode(createTemplate_mode);\n      settingsService.register('Bindings',\n                               createTemplate_mode.name,\n                               createTemplate_default_bindings,\n                               function(bs) {\n                                 R.extend(createTemplate_mode.bindings, bs);\n                               });\n      return createTemplate_mode;\n    }\n  ]);\n"]}
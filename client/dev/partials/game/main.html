<div>
  <div ng-show="game | gameConnection:'active'"
       class="panel panel-info">
    <div class="panel-heading">Chat</div>
    <div class="panel-content">
      <form ng-submit="doSendChatMessage()">
        <div class="form-group">
          <div class="input-group">
            <span class="input-group-btn">
              <button type="submit"
                      class="btn btn-default">
                Send
              </button>
            </span>
            <input type="text"
                   class="form-control"
                   placeholder="Msg..."
                   ng-model="chat.msg" />
          </div>
        </div>
      </form>
      <div class="chat-list">
        <div class="chat"
             ng-repeat="c in game.chat.slice().reverse().slice(0,20) track by c.stamp">
          {{ c.from }}
          ‚ûù
          {{c.msg}}
        </div>
      </div>
    </div>
  </div>
  <div class="panel panel-info">
    <div class="panel-heading">Tools</div>
    <div class="panel-content">
      <button class="btn {{ currentModeIs('Ruler') ? 'btn-primary' : 'btn-default' }}"
              title="{{action_bindings['enterRulerMode'] || ''}}"
              ng-click="doUseRuler()">
        Use<br />Ruler
      </button>
      <button class="btn {{ (game.ruler | gameRuler:'isDisplayed') ? 'btn-primary' : 'btn-default' }}"
              ng-click="doToggleShowRuler()">
        Show<br />Ruler
      </button>
      <button class="btn {{ currentModeIs('LoS') ? 'btn-primary' : 'btn-default' }}"
              title="{{action_bindings['enterLosMode'] || ''}}"
              ng-click="doUseLos()">
        Use<br />LoS
      </button>
      <button class="btn {{ (game.los | gameLos:'isDisplayed') ? 'btn-primary' : 'btn-default' }}"
              ng-click="doToggleShowLos()">
        Show<br />LoS
      </button>
      <button class="btn btn-default"
              ng-click="doCreateTemplate('aoe')">
        New<br />AoE
      </button>
      <button class="btn btn-default"
              ng-click="doCreateTemplate('spray')">
        New<br />Spray
      </button>
      <button class="btn btn-default"
              ng-click="doCreateTemplate('wall')">
        New<br />Wall
      </button>
    </div>
  </div>
  <div class="panel panel-info">
    <div class="panel-heading">Dice</div>
    <div class="panel-content">
      <button class="btn btn-default"
              title="{{action_bindings['roll1D6'] || ''}}"
              ng-click="doRollDice(6, 1)">
        1D6
      </button>
      <button class="btn btn-default"
              title="{{action_bindings['roll2D6'] || ''}}"
              ng-click="doRollDice(6, 2)">
        2D6
      </button>
      <button class="btn btn-default"
              title="{{action_bindings['roll3D6'] || ''}}"
              ng-click="doRollDice(6, 3)">
        3D6
      </button>
      <button class="btn btn-default"
              title="{{action_bindings['roll4D6'] || ''}}"
              ng-click="doRollDice(6, 4)">
        4D6
      </button>
      <button class="btn btn-default"
              title="{{action_bindings['roll5D6'] || ''}}"
              ng-click="doRollDice(6, 5)">
        5D6
      </button>
      <button class="btn btn-default"
              title="{{action_bindings['roll1D3'] || ''}}"
              ng-click="doRollDice(3, 1)">
        1D3
      </button>
      <div id="main-dice-list">
        <div ng-repeat="(i,dice) in game.dice.slice(-10).reverse() track by dice.stamp">
          <span class="text-primary">[{{::dice.user}}]</span>
          {{::dice.desc}}
        </div>
      </div>
    </div>
  </div>
</div>

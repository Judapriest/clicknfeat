{"version":3,"sources":["context.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,OAAK,OAAL,GAAe,SAAS,OAAT,CAAiB,IAAjB,EAAuB,KAAvB,EAA8B,IAA9B,EAAoC;;AAEjD,QAAI,WAAW,KAAK,EAAL,CAAQ,OAAR,CAFkC;AAGjD,SAAK,EAAL,CAAQ,OAAR,GAAkB,eAAe,QAAf,EAAyB,IAAzB,EAA+B,KAA/B,CAAlB,CAHiD;AAIjD,SAAK,QAAL,CAAc,IAAd,EAAoB,IAApB,EAJiD;AAKjD,SAAK,EAAL,CAAQ,OAAR,GAAkB,QAAlB,CALiD;GAApC,CADL;;AASV,OAAK,QAAL,GAAgB,SAAS,QAAT,CAAkB,IAAlB,EAAwB,KAAxB,EAA+B,IAA/B,EAAqC;AACnD,SAAK,SAAL,CAAe,IAAf,EAAqB,IAArB,EADmD;GAArC,CATN;;AAaV,WAAS,cAAT,CAAwB,QAAxB,EAAkC,KAAlC,EAAyC,KAAzC,EAAgD;AAC9C,QAAI,UAAU,SAAV,OAAU,CAAS,IAAT,EAAe;AAC3B,aAAO,UAAS,IAAT,EAAe;;;;AAEpB,eAAO,EAAE,KAAF,CACL,YAAM;AACJ,cAAI,UAAU,EAAE,IAAF,CAAO,KAAP,UAAV,CADA;AAEJ,iBAAO,KAAK,OAAL,CACJ,OADI,CACI,OADJ,EAEJ,KAFI,CAEE,UAAC,KAAD,EAAW;AAChB,oBAAQ,IAAR,CAAa,aAAb,EAA4B,KAA5B,EAAmC,KAAnC,EADgB;AAEhB,kBAAK,UAAL,GAAkB,EAAE,IAAF,CAChB,EAAE,SAAF,CAAY,EAAZ,CADgB,EAEhB,EAAE,MAAF,CAAS,KAAT,CAFgB,EAGhB,MAAK,UAAL,CAHF,CAFgB;WAAX,CAFT,CAFI;SAAN,EAYA,UAAC,OAAD,EAAa;;AAEX,gBAAK,OAAL,GAAe,OAAf,CAFW;SAAb,EAIA,YAAM;AACJ,iBAAO,SAAS,IAAT,EAAe,KAAf,QAA2B,CAAC,IAAD,CAA3B,CAAP,CADI;SAAN,CAjBK,EAAP,CAFoB;OAAf,CADoB;KAAf,CADgC;AA2B9C,YAAQ,MAAR,GAAiB,KAAjB,CA3B8C;AA4B9C,WAAO,OAAP,CA5B8C;GAAhD;CAbD,CAAD","file":"context.js","sourcesContent":["(function() {\n  self.context = function context(desc, setup, body) {\n    // console.log('context', desc);\n    let _wrapper = self.it.wrapper;\n    self.it.wrapper = contextWrapper(_wrapper, desc, setup);\n    self.describe(desc, body);\n    self.it.wrapper = _wrapper;\n  };\n\n  self.xcontext = function xcontext(desc, setup, body) {\n    self.xdescribe(desc, body);\n  };\n\n  function contextWrapper(_wrapper, _desc, setup) {\n    let wrapper = function(test) {\n      return function(done) {\n        // console.log('wrapper', _desc);\n        return R.pipeP(\n          () => {\n            let context = R.bind(setup, this)();\n            return self.Promise\n              .resolve(context)\n              .catch((error) => {\n                console.warn('Setup error', _desc, error);\n                this.catchError = R.pipe(\n                  R.defaultTo([]),\n                  R.append(error)\n                )(this.catchError);\n              });\n          },\n          (context) => {\n            // console.log('context', _desc, context);\n            this.context = context;\n          },\n          () => {\n            return _wrapper(test).apply(this, [done]);\n          }\n        )();\n      };\n    };\n    wrapper._debug = _desc;\n    return wrapper;\n  }\n})();\n"]}
{"version":3,"sources":["games.es6"],"names":[],"mappings":";;AAAA,QAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,YADX,EACyB,CACrB,MADqB,EAErB,OAFqB,EAGrB,YAHqB,EAIrB,SAAS,wBAAT,CAAkC,WAAlC,EACkC,YADlC,EAEkC,iBAFlC,EAEqD;AACnD,MAAI,oBAAoB;AACtB,UAAM,SAAS,cAAT,CAAwB,KAAxB,EAA+B;AACnC,YAAM,WAAN,GAAoB,EAApB,CADmC;AAEnC,YAAM,WAAN,GAAoB,EAAE,WAAF,CAClB,aAAa,cAAb,EACA,eAAe,KAAf,CAFkB,GAApB,CAFmC;;AAOnC,YAAM,OAAN,CAAc,oBAAd,EACc,kBAAkB,mBAAlB,CAAsC,KAAtC,CADd,EAPmC;AASnC,YAAM,OAAN,CAAc,kBAAd,EACc,kBAAkB,iBAAlB,CAAoC,KAApC,CADd,EATmC;AAWnC,YAAM,OAAN,CAAc,sBAAd,EACc,kBAAkB,qBAAlB,CAAwC,KAAxC,CADd,EAXmC;AAanC,YAAM,OAAN,CAAc,oBAAd,EACc,kBAAkB,mBAAlB,CAAsC,KAAtC,CADd,EAbmC;;AAgBnC,aAAO,KAAP,CAhBmC;KAA/B;AAkBN,UAAM,SAAS,cAAT,CAAwB,KAAxB,EAA+B;AACnC,aAAO,KAAP,CADmC;KAA/B;AAGN,wBAAoB,SAAS,uBAAT,CAAiC,KAAjC,EAAwC,KAAxC,EAA+C;AACjE,cAAQ,KAAR,CADiE;AAEjE,aAAO,EAAE,WAAF,CACL,YAAM;AACJ,eAAO,YAAY,MAAZ,CAAmB,MAAM,IAAN,CAAW,KAAX,CAA1B,CADI;OAAN,EAGA,kBAAkB,iBAAlB,CAAoC,KAApC,CAJK,GAAP,CAFiE;KAA/C;AASpB,sBAAkB,SAAS,qBAAT,CAA+B,KAA/B,EAAsC,KAAtC,EAA6C,KAA7C,EAAoD;AACpE,YAAM,WAAN,CAAkB,kBAAlB,EAAsC,KAAtC,EADoE;KAApD;AAGlB,0BAAsB,SAAS,yBAAT,CAAmC,KAAnC,EAA0C,KAA1C,EAAiD,IAAjD,EAAuD;AAC3E,aAAO,EAAE,WAAF,CACL,kBAAkB,KAAlB,CAAwB,MAAxB,CADK,EAEL,kBAAkB,iBAAlB,CAAoC,KAApC,CAFK,EAGL,IAHK,CAAP,CAD2E;KAAvD;AAMtB,wBAAoB,SAAS,uBAAT,CAAiC,KAAjC,EAAwC,KAAxC,EAA+C,EAA/C,EAAmD;AACrE,aAAO,EAAE,WAAF,CACL,aAAa,gBAAb,CAA8B,EAA9B,CADK,EAEL,eAAe,KAAf,CAFK,EAGL,MAAM,WAAN,CAHF,CADqE;KAAnD;AAMpB,sBAAkB,SAAS,qBAAT,CAA+B,KAA/B,EAAsC,IAAtC,EAA4C;AAC5D,aAAO,EAAE,WAAF,CACL,aAAa,aAAb,CAA2B,IAA3B,CADK,EAEL,eAAe,KAAf,CAFK,EAGL,YAAM;AACJ,cAAM,WAAN,CAAkB,kBAAlB,EACkB,EAAE,IAAF,CAAO,aAAP,EAAsB,EAAE,IAAF,CAAO,MAAM,WAAN,CAA7B,CADlB,EADI;OAAN,CAHK,CAOL,MAAM,WAAN,CAPF,CAD4D;KAA5C;GA9ChB,CAD+C;AA0DnD,MAAI,iBAAiB,EAAE,KAAF,CAAQ,UAAC,KAAD,EAAQ,KAAR,EAAkB;AAC7C,UAAM,WAAN,GAAoB,KAApB,CAD6C;AAE7C,YAAQ,GAAR,CAAY,oBAAZ,EAAkC,MAAM,WAAN,CAAlC,CAF6C;AAG7C,UAAM,WAAN,CAAkB,oBAAlB,EAH6C;GAAlB,CAAzB,CA1D+C;AA+DnD,IAAE,YAAF,CAAe,iBAAf,EA/DmD;AAgEnD,SAAO,iBAAP,CAhEmD;CAFrD,CALJ","file":"games.js","sourcesContent":["angular.module('clickApp.services')\n  .factory('stateGames', [\n    'game',\n    'games',\n    'fileImport',\n    function stateGamesServiceFactory(gameService,\n                                      gamesService,\n                                      fileImportService) {\n      var stateGamesService = {\n        init: function stateGamesInit(state) {\n          state.local_games = {};\n          state.games_ready = R.pipePromise(\n            gamesService.loadLocalGames,\n            setLocalGames$(state)\n          )();\n\n          state.onEvent('Games.local.create',\n                        stateGamesService.onGamesLocalCreate$(state));\n          state.onEvent('Games.local.load',\n                        stateGamesService.onGamesLocalLoad$(state));\n          state.onEvent('Games.local.loadFile',\n                        stateGamesService.onGamesLocalLoadFile$(state));\n          state.onEvent('Games.local.delete',\n                        stateGamesService.onGamesLocalDelete$(state));\n\n          return state;\n        },\n        save: function stateGamesSave(state) {\n          return state;\n        },\n        onGamesLocalCreate: function stateOnGamesLocalCreate(state, event) {\n          event = event;\n          return R.pipePromise(\n            () => {\n              return gameService.create(state.user.state);\n            },\n            stateGamesService.loadNewLocalGame$(state)\n          )();\n        },\n        onGamesLocalLoad: function stateOnGamesLocalLoad(state, event, index) {\n          state.changeEvent('Games.local.load', index);\n        },\n        onGamesLocalLoadFile: function stateOnGamesLocalLoadFile(state, event, file) {\n          return R.pipePromise(\n            fileImportService.read$('json'),\n            stateGamesService.loadNewLocalGame$(state)\n          )(file);\n        },\n        onGamesLocalDelete: function stateOnGamesLocalDelete(state, event, id) {\n          return R.pipePromise(\n            gamesService.removeLocalGame$(id),\n            setLocalGames$(state)\n          )(state.local_games);\n        },\n        loadNewLocalGame: function stateLoadNewLocalGame(state, game) {\n          return R.pipePromise(\n            gamesService.newLocalGame$(game),\n            setLocalGames$(state),\n            () => {\n              state.changeEvent('Games.local.load',\n                                R.prop('local_stamp', R.last(state.local_games)));\n            }\n          )(state.local_games);\n        }\n      };\n      var setLocalGames$ = R.curry((state, games) => {\n        state.local_games = games;\n        console.log('stateSetLocalGames', state.local_games);\n        state.changeEvent('Games.local.change');\n      });\n      R.curryService(stateGamesService);\n      return stateGamesService;\n    }\n  ]);\n"]}
{"version":3,"sources":["model.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,WADX,EACwB,qBADxB,EADU;;AAIV,wBAAsB,OAAtB,GAAgC,CAC9B,WAD8B,EAE9B,UAF8B,EAG9B,OAH8B,EAI9B,UAJ8B,EAK9B,YAL8B,EAM9B,eAN8B,EAO9B,oBAP8B,CAAhC,CAJU;AAaV,WAAS,qBAAT,CAA+B,gBAA/B,EAC+B,eAD/B,EAE+B,UAF/B,EAG+B,aAH/B,EAI+B,eAJ/B,EAK+B,kBAL/B,EAM+B,uBAN/B,EAMwD;AACtD,QAAM,gBAAgB,OAAO,MAAP,CAAc,mBAAmB,OAAnB,CAA9B,CADgD;AAEtD,kBAAc,WAAd,GAA4B,gBAA5B,CAFsD;AAGtD,kBAAc,UAAd,GAA2B,eAA3B,CAHsD;;AAKtD,QAAM,yBAAyB;AAC7B,qBAAe,GAAf;AACA,oBAAc,GAAd;KAFI,CALgD;AAStD,QAAM,iBAAiB,EAAE,MAAF,CAAS,OAAO,MAAP,CAAc,mBAAmB,QAAnB,CAAvB,EACO,sBADP,CAAjB,CATgD;AAWtD,QAAM,gBAAgB,gBACf,YADe,CACF,EAAE,QAAQ,IAAR;AACA,oBAAc,IAAd;AACA,mBAAa,IAAb;KAHA,CAAhB,CAXgD;AAgBtD,QAAM,aAAa;AACjB,eAAS,mBAAM,EAAN;AACT,eAAS,mBAAM,EAAN;AACT,YAAM,OAAN;AACA,eAAS,aAAT;AACA,eAAS,aAAT;AACA,gBAAU,cAAV;KANI,CAhBgD;AAwBtD,eAAW,YAAX,CAAwB,UAAxB,EAxBsD;AAyBtD,kBAAc,QAAd,CAAuB,UAAvB,EACuB,WAAW,IAAX,EACA,sBAFvB,EAGuB,UAAC,EAAD,EAAQ;AACN,QAAE,MAAF,CAAS,WAAW,QAAX,EAAqB,EAA9B,EADM;KAAR,CAHvB,CAzBsD;AA+BtD,WAAO,UAAP,CA/BsD;;AAiCtD,aAAS,gBAAT,CAA0B,KAA1B,EAAiC;AAC/B,UAAM,SAAS,wBACN,GADM,CACF,OADE,EACO,MAAM,IAAN,CAAW,eAAX,CADhB,CADyB;AAG/B,uBACG,KADH,CACS,sBADT,EAES,UAFT,EAGS,CAAC,cAAD,EAAiB,EAAjB,EAAqB,MAArB,CAHT,EAH+B;AAO/B,aAAO,gBACJ,QADI,CACK,KADL,EACY,CAAC,gBAAD,EAAmB,aAAnB,CADZ,CAAP,CAP+B;KAAjC;AAUA,aAAS,eAAT,CAAyB,KAAzB,EAAgC;AAC9B,UAAM,SAAS,wBACN,GADM,CACF,OADE,EACO,MAAM,IAAN,CAAW,eAAX,CADhB,CADwB;AAG9B,uBACG,KADH,CACS,sBADT,EAES,UAFT,EAGS,CAAE,aAAF,EAAiB,EAAjB,EAAqB,MAArB,CAHT,EAH8B;AAO9B,aAAO,gBACJ,QADI,CACK,KADL,EACY,CAAC,gBAAD,EAAmB,YAAnB,CADZ,CAAP,CAP8B;KAAhC;GAjDF;CAbD,CAAD","file":"model.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelMode', modelModeModelFactory);\n\n  modelModeModelFactory.$inject = [\n    'appAction',\n    'appState',\n    'modes',\n    'settings',\n    'modelsMode',\n    'modelBaseMode',\n    'gameModelSelection',\n  ];\n  function modelModeModelFactory(appActionService,\n                                 appStateService,\n                                 modesModel,\n                                 settingsModel,\n                                 modelsModeModel,\n                                 modelBaseModeModel,\n                                 gameModelSelectionModel) {\n    const model_actions = Object.create(modelBaseModeModel.actions);\n    model_actions.startCharge = modelStartCharge;\n    model_actions.startPlace = modelStartPlace;\n\n    const model_default_bindings = {\n      'startCharge': 'c',\n      'startPlace': 'p'\n    };\n    const model_bindings = R.extend(Object.create(modelBaseModeModel.bindings),\n                                  model_default_bindings);\n    const model_buttons = modelsModeModel\n          .buildButtons({ single: true,\n                          start_charge: true,\n                          start_place: true\n                        });\n    const model_mode = {\n      onEnter: () => { },\n      onLeave: () => { },\n      name: 'Model',\n      actions: model_actions,\n      buttons: model_buttons,\n      bindings: model_bindings\n    };\n    modesModel.registerMode(model_mode);\n    settingsModel.register('Bindings',\n                           model_mode.name,\n                           model_default_bindings,\n                           (bs) => {\n                             R.extend(model_mode.bindings, bs);\n                           });\n    return model_mode;\n\n    function modelStartCharge(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      appActionService\n        .defer('Game.command.execute',\n               'onModels',\n               ['startChargeP', [], stamps]);\n      return appStateService\n        .onAction(state, ['Modes.switchTo', 'ModelCharge']);\n    }\n    function modelStartPlace(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      appActionService\n        .defer('Game.command.execute',\n               'onModels',\n               [ 'startPlaceP', [], stamps]);\n      return appStateService\n        .onAction(state, ['Modes.switchTo', 'ModelPlace']);\n    }\n  }\n})();\n"]}
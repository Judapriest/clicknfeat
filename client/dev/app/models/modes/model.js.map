{"version":3,"sources":["model.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,WADX,EACwB,qBADxB,EADU;;AAIV,wBAAsB,OAAtB,GAAgC,CAC9B,UAD8B,EAE9B,OAF8B,EAG9B,UAH8B,EAI9B,YAJ8B,EAK9B,eAL8B,EAM9B,oBAN8B,CAAhC,CAJU;AAYV,WAAS,qBAAT,CAA+B,eAA/B,EAC+B,UAD/B,EAE+B,aAF/B,EAG+B,eAH/B,EAI+B,kBAJ/B,EAK+B,uBAL/B,EAKwD;AACtD,QAAM,gBAAgB,OAAO,MAAP,CAAc,mBAAmB,OAAnB,CAA9B,CADgD;AAEtD,kBAAc,WAAd,GAA4B,gBAA5B,CAFsD;AAGtD,kBAAc,UAAd,GAA2B,eAA3B,CAHsD;;AAKtD,QAAM,yBAAyB;AAC7B,qBAAe,GAAf;AACA,oBAAc,GAAd;KAFI,CALgD;AAStD,QAAM,iBAAiB,EAAE,MAAF,CAAS,OAAO,MAAP,CAAc,mBAAmB,QAAnB,CAAvB,EACO,sBADP,CAAjB,CATgD;AAWtD,QAAM,gBAAgB,gBACf,YADe,CACF,EAAE,QAAQ,IAAR;AACA,oBAAc,IAAd;AACA,mBAAa,IAAb;KAHA,CAAhB,CAXgD;AAgBtD,QAAM,aAAa;AACjB,eAAS,mBAAM,EAAN;AACT,eAAS,mBAAM,EAAN;AACT,YAAM,OAAN;AACA,eAAS,aAAT;AACA,eAAS,aAAT;AACA,gBAAU,cAAV;KANI,CAhBgD;AAwBtD,eAAW,YAAX,CAAwB,UAAxB,EAxBsD;AAyBtD,kBAAc,QAAd,CAAuB,UAAvB,EACuB,WAAW,IAAX,EACA,sBAFvB,EAGuB,UAAC,EAAD,EAAQ;AACN,QAAE,MAAF,CAAS,WAAW,QAAX,EAAqB,EAA9B,EADM;KAAR,CAHvB,CAzBsD;AA+BtD,WAAO,UAAP,CA/BsD;;AAiCtD,aAAS,gBAAT,CAA0B,KAA1B,EAAiC;AAC/B,UAAM,SAAS,wBACN,GADM,CACF,OADE,EACO,MAAM,IAAN,CAAW,eAAX,CADhB,CADyB;AAG/B,sBAAgB,WAAhB,CAA4B,sBAA5B,EAC4B,UAD5B,EAE4B,CAAC,cAAD,EAAiB,EAAjB,EAAqB,MAArB,CAF5B,EAH+B;AAM/B,sBAAgB,WAAhB,CAA4B,gBAA5B,EAA8C,aAA9C,EAN+B;KAAjC;AAQA,aAAS,eAAT,CAAyB,KAAzB,EAAgC;AAC9B,UAAM,SAAS,wBACN,GADM,CACF,OADE,EACO,MAAM,IAAN,CAAW,eAAX,CADhB,CADwB;AAG9B,sBAAgB,WAAhB,CAA4B,sBAA5B,EAC4B,UAD5B,EAE4B,CAAE,aAAF,EAAiB,EAAjB,EAAqB,MAArB,CAF5B,EAH8B;AAM9B,sBAAgB,WAAhB,CAA4B,gBAA5B,EAA8C,YAA9C,EAN8B;KAAhC;GA9CF;CAZD,CAAD","file":"model.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelMode', modelModeModelFactory);\n\n  modelModeModelFactory.$inject = [\n    'appState',\n    'modes',\n    'settings',\n    'modelsMode',\n    'modelBaseMode',\n    'gameModelSelection',\n  ];\n  function modelModeModelFactory(appStateService,\n                                 modesModel,\n                                 settingsModel,\n                                 modelsModeModel,\n                                 modelBaseModeModel,\n                                 gameModelSelectionModel) {\n    const model_actions = Object.create(modelBaseModeModel.actions);\n    model_actions.startCharge = modelStartCharge;\n    model_actions.startPlace = modelStartPlace;\n\n    const model_default_bindings = {\n      'startCharge': 'c',\n      'startPlace': 'p'\n    };\n    const model_bindings = R.extend(Object.create(modelBaseModeModel.bindings),\n                                  model_default_bindings);\n    const model_buttons = modelsModeModel\n          .buildButtons({ single: true,\n                          start_charge: true,\n                          start_place: true\n                        });\n    const model_mode = {\n      onEnter: () => { },\n      onLeave: () => { },\n      name: 'Model',\n      actions: model_actions,\n      buttons: model_buttons,\n      bindings: model_bindings\n    };\n    modesModel.registerMode(model_mode);\n    settingsModel.register('Bindings',\n                           model_mode.name,\n                           model_default_bindings,\n                           (bs) => {\n                             R.extend(model_mode.bindings, bs);\n                           });\n    return model_mode;\n\n    function modelStartCharge(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      appStateService.chainReduce('Game.command.execute',\n                                  'onModels',\n                                  ['startChargeP', [], stamps]);\n      appStateService.chainReduce('Modes.switchTo', 'ModelCharge');\n    }\n    function modelStartPlace(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      appStateService.chainReduce('Game.command.execute',\n                                  'onModels',\n                                  [ 'startPlaceP', [], stamps]);\n      appStateService.chainReduce('Modes.switchTo', 'ModelPlace');\n    }\n  }\n})();\n"]}
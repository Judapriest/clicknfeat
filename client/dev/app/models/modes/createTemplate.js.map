{"version":3,"sources":["createTemplate.es6"],"names":[],"mappings":";;AAAA,QAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,oBADX,EACiC,CAC7B,OAD6B,EAE7B,UAF6B,EAG7B,YAH6B,EAI7B,MAJ6B,EAK7B,SAAS,gCAAT,CAA0C,YAA1C,EAC0C,eAD1C,EAE0C,iBAF1C,EAE6D;AAC3D,MAAI,yBAAyB,OAAO,MAAP,CAAc,kBAAkB,OAAlB,CAAvC,CADuD;AAE3D,WAAS,gBAAT,CAA0B,KAA1B,EAAiC,KAAjC,EAAwC;AACtC,UAAM,MAAN,GAAe,EAAE,IAAF,CACb,EAAE,QAAF,CAAW,CAAC,UAAD,EAAY,MAAZ,CAAX,CADa,EAEb,EAAE,IAAF,CACE,EAAE,KAAF,CAAQ,GAAR,EAAa,MAAM,CAAN,CADf,EAEE,EAAE,KAAF,CAAQ,GAAR,EAAa,MAAM,CAAN,CAFf,CAFa,EAMb,MAAM,MAAN,CANF,CADsC;GAAxC;AAUA,yBAAuB,OAAvB,GAAiC,UAAC,KAAD,EAAQ,KAAR,EAAkB;AACjD,qBAAiB,KAAjB,EAAwB,KAAxB,EADiD;AAEjD,WAAO,MAAM,WAAN,CAAkB,oBAAlB,CAAP,CAFiD;GAAlB,CAZ0B;AAgB3D,yBAAuB,MAAvB,GAAgC,UAAC,KAAD,EAAQ,KAAR,EAAkB;AAChD,QAAI,aAAa,EAAE,IAAF,CAAO,CAAC,UAAD,EAAY,UAAZ,CAAP,EAAgC,KAAhC,CAAb,CAD4C;AAEhD,qBAAiB,MAAM,QAAN,CAAjB,EAAkC,KAAlC,EAFgD;AAGhD,WAAO,MAAM,KAAN,CAAY,sBAAZ,EACY,gBADZ,EAC8B,CAAC,MAAM,MAAN,CAAa,QAAb,EAAuB,UAAxB,CAD9B,CAAP,CAHgD;GAAlB,CAhB2B;AAsB3D,MAAI,kCAAkC;AACpC,YAAQ,UAAR;GADE,CAtBuD;AAyB3D,MAAI,0BAA0B,EAAE,MAAF,CAAS,OAAO,MAAP,CAAc,kBAAkB,QAAlB,CAAvB,EACS,+BADT,CAA1B,CAzBuD;AA2B3D,MAAI,yBAAyB,EAAzB,CA3BuD;AA4B3D,MAAI,sBAAsB;AACxB,aAAS,iBAAC,KAAD,EAAW;AAClB,YAAM,WAAN,CAAkB,6BAAlB,EADkB;AAElB,YAAM,WAAN,CAAkB,qBAAlB,EAFkB;KAAX;AAIT,aAAS,SAAS,qBAAT,CAA+B,KAA/B,EAAsC;AAC7C,YAAM,MAAN,GAAe,EAAE,KAAF,CAAQ,UAAR,EAAoB,IAApB,EAA0B,MAAM,MAAN,CAAzC,CAD6C;AAE7C,YAAM,WAAN,CAAkB,sBAAlB,EAF6C;AAG7C,YAAM,WAAN,CAAkB,8BAAlB,EAH6C;KAAtC;AAKT,UAAM,gBAAN;AACA,aAAS,sBAAT;AACA,aAAS,sBAAT;AACA,cAAU,uBAAV;GAbE,CA5BuD;AA2C3D,eAAa,YAAb,CAA0B,mBAA1B,EA3C2D;AA4C3D,kBAAgB,QAAhB,CAAyB,UAAzB,EACyB,oBAAoB,IAApB,EACA,+BAFzB,EAGyB,UAAC,EAAD,EAAQ;AACN,MAAE,MAAF,CAAS,oBAAoB,QAApB,EAA8B,EAAvC,EADM;GAAR,CAHzB,CA5C2D;AAkD3D,SAAO,mBAAP,CAlD2D;CAF7D,CANJ","file":"createTemplate.js","sourcesContent":["angular.module('clickApp.services')\n  .factory('createTemplateMode', [\n    'modes',\n    'settings',\n    'commonMode',\n    'game',\n    function createTemplateModeServiceFactory(modesService,\n                                              settingsService,\n                                              commonModeService) {\n      var createTemplate_actions = Object.create(commonModeService.actions);\n      function updateCreateBase(coord, state) {\n        state.create = R.over(\n          R.lensPath(['template','base']),\n          R.pipe(\n            R.assoc('x', coord.x),\n            R.assoc('y', coord.y)\n          ),\n          state.create\n        );\n      }\n      createTemplate_actions.moveMap = (state, coord) => {\n        updateCreateBase(coord, state);\n        return state.changeEvent('Game.create.update');\n      };\n      createTemplate_actions.create = (state, event) => {\n        let is_flipped = R.path(['ui_state','flip_map'], state);\n        updateCreateBase(event['click#'], state);\n        return state.event('Game.command.execute',\n                           'createTemplate', [state.create.template, is_flipped]);\n      };\n      var createTemplate_default_bindings = {\n        create: 'clickMap'\n      };\n      var createTemplate_bindings = R.extend(Object.create(commonModeService.bindings),\n                                             createTemplate_default_bindings);\n      var createTemplate_buttons = [];\n      var createTemplate_mode = {\n        onEnter: (state) => {\n          state.changeEvent('Game.template.create.enable');\n          state.changeEvent('Game.moveMap.enable');\n        },\n        onLeave: function createTemplateOnLeave(state) {\n          state.create = R.assoc('template', null, state.create);\n          state.changeEvent('Game.moveMap.disable');\n          state.changeEvent('Game.template.create.disable');\n        },\n        name: 'CreateTemplate',\n        actions: createTemplate_actions,\n        buttons: createTemplate_buttons,\n        bindings: createTemplate_bindings\n      };\n      modesService.registerMode(createTemplate_mode);\n      settingsService.register('Bindings',\n                               createTemplate_mode.name,\n                               createTemplate_default_bindings,\n                               (bs) => {\n                                 R.extend(createTemplate_mode.bindings, bs);\n                               });\n      return createTemplate_mode;\n    }\n  ]);\n"]}
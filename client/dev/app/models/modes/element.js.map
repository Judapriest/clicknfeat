{"version":3,"sources":["element.es6"],"names":[],"mappings":"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","file":"element.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('elementMode', elementModeModelFactory);\n\n  elementModeModelFactory.$inject = [\n    'appGame',\n    'appState',\n    'defaultMode',\n  ];\n  function elementModeModelFactory(appGameService,\n                                   appStateService,\n                                   defaultModeModel) {\n    const FLIP_MAP_LENS = R.lensPath(['view','flip_map']);\n    return function buildElementModeModel(type,\n                                          elementModel,\n                                          gameElementsModel,\n                                          gameElementSelectionModel) {\n      const ELEMENTS_LENS = R.lensPath(['game',`${type}s`]);\n      const SELECTION_LENS = R.lensPath(['game',`${type}_selection`]);\n\n      const element_actions = Object.create(defaultModeModel.actions);\n      element_actions.modeBackToDefault = clearElementSelection;\n      element_actions.clickMap = clearElementSelection;\n      element_actions.rightClickMap = clearElementSelection;\n      element_actions.copySelection = copySelection;\n      element_actions.delete = doDelete;\n      element_actions.toggleLock = toggleLock;\n\n      const moves = [\n        ['moveFront', 'up'],\n        ['moveBack', 'down'],\n        ['rotateLeft', 'left'],\n        ['rotateRight', 'right'],\n      ];\n      R.forEach(buildMove, moves);\n      const shifts = [\n        ['shiftUp', 'ctrl+up', 'shiftDown'],\n        ['shiftDown', 'ctrl+down', 'shiftUp'],\n        ['shiftLeft', 'ctrl+left', 'shiftRight'],\n        ['shiftRight', 'ctrl+right', 'shiftLeft'],\n      ];\n      R.forEach(buildShift, shifts);\n      buildDrag();\n\n      const element_default_bindings = {\n        'clickMap': 'clickMap',\n        'rightClickMap': 'rightClickMap',\n        'copySelection': 'ctrl+c',\n        'delete': 'del',\n        'toggleLock': 'l'\n      };\n      R.forEach(buildMoveBindings, moves);\n      R.forEach(buildShiftBindings, shifts);\n      const element_bindings = R.extend(Object.create(defaultModeModel.bindings),\n                                        element_default_bindings);\n      const element_buttons = [\n        [ 'Delete', 'delete' ],\n        [ 'Lock/Unlock', 'toggleLock' ],\n      ];\n      const element_mode = {\n        onEnter: () => { },\n        onLeave: () => { },\n        name: s.capitalize(type),\n        actions: element_actions,\n        buttons: element_buttons,\n        bindings: element_bindings\n      };\n\n      return element_mode;\n\n      function clearElementSelection(state) {\n        return R.thread(state)(\n          R.over(SELECTION_LENS, gameElementSelectionModel.clear$('local')),\n          R.assocPath(['view','detail'], null)\n        );\n      }\n      function copySelection(state) {\n        const stamps = R.thread(state)(\n          R.view(SELECTION_LENS),\n          gameElementSelectionModel.get$('local')\n        );\n        return R.thread(state)(\n          R.view(ELEMENTS_LENS),\n          gameElementsModel.copyStamps$(stamps),\n          R.assoc('create', R.__, state),\n          appStateService\n            .onAction$(R.__, [ 'Modes.switchTo',\n                               `Create${s.capitalize(type)}` ])\n        );\n      }\n      function doDelete(state) {\n        const stamps = R.thread(state)(\n          R.view(SELECTION_LENS),\n          gameElementSelectionModel.get$('local')\n        );\n        return  appStateService\n          .onAction(state,  [ 'Game.command.execute',\n                              `delete${s.capitalize(type)}`,\n                              [stamps] ]);\n      }\n      function toggleLock(state) {\n        const stamps = R.thread(state)(\n          R.view(SELECTION_LENS),\n          gameElementSelectionModel.get$('local')\n        );\n        return R.thread(state)(\n          R.view(ELEMENTS_LENS),\n          gameElementsModel.findStamp$(stamps[0]),\n          R.ifElse(\n            R.exists,\n            (element) => {\n              const is_locked = elementModel.isLocked(element);\n              return appStateService\n                .onAction(state, [ 'Game.command.execute',\n                                   `lock${s.capitalize(type)}s`,\n                                   [!is_locked, stamps] ]);\n            },\n            () => state\n          )\n        );\n      }\n      function buildMove([move]) {\n        element_actions[move] = (state) => {\n          const stamps = R.thread(state)(\n            R.view(SELECTION_LENS),\n            gameElementSelectionModel.get$('local')\n          );\n          return appStateService\n            .onAction(state, [ 'Game.command.execute',\n                               `on${s.capitalize(type)}s`,\n                               [ `${move}P`, [false], stamps ] ]);\n        };\n        element_actions[move+'Small'] = (state) => {\n          const stamps = R.thread(state)(\n            R.view(SELECTION_LENS),\n            gameElementSelectionModel.get$('local')\n          );\n          return appStateService\n            .onAction(state, [ 'Game.command.execute',\n                               `on${s.capitalize(type)}s`,\n                               [ `${move}P`, [true], stamps ] ]);\n        };\n      }\n      function buildShift([shift, _key_, flip_shift]) {\n        element_actions[shift] = (state) => {\n          const stamps = R.thread(state)(\n            R.view(SELECTION_LENS),\n            gameElementSelectionModel.get$('local')\n          );\n          const element_shift = ( R.view(FLIP_MAP_LENS, state)\n                                  ? flip_shift\n                                  : shift\n                                );\n          return appStateService\n            .onAction(state, [ 'Game.command.execute',\n                               `on${s.capitalize(type)}s`,\n                               [ `${element_shift}P`, [false], stamps ] ]);\n        };\n        element_actions[shift+'Small'] = (state) => {\n          const stamps = R.thread(state)(\n            R.view(SELECTION_LENS),\n            gameElementSelectionModel.get$('local')\n          );\n          const element_shift = ( R.view(FLIP_MAP_LENS, state)\n                                  ? flip_shift\n                                  : shift\n                                );\n          return appStateService\n            .onAction(state, [ 'Game.command.execute',\n                               `on${s.capitalize(type)}s`,\n                               [ `${element_shift}P`, [true], stamps ] ]);\n        };\n      }\n\n      function buildDrag() {\n        element_actions[`dragStart${s.capitalize(type)}`] = dragStartElement;\n        defaultModeModel\n          .actions[`dragStart${s.capitalize(type)}`] = dragStartElement;\n        element_actions[`drag${s.capitalize(type)}`] = dragElement;\n        element_actions[`dragEnd${s.capitalize(type)}`] = dragEndElement;\n\n        let drag_element_start_state;\n        function dragStartElement(state, event) {\n          const element = event.target;\n          if(elementModel.isLocked(element)) {\n            return R.rejectP(`${s.capitalize(type)} is locked`);\n          }\n          drag_element_start_state = R.clone(event.target.state);\n          updateStateWithDelta(event, event.target.state);\n          return R.over(\n            SELECTION_LENS,\n            gameElementSelectionModel\n              .set$('local', [event.target.state.stamp]),\n            state\n          );\n        }\n        function dragElement(_state_, event) {\n          if(elementModel.isLocked(event.target)) {\n            return R.rejectP(`${s.capitalize(type)} is locked`);\n          }\n          updateStateWithDelta(event, event.target.state);\n          appGameService[`${type}s`].force_changes\n            .send([event.target.state.stamp]);\n          return null;\n        }\n        function dragEndElement(state, event) {\n          if(elementModel.isLocked(event.target)) {\n            return R.rejectP(`${s.capitalize(type)} is locked`);\n          }\n          event.target.state = R.clone(drag_element_start_state);\n          const end_state = R.clone(drag_element_start_state);\n          updateStateWithDelta(event, end_state);\n          return appStateService\n            .onAction(state, [ 'Game.command.execute',\n                               `on${s.capitalize(type)}s`,\n                               [ 'setPositionP',\n                                 [end_state],\n                                 [event.target.state.stamp]\n                               ] ]);\n        }\n        function updateStateWithDelta(event, state) {\n          const dx = event.now.x - event.start.x;\n          const dy = event.now.y - event.start.y;\n          state.x = drag_element_start_state.x + dx;\n          state.y = drag_element_start_state.y + dy;\n        }\n      }\n\n      function buildMoveBindings([move, keys]) {\n        element_default_bindings[move] = keys;\n        element_default_bindings[move+'Small'] = 'shift+'+keys;\n      }\n      function buildShiftBindings([shift, keys]) {\n        element_default_bindings[shift] = keys;\n        element_default_bindings[shift+'Small'] = 'shift+'+keys;\n      }\n    };\n  }\n})();\n"]}
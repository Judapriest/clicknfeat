{"version":3,"sources":["models.es6"],"names":[],"mappings":"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","file":"models.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelsMode', modelsModeModelFactory);\n\n  modelsModeModelFactory.$inject = [\n    '$rootScope',\n    'appAction',\n    'appGame',\n    'appState',\n    'modes',\n    'settings',\n    'defaultMode',\n    'model',\n    'gameModels',\n    'gameModelSelection',\n    'prompt',\n  ];\n  function modelsModeModelFactory($rootScope,\n                                  appActionService,\n                                  appGameService,\n                                  appStateService,\n                                  modesModel,\n                                  settingsModel,\n                                  defaultModeModel,\n                                  modelModel,\n                                  gameModelsModel,\n                                  gameModelSelectionModel,\n                                  promptService) {\n    const FLIP_MAP_LENS = R.lensPath(['view','flip_map']);\n    const MODELS_LENS = R.lensPath(['game','models']);\n    const MODEL_SELECTION_LENS = R.lensPath(['game','model_selection']);\n    const models_actions = Object.create(defaultModeModel.actions);\n    models_actions.clickMap = modelsClearSelection;\n    models_actions.rightClickMap = modelsClearSelection;\n    models_actions.modeBackToDefault = modelsClearSelection;\n    models_actions.deleteSelection = modelsDeleteSelection;\n    models_actions.copySelection = modelsCopySelection;\n    models_actions.toggleLock = modelsToggleLock;\n    models_actions.toggleImageDisplay = modelsToggleImageDisplay;\n    models_actions.setNextImage = modelsSetNextImage;\n    models_actions.toggleWreckDisplay = modelsToggleWreckDisplay;\n    models_actions.toggleUnitDisplay = modelsToggleUnitDisplay;\n    models_actions.setUnit = modelsSetUnit;\n    models_actions.toggleMeleeDisplay = modelsToggleMeleeDisplay;\n    models_actions.toggleReachDisplay = modelsToggleReachDisplay;\n    models_actions.toggleStrikeDisplay = modelsToggleStrikeDisplay;\n    models_actions.toggleCounterDisplay = modelsToggleCounterDisplay;\n    models_actions.incrementCounter = modelsIncrementCounter;\n    models_actions.decrementCounter = modelsDecrementCounter;\n    models_actions.toggleSoulsDisplay = modelsToggleSoulsDisplay;\n    models_actions.incrementSouls = modelsIncrementSouls;\n    models_actions.decrementSouls = modelsDecrementSouls;\n    models_actions.setRulerMaxLength = modelsSetRulerMaxLength;\n    models_actions.setChargeMaxLength = modelsSetChargeMaxLength;\n    models_actions.setPlaceMaxLength = modelsSetPlaceMaxLength;\n    models_actions.togglePlaceWithin = modelsTogglePlaceWithin;\n    models_actions.toggleLeaderDisplay = modelsToggleLeaderDisplay;\n    models_actions.toggleIncorporealDisplay = modelsToggleIncorporealDisplay;\n    models_actions.setOrientationUp = modelsSetOrientationUp;\n    models_actions.setOrientationDown = modelsSetOrientationDown;\n    models_actions.setTargetModel = modelsSetTargetModel;\n    models_actions.clearLabel = modelsClearLabel;\n    const effects = [\n      [ 'Blind'      , 'b' ],\n      [ 'Corrosion'  , 'c' ],\n      [ 'Disrupt'    , 'd' ],\n      [ 'Fire'       , 'f' ],\n      [ 'Fleeing'    , 'e' ],\n      [ 'KD'         , 'k' ],\n      [ 'Stationary' , 't' ],\n    ];\n    R.forEach(modelsToggleEffect, effects);\n    const auras = [\n      [ 'Red'    , '#F00' ],\n      [ 'Green'  , '#0F0' ],\n      [ 'Blue'   , '#00F' ],\n      [ 'Yellow' , '#FF0' ],\n      [ 'Purple' , '#F0F' ],\n      [ 'Cyan'   , '#0FF' ],\n    ];\n    R.forEach(modelsToggleAura, auras);\n    models_actions.toggleCtrlAreaDisplay = modelsToggleCtrlAreaDisplay;\n    const areas = R.range(0, 10);\n    R.forEach(modelsToggleAreaDisplay, areas);\n    const moves = [\n      ['moveFront'   , 'up'    ],\n      ['moveBack'    , 'down'  ],\n      ['rotateLeft'  , 'left'  ],\n      ['rotateRight' , 'right' ],\n    ];\n    R.forEach(modelsMove, moves);\n    const shifts = [\n      ['shiftUp'    , 'ctrl+up'    , 'shiftDown'  ],\n      ['shiftDown'  , 'ctrl+down'  , 'shiftUp'    ],\n      ['shiftLeft'  , 'ctrl+left'  , 'shiftRight' ],\n      ['shiftRight' , 'ctrl+right' , 'shiftLeft'  ],\n    ];\n    R.forEach(modelsShift, shifts);\n    modelsDrag();\n\n    const models_default_bindings = {\n      'clickMap': 'clickMap',\n      'rightClickMap': 'rightClickMap',\n      'deleteSelection': 'del',\n      'copySelection': 'ctrl+c',\n      'toggleLock': 'l',\n      'toggleImageDisplay': 'alt+i',\n      'setNextImage': 'shift+i',\n      'toggleWreckDisplay': 'alt+w',\n      'setOrientationUp': 'pageup',\n      'setOrientationDown': 'pagedown',\n      'setTargetModel': 'shift+clickModel',\n      'toggleCounterDisplay': 'alt+n',\n      'incrementCounter': '+',\n      'decrementCounter': '-',\n      'toggleSoulsDisplay': 'alt+o',\n      'incrementSouls': 'ctrl++',\n      'decrementSouls': 'ctrl+-',\n      'toggleCtrlAreaDisplay': 'alt+a',\n      'setRulerMaxLength': 'shift+r',\n      'setChargeMaxLength': 'shift+c',\n      'setPlaceMaxLength': 'shift+p',\n      'togglePlaceWithin': 'alt+p',\n      'toggleMeleeDisplay': 'alt+m',\n      'toggleReachDisplay': 'alt+r',\n      'toggleStrikeDisplay': 'alt+s',\n      'toggleUnitDisplay': 'alt+u',\n      'setUnit': 'shift+u',\n      'toggleLeaderDisplay': 'alt+l',\n      'toggleIncorporealDisplay': 'alt+g',\n      'clearLabel': 'ctrl+shift+l'\n    };\n    R.forEach(modelsBindMove, moves);\n    R.forEach(modelsBindShift, shifts);\n    R.forEach(modelsBindArea, areas);\n    R.addIndex(R.forEach)(modelsBindAura, auras);\n    R.forEach(modelsBindEffect, effects);\n    const models_bindings = R.extend(Object.create(defaultModeModel.bindings),\n                                     models_default_bindings);\n\n    const models_buttons = buildModelsModesButtons();\n    const models_mode = {\n      onEnter: () => { },\n      onLeave: () => { },\n      name: 'Models',\n      actions: models_actions,\n      buttons: models_buttons,\n      buildButtons: buildModelsModesButtons,\n      bindings: models_bindings,\n      areas: areas,\n      auras: auras,\n      effects: effects\n    };\n    modesModel.registerMode(models_mode);\n    settingsModel.register('Bindings',\n                           models_mode.name,\n                           models_default_bindings,\n                           (bs) => {\n                             R.extend(models_mode.bindings, bs);\n                           });\n\n    return models_mode;\n\n    function modelsClearSelection(state) {\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'setModelSelection',\n                           [ 'clear', null ] ]);\n    }\n    function modelsDeleteSelection(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'deleteModel', [stamps] ]);\n    }\n    function modelsCopySelection(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.copyStamps$(stamps),\n        (copy) => appStateService\n          .onAction(state, ['Game.model.copy', copy])\n      );\n    }\n    function modelsToggleLock(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isLocked,\n            (present) => appStateService\n              .onAction(state, [ 'Game.command.execute',\n                                 'lockModels',\n                                 [ !present, stamps] ])\n          )\n        )\n      );\n    }\n    function modelsToggleImageDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isImageDisplayed,\n        (present) => appStateService\n          .onAction(state, [ 'Game.command.execute',\n                             'onModels',\n                             [ 'setImageDisplay', [!present], stamps] ])\n      );\n    }\n    function modelsSetNextImage(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           [ 'setNextImage', [], stamps] ]);\n    }\n    function modelsToggleWreckDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isWreckDisplayed,\n        (present) => appStateService\n          .onAction(state, [ 'Game.command.execute',\n                             'onModels',\n                             [ 'setWreckDisplay', [!present], stamps] ])\n      );\n    }\n    function modelsToggleUnitDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isUnitDisplayed,\n            (present) => appStateService\n              .onAction(state, [ 'Game.command.execute',\n                                 'onModels',\n                                 [ 'setUnitDisplay', [!present], stamps] ])\n          )\n        )\n      );\n    }\n    function modelsSetUnit(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          (model) => R.threadP(model)(\n            modelModel.unit,\n            R.defaultTo(0),\n            (value) => promptService\n              .promptP('prompt', 'Set unit number :', value)\n              .catch(R.always(null)),\n            (value) => appActionService\n              .do('Game.command.execute',\n                  'onModels',\n                  [ 'setUnit', [value], stamps])\n          )\n        )\n      );\n    }\n    function modelsToggleMeleeDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isMeleeDisplayed$('mm'),\n            (present) => appStateService\n              .onAction(state, [ 'Game.command.execute',\n                                 'onModels',\n                                 [ 'setMeleeDisplay', ['mm', !present], stamps] ])\n          )\n        )\n      );\n    }\n    function modelsToggleReachDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isMeleeDisplayed$('mr'),\n            (present) => appStateService\n              .onAction(state, [ 'Game.command.execute',\n                                 'onModels',\n                                 [ 'setMeleeDisplay', ['mr', !present], stamps] ])\n          )\n        )\n      );\n    }\n    function modelsToggleStrikeDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isMeleeDisplayed$('ms'),\n            (present) => appStateService\n              .onAction(state, [ 'Game.command.execute',\n                                 'onModels',\n                                 [ 'setMeleeDisplay', ['ms', !present], stamps] ])\n          )\n        )\n      );\n    }\n    function modelsToggleCounterDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isCounterDisplayed$('c'),\n        (present) => appStateService\n          .onAction(state, [ 'Game.command.execute',\n                             'onModels',\n                             [ 'setCounterDisplay', ['c', !present], stamps] ])\n      );\n    }\n    function modelsIncrementCounter(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           [ 'incrementCounter', ['c'], stamps] ]);\n    }\n    function modelsDecrementCounter(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           [ 'decrementCounter', ['c'], stamps] ]);\n    }\n    function modelsToggleSoulsDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isCounterDisplayed$('s'),\n        (present) => appStateService\n          .onAction(state, [ 'Game.command.execute',\n                             'onModels',\n                             [ 'setCounterDisplay', ['s', !present], stamps] ])\n      );\n    }\n    function modelsIncrementSouls(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           [ 'incrementCounter', ['s'], stamps] ]);\n    }\n    function modelsDecrementSouls(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           [ 'decrementCounter', ['s'], stamps] ]);\n    }\n    function modelsSetRulerMaxLength(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          (model) => R.threadP(model)(\n            modelModel.rulerMaxLength,\n            R.defaultTo(0),\n            (value) => promptService\n              .promptP('prompt', 'Set ruler max length :', value)\n              .catch(R.always(null)),\n            (value) => (value === 0) ? null : value,\n            (value) => {\n              appActionService\n                .do('Game.command.execute',\n                    'onModels',\n                    [ 'setRulerMaxLength', [value], stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsSetChargeMaxLength(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.threadP(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          (model) => R.threadP(model)(\n            modelModel.chargeMaxLength,\n            R.defaultTo(0),\n            (value) => promptService\n              .promptP('prompt', 'Set charge max length :', value)\n              .catch(R.always(null)),\n            (value) => (value === 0) ? null : value,\n            (value) => {\n              appActionService\n                .do('Game.command.execute',\n                    'onModels',\n                    ['setChargeMaxLength', [value], stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsSetPlaceMaxLength(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.threadP(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          (model) => R.threadP(model)(\n            modelModel.placeMaxLength,\n            R.defaultTo(0),\n            (value) => promptService\n              .promptP('prompt','Set place max length :', value)\n              .catch(R.always(null)),\n            (value) => (value === 0) ? null : value,\n            (value) => {\n              appActionService\n                .do('Game.command.execute',\n                    'onModels',\n                    ['setPlaceMaxLengthP', [value], stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsTogglePlaceWithin(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.placeWithin,\n            (present) => {\n              appStateService\n                .onAction(state, ['Game.command.execute',\n                                  'onModels',\n                                  ['setPlaceWithinP', [!present], stamps] ]);\n            }\n          )\n        )\n      );\n    }\n    function modelsToggleLeaderDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isLeaderDisplayed,\n            (present) => appStateService\n              .onAction(state, [ 'Game.command.execute',\n                                 'onModels',\n                                 [ 'setLeaderDisplay', [!present], stamps ] ])\n          )\n        )\n      );\n    }\n    function modelsToggleIncorporealDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isIncorporealDisplayed,\n        (present) => appStateService\n          .onAction(state, [ 'Game.command.execute',\n                             'onModels',\n                             [ 'setIncorporealDisplay', [!present], stamps ] ])\n      );\n    }\n    function modelsToggleEffect([effect, flag]) {\n      models_actions[`toggle${effect}EffectDisplay`] = modelsToggleEffect_;\n\n      function modelsToggleEffect_(state) {\n        const stamps = gameModelSelectionModel\n                .get('local', R.view(MODEL_SELECTION_LENS, state));\n        return R.thread(state)(\n          R.view(MODELS_LENS),\n          gameModelsModel.findStamp$(stamps[0]),\n          R.unless(\n            R.isNil,\n            R.pipe(\n              modelModel.isEffectDisplayed$(flag),\n              (present) => appStateService\n                .onAction(state, [ 'Game.command.execute',\n                                   'onModels', [\n                                     'setEffectDisplay',\n                                     [flag, !present],\n                                     stamps\n                                   ] ])\n            )\n          )\n        );\n      }\n    }\n    function modelsToggleAura([aura, hex]) {\n      models_actions[`toggle${aura}AuraDisplay`] = modelsToggleAura_;\n\n      function modelsToggleAura_(state) {\n        const stamps = gameModelSelectionModel\n                .get('local', R.view(MODEL_SELECTION_LENS, state));\n        return R.thread(state)(\n          R.view(MODELS_LENS),\n          gameModelsModel.findStamp$(stamps[0]),\n          R.unless(\n            R.isNil,\n            R.pipe(\n              modelModel.auraDisplay,\n              (present) => appStateService\n                .onAction(state, [ 'Game.command.execute',\n                                   'onModels', [\n                                     'setAuraDisplay',\n                                     [(present === hex) ? null : hex],\n                                     stamps\n                                   ] ])\n            )\n          )\n        );\n      }\n    }\n    function modelsToggleCtrlAreaDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return R.thread(state)(\n        R.view(MODELS_LENS),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isCtrlAreaDisplayed,\n            (present) => appStateService\n              .onAction(state, [ 'Game.command.execute',\n                                 'onModels', [\n                                   'setCtrlAreaDisplay',\n                                   [!present],\n                                   stamps\n                                 ] ])\n          )\n        )\n      );\n    }\n    function modelsToggleAreaDisplay(area) {\n      const size = area === 0 ? 10 : area;\n      models_actions[`toggle${size}InchesAreaDisplay`] =\n        modelsToggleAreaDisplay_(size);\n      const big_size = size + 10;\n      models_actions[`toggle${big_size}InchesAreaDisplay`] =\n        modelsToggleAreaDisplay_(big_size);\n\n      function modelsToggleAreaDisplay_(size) {\n        return function modelsToggleSizeAreaDisplay(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', R.view(MODEL_SELECTION_LENS, state));\n          return R.thread(state)(\n            R.view(MODELS_LENS),\n            gameModelsModel.findStamp$(stamps[0]),\n            R.unless(\n              R.isNil,\n              R.pipe(\n                modelModel.areaDisplay,\n                (present) => appStateService\n                  .onAction(state, [ 'Game.command.execute',\n                                     'onModels', [\n                                       'setAreaDisplay',\n                                       [(present === size) ? null : size],\n                                       stamps\n                                     ] ])\n              )\n            )\n          );\n        };\n      }\n    }\n    function modelsMove([move, _key_]) {\n      models_actions[move] = modelsMove_(false);\n      models_actions[`${move}Small`] = modelsMove_(true);\n\n      function modelsMove_(small) {\n        return function modelsSmallMove(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', R.view(MODEL_SELECTION_LENS, state));\n          return appStateService\n            .onAction(state, [ 'Game.command.execute',\n                               'onModels',\n                               [ move+'P', [small], stamps ] ]);\n        };\n      }\n    }\n    function modelsShift([shift, _key_, flip_shift]) {\n      models_actions[shift] = modelsShift_(false);\n      models_actions[`${shift}Small`] = modelsShift_(true);\n\n      function modelsShift_(small) {\n        return function modelsShiftSmall(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', R.view(MODEL_SELECTION_LENS, state));\n          const model_shift = ( R.viewOr(false, FLIP_MAP_LENS, state)\n                                ? flip_shift\n                                : shift\n                              );\n          return appStateService\n            .onAction(state, [ 'Game.command.execute',\n                               'onModels',\n                               [model_shift+'P', [small], stamps] ]);\n        };\n      }\n    }\n    function modelsSetOrientationUp(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      const orientation = R.viewOr(false, FLIP_MAP_LENS, state) ? 180 : 0;\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           ['setOrientationP', [orientation], stamps] ]);\n    }\n    function modelsSetOrientationDown(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      const orientation = R.viewOr(false, FLIP_MAP_LENS, state) ? 0 : 180;\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           ['setOrientationP', [orientation], stamps] ]);\n    }\n    function modelsSetTargetModel(state, event) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           ['orientToP', [event['click#'].target], stamps] ]);\n    }\n    function modelsClearLabel(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', R.view(MODEL_SELECTION_LENS, state));\n      return appStateService\n        .onAction(state, [ 'Game.command.execute',\n                           'onModels',\n                           [ 'clearLabel', [], stamps] ]);\n    }\n\n    function modelsDrag() {\n      let drag_charge_target;\n      let drag_models_start_states;\n      let drag_models_start_selection;\n\n      models_actions.dragStartModel = modelsDragStart;\n      defaultModeModel.actions.dragStartModel = modelsDragStart;\n      models_actions.dragModel = modelsDragContinue;\n      defaultModeModel.actions.dragModel = modelsDragContinue;\n      models_actions.dragEndModel = modelsDragEnd;\n      defaultModeModel.actions.dragEndModel = modelsDragEnd;\n\n      function modelsDragStart(state, event) {\n        const stamp = event.target.state.stamp;\n        return R.thread(state.game)(\n          resolveModelSelection,\n          gameModelsModel.findAnyStamps$(R.__, state.game.models),\n          R.reject(R.isNil),\n          R.tap(initDragChargeTarget),\n          R.tap((models) => { drag_models_start_selection = models; }),\n          R.map(modelModel.saveState),\n          R.tap((states) => { drag_models_start_states = states; }),\n          () => modelsDragContinue(state, event)\n        );\n\n        function resolveModelSelection() {\n          return R.thread(state)(\n            R.view(MODEL_SELECTION_LENS),\n            R.ifElse(\n              gameModelSelectionModel.in$('local', stamp),\n              gameModelSelectionModel.get$('local'),\n              () => {\n                appActionService\n                  .defer('Game.command.execute',\n                         'setModelSelection',\n                         ['set', [stamp]]);\n                return [stamp];\n              }\n            )\n          );\n        }\n        function initDragChargeTarget(models) {\n          drag_charge_target = null;\n          if(R.length(models) !== 1) return;\n\n          R.thread(models)(\n            R.head,\n            modelModel.chargeTarget,\n            R.unless(\n              R.isNil,\n              R.pipe(\n                gameModelsModel.findStamp$(R.__, state.game.models),\n                (target_model) => {\n                  drag_charge_target = target_model;\n                }\n              )\n            )\n          );\n        }\n      }\n      function modelsDragContinue(_state_, event) {\n        return R.threadP(drag_models_start_selection)(\n          R.addIndex(R.map)(updateDragedModelPositionP),\n          R.allP,\n          R.reject(R.equals(null)),\n          R.unless(\n            R.isEmpty,\n            () => {\n              appGameService.models\n                .force_changes\n                .send(R.map(R.path(['state','stamp']), drag_models_start_selection));\n              $rootScope.$digest();\n            }\n          )\n        );\n\n        function updateDragedModelPositionP(model, index) {\n          const pos = {\n            x: drag_models_start_states[index].x + event.now.x - event.start.x,\n            y: drag_models_start_states[index].y + event.now.y - event.start.y\n          };\n          return modelModel\n            .setPositionP_(drag_charge_target, pos, model)\n            .catch(() => null);\n        }\n      }\n      function modelsDragEnd(_state_, event) {\n        return R.threadP(drag_models_start_selection)(\n          R.addIndex(R.map)(resetDragedModelPositionP),\n          R.allP,\n          R.reject(R.isNil),\n          R.map(R.path(['state','stamp'])),\n          setFinalPositions\n        );\n\n        function resetDragedModelPositionP(model, index) {\n          return modelModel\n            .setPositionP_(drag_charge_target,\n                           drag_models_start_states[index], model)\n            .catch(() => null);\n        }\n        function setFinalPositions(stamps) {\n          const shift = {\n            x: event.now.x - event.start.x,\n            y: event.now.y - event.start.y\n          };\n          appActionService\n            .do('Game.command.execute',\n                'onModels', [\n                  'shiftPositionP',\n                  [drag_charge_target, shift],\n                  stamps\n                ]);\n        }\n      }\n    }\n\n    function modelsBindMove([move, keys]) {\n      models_default_bindings[move] = keys;\n      models_default_bindings[`${move}Small`] = `shift+${keys}`;\n    }\n    function modelsBindShift([shift, keys]) {\n      models_default_bindings[shift] = keys;\n      models_default_bindings[`${shift}Small`] = `shift+${keys}`;\n    }\n    function modelsBindArea(area) {\n      let size = area === 0 ? 10 : area;\n      models_default_bindings[`toggle${size}InchesAreaDisplay`] = `alt+${area}`;\n      size += 10;\n      models_default_bindings[`toggle${size}InchesAreaDisplay`] = `alt+shift+${area}`;\n    }\n    function modelsBindAura([aura], index) {\n      models_default_bindings[`toggle${aura}AuraDisplay`] = `ctrl+${index+1}`;\n    }\n    function modelsBindEffect([effect, keys]) {\n      models_default_bindings[`toggle${effect}EffectDisplay`] = `alt+${keys}`;\n    }\n\n    function buildModelsModesButtons({ single,\n                                       start_charge, end_charge,\n                                       start_place, end_place\n                                     } = {}) {\n      let ret = [\n        [ 'Delete', 'deleteSelection' ],\n        [ 'Copy', 'copySelection' ],\n        [ 'Lock', 'toggleLock' ],\n        // [ 'Ruler Max Len.', 'setRulerMaxLength' ],\n        [ 'Clear Label', 'clearLabel' ],\n        [ 'Image', 'toggle', 'image' ],\n        [ 'Show/Hide', 'toggleImageDisplay', 'image' ],\n        [ 'Next', 'setNextImage', 'image' ],\n        [ 'Wreck', 'toggleWreckDisplay', 'image' ],\n        [ 'Orient.', 'toggle', 'orientation' ],\n        [ 'Face Up', 'setOrientationUp', 'orientation' ],\n        [ 'Face Down', 'setOrientationDown', 'orientation' ],\n        [ 'Counter', 'toggle', 'counter' ],\n        [ 'Show/Hide', 'toggleCounterDisplay', 'counter' ],\n        [ 'Inc.', 'incrementCounter', 'counter' ],\n        [ 'Dec.', 'decrementCounter', 'counter' ],\n        [ 'Souls', 'toggle', 'souls' ],\n        [ 'Show/Hide', 'toggleSoulsDisplay', 'souls' ],\n        [ 'Inc.', 'incrementSouls', 'souls' ],\n        [ 'Dec.', 'decrementSouls', 'souls' ],\n        [ 'Melee', 'toggle', 'melee' ],\n        [ '0.5\"', 'toggleMeleeDisplay', 'melee' ],\n        [ 'Reach', 'toggleReachDisplay', 'melee' ],\n        [ 'Strike', 'toggleStrikeDisplay', 'melee' ],\n      ];\n      if(single) {\n        ret = R.concat(ret, [ [ 'Templates', 'toggle', 'templates' ],\n                              [ 'AoE', 'createAoEOnModel', 'templates' ],\n                              [ 'Spray', 'createSprayOnModel', 'templates' ],\n                            ]);\n      }\n      ret = R.append([ 'Areas', 'toggle', 'areas' ], ret);\n      ret = R.append([ 'CtrlArea', 'toggleCtrlAreaDisplay', 'areas' ], ret);\n      ret = R.concat(ret, R.map((area) => {\n        const size = area + 1;\n        return [ `${size}\"`, `toggle${size}InchesAreaDisplay`, 'areas' ];\n      }, areas));\n      ret = R.concat(ret, R.map((area) => {\n        const size = area + 11;\n        return [ `${size}\"`, `toggle${size}InchesAreaDisplay`, 'areas' ];\n      }, areas));\n      ret = R.append([ 'Auras', 'toggle', 'auras' ], ret);\n      ret = R.concat(ret, R.map(([aura]) => {\n        return [ aura, `toggle${aura}AuraDisplay`, 'auras' ];\n      }, auras));\n      ret = R.append([ 'Effects', 'toggle', 'effects' ], ret);\n      ret = R.concat(ret, R.map(([effect]) => {\n        return [ effect, `toggle${effect}EffectDisplay`, 'effects' ];\n      }, effects));\n      ret = R.append([ 'Incorp.', 'toggleIncorporealDisplay', 'effects' ], ret);\n      ret = R.append([ 'Charge', 'toggle', 'charge' ], ret);\n      if(start_charge) {\n        ret = R.append([ 'Start', 'startCharge', 'charge' ], ret);\n      }\n      if(end_charge) {\n        ret = R.append([ 'End', 'endCharge', 'charge' ], ret);\n      }\n      ret = R.append([ 'Max Len.', 'setChargeMaxLength', 'charge' ], ret);\n      ret = R.append([ 'Place', 'toggle', 'place' ], ret);\n      if(start_place) {\n        ret = R.append([ 'Start', 'startPlace', 'place' ], ret);\n      }\n      if(end_place) {\n        ret = R.append([ 'End', 'endPlace', 'place' ], ret);\n      }\n      ret = R.append([ 'Max Len.', 'setPlaceMaxLength', 'place' ], ret);\n      ret = R.append([ 'Within', 'togglePlaceWithin', 'place' ], ret);\n      ret = R.concat(ret, [ [ 'Unit', 'toggle', 'unit' ],\n                            [ 'Show/Hide', 'toggleUnitDisplay', 'unit' ],\n                            [ 'Set #', 'setUnit', 'unit' ],\n                            [ 'Leader', 'toggleLeaderDisplay', 'unit' ],\n                          ]);\n      if(single) {\n        ret = R.append([ 'Select All', 'selectAllUnit', 'unit' ], ret);\n        ret = R.append([ 'Select Friends', 'selectAllFriendly' ], ret);\n      }\n\n      return ret;\n    }\n  }\n})();\n"]}
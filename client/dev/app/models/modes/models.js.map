{"version":3,"sources":["models.es6"],"names":[],"mappings":"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","file":"models.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelsMode', modelsModeModelFactory);\n\n  modelsModeModelFactory.$inject = [\n    'modes',\n    'settings',\n    'defaultMode',\n    'model',\n    'gameModels',\n    'gameModelSelection',\n    'prompt',\n  ];\n  function modelsModeModelFactory(modesModel,\n                                  settingsModel,\n                                  defaultModeModel,\n                                  modelModel,\n                                  gameModelsModel,\n                                  gameModelSelectionModel,\n                                  promptService) {\n    const models_actions = Object.create(defaultModeModel.actions);\n    models_actions.clickMap = modelsClearSelection;\n    models_actions.rightClickMap = modelsClearSelection;\n    models_actions.modeBackToDefault = modelsClearSelection;\n    models_actions.deleteSelection = modelsDeleteSelection;\n    models_actions.toggleLock = modelsToggleLock;\n    models_actions.toggleImageDisplay = modelsToggleImageDisplay;\n    models_actions.setNextImage = modelsSetNextImage;\n    models_actions.toggleWreckDisplay = modelsToggleWreckDisplay;\n    models_actions.toggleUnitDisplay = modelsToggleUnitDisplay;\n    models_actions.setUnit = modelsSetUnit;\n    models_actions.toggleMeleeDisplay = modelsToggleMeleeDisplay;\n    models_actions.toggleReachDisplay = modelsToggleReachDisplay;\n    models_actions.toggleStrikeDisplay = modelsToggleStrikeDisplay;\n    models_actions.toggleCounterDisplay = modelsToggleCounterDisplay;\n    models_actions.incrementCounter = modelsIncrementCounter;\n    models_actions.decrementCounter = modelsDecrementCounter;\n    models_actions.toggleSoulsDisplay = modelsToggleSoulsDisplay;\n    models_actions.incrementSouls = modelsIncrementSouls;\n    models_actions.decrementSouls = modelsDecrementSouls;\n    models_actions.setRulerMaxLength = modelsSetRulerMaxLength;\n    models_actions.setChargeMaxLength = modelsSetChargeMaxLength;\n    models_actions.setPlaceMaxLength = modelsSetPlaceMaxLength;\n    models_actions.togglePlaceWithin = modelsTogglePlaceWithin;\n    models_actions.toggleLeaderDisplay = modelsToggleLeaderDisplay;\n    models_actions.toggleIncorporealDisplay = modelsToggleIncorporealDisplay;\n    models_actions.setOrientationUp = modelsSetOrientationUp;\n    models_actions.setOrientationDown = modelsSetOrientationDown;\n    models_actions.setTargetModel = modelsSetTargetModel;\n    models_actions.copySelection = modelsCopySelection;\n    models_actions.clearLabel = modelsClearLabel;\n    const effects = [\n      [ 'Blind'      , 'b' ],\n      [ 'Corrosion'  , 'c' ],\n      [ 'Disrupt'    , 'd' ],\n      [ 'Fire'       , 'f' ],\n      [ 'Fleeing'    , 'e' ],\n      [ 'KD'         , 'k' ],\n      [ 'Stationary' , 't' ],\n    ];\n    R.forEach(modelsToggleEffect, effects);\n    const auras = [\n      [ 'Red'    , '#F00' ],\n      [ 'Green'  , '#0F0' ],\n      [ 'Blue'   , '#00F' ],\n      [ 'Yellow' , '#FF0' ],\n      [ 'Purple' , '#F0F' ],\n      [ 'Cyan'   , '#0FF' ],\n    ];\n    R.forEach(modelsToggleAura, auras);\n    models_actions.toggleCtrlAreaDisplay = modelsToggleCtrlAreaDisplay;\n    const areas = R.range(0, 10);\n    R.forEach(modelsToggleAreaDisplay, areas);\n    const moves = [\n      ['moveFront'   , 'up'    ],\n      ['moveBack'    , 'down'  ],\n      ['rotateLeft'  , 'left'  ],\n      ['rotateRight' , 'right' ],\n    ];\n    R.forEach(modelsMove, moves);\n    const shifts = [\n      ['shiftUp'    , 'ctrl+up'    , 'shiftDown'  ],\n      ['shiftDown'  , 'ctrl+down'  , 'shiftUp'    ],\n      ['shiftLeft'  , 'ctrl+left'  , 'shiftRight' ],\n      ['shiftRight' , 'ctrl+right' , 'shiftLeft'  ],\n    ];\n    R.forEach(modelsShift, shifts);\n    modelsDrag();\n\n    const models_default_bindings = {\n      'clickMap': 'clickMap',\n      'rightClickMap': 'rightClickMap',\n      'deleteSelection': 'del',\n      'copySelection': 'ctrl+c',\n      'toggleLock': 'l',\n      'toggleImageDisplay': 'alt+i',\n      'setNextImage': 'shift+i',\n      'toggleWreckDisplay': 'alt+w',\n      'setOrientationUp': 'pageup',\n      'setOrientationDown': 'pagedown',\n      'setTargetModel': 'shift+clickModel',\n      'toggleCounterDisplay': 'alt+n',\n      'incrementCounter': '+',\n      'decrementCounter': '-',\n      'toggleSoulsDisplay': 'alt+o',\n      'incrementSouls': 'ctrl++',\n      'decrementSouls': 'ctrl+-',\n      'toggleCtrlAreaDisplay': 'alt+a',\n      'setRulerMaxLength': 'shift+r',\n      'setChargeMaxLength': 'shift+c',\n      'setPlaceMaxLength': 'shift+p',\n      'togglePlaceWithin': 'alt+p',\n      'toggleMeleeDisplay': 'alt+m',\n      'toggleReachDisplay': 'alt+r',\n      'toggleStrikeDisplay': 'alt+s',\n      'toggleUnitDisplay': 'alt+u',\n      'setUnit': 'shift+u',\n      'toggleLeaderDisplay': 'alt+l',\n      'toggleIncorporealDisplay': 'alt+g',\n      'clearLabel': 'ctrl+shift+l'\n    };\n    R.forEach(modelsBindMove, moves);\n    R.forEach(modelsBindShift, shifts);\n    R.forEach(modelsBindArea, areas);\n    R.addIndex(R.forEach)(modelsBindAura, auras);\n    R.forEach(modelsBindEffect, effects);\n    const models_bindings = R.extend(Object.create(defaultModeModel.bindings),\n                                     models_default_bindings);\n\n    const models_buttons = buildModelsModesButtons();\n    const models_mode = {\n      onEnter: () => { },\n      onLeave: () => { },\n      name: 'Models',\n      actions: models_actions,\n      buttons: models_buttons,\n      buildButtons: buildModelsModesButtons,\n      bindings: models_bindings,\n      areas: areas,\n      auras: auras,\n      effects: effects\n    };\n    modesModel.registerMode(models_mode);\n    settingsModel.register('Bindings',\n                           models_mode.name,\n                           models_default_bindings,\n                           (bs) => {\n                             R.extend(models_mode.bindings, bs);\n                           });\n\n    return models_mode;\n\n    function modelsClearSelection(state) {\n      state.queueChangeEventP('Game.selectionDetail.close');\n      state.queueChangeEventP('Game.editDamage.close');\n      state.queueChangeEventP('Game.editLabel.close');\n      return state.eventP('Game.command.execute',\n                          'setModelSelection',\n                          [ 'clear', null ]);\n    }\n    function modelsDeleteSelection(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return state.eventP('Game.command.execute',\n                          'deleteModel', [stamps]);\n    }\n    function modelsToggleLock(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isLocked,\n        (present) => state.eventP('Game.command.execute',\n                                  'lockModels', [ !present, stamps])\n      );\n    }\n    function modelsToggleImageDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isImageDisplayed,\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setImageDisplay', [!present], stamps])\n      );\n    }\n    function modelsSetNextImage(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return state.eventP('Game.command.execute',\n                          'onModels',\n                          [ 'setNextImageP', [state.factions], stamps]);\n    }\n    function modelsToggleWreckDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isWreckDisplayed,\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setWreckDisplay', [!present], stamps])\n      );\n    }\n    function modelsToggleUnitDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isUnitDisplayed,\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setUnitDisplay', [!present], stamps])\n      );\n    }\n    function modelsSetUnit(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        (model) => R.defaultTo(0, modelModel.unit(model)),\n        (value) => promptService\n          .promptP('prompt', 'Set unit number :', value)\n          .catch(R.always(null)),\n        (value) => state.eventP('Game.command.execute',\n                               'onModels',\n                               [ 'setUnit', [value], stamps])\n      );\n    }\n    function modelsToggleMeleeDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isMeleeDisplayed$('mm'),\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setMeleeDisplay', ['mm', !present], stamps])\n      );\n    }\n    function modelsToggleReachDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isMeleeDisplayed$('mr'),\n        (present) => state.eventP('Game.command.execute',\n                                 'onModels',\n                                 [ 'setMeleeDisplay', ['mr', !present], stamps])\n      );\n    }\n    function modelsToggleStrikeDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isMeleeDisplayed$('ms'),\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setMeleeDisplay', ['ms', !present], stamps])\n      );\n    }\n    function modelsToggleCounterDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isCounterDisplayed$('c'),\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setCounterDisplay', ['c', !present], stamps])\n      );\n    }\n    function modelsIncrementCounter(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return state.eventP('Game.command.execute',\n                          'onModels',\n                          [ 'incrementCounter', ['c'], stamps]);\n    }\n    function modelsDecrementCounter(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return state.eventP('Game.command.execute',\n                          'onModels',\n                          [ 'decrementCounter', ['c'], stamps]);\n    }\n    function modelsToggleSoulsDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isCounterDisplayed$('s'),\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setCounterDisplay', ['s', !present], stamps])\n      );\n    }\n    function modelsIncrementSouls(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return state.eventP('Game.command.execute',\n                          'onModels',\n                          [ 'incrementCounter', ['s'], stamps]);\n    }\n    function modelsDecrementSouls(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return state.eventP('Game.command.execute',\n                          'onModels',\n                          [ 'decrementCounter', ['s'], stamps]);\n    }\n    function modelsSetRulerMaxLength(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.rulerMaxLength,\n        R.defaultTo(0),\n        (value) => promptService\n          .promptP('prompt', 'Set ruler max length :', value)\n          .catch(R.always(null)),\n        (value) => (value === 0) ? null : value,\n        (value) => state.eventP('Game.command.execute',\n                                'onModels',\n                                [ 'setRulerMaxLength', [value], stamps])\n      );\n    }\n    function modelsSetChargeMaxLength(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.chargeMaxLength,\n        (value) => promptService\n          .promptP('prompt', 'Set charge max length :', value)\n          .catch(R.always(null)),\n        (value) => (value === 0) ? null : value,\n        (value) => state.eventP('Game.command.execute',\n                                'onModels', [\n                                  'setChargeMaxLengthP',\n                                  [state.factions, value],\n                                  stamps\n                                ])\n      );\n    }\n    function modelsSetPlaceMaxLength(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.placeMaxLength,\n        R.defaultTo(0),\n        (value) => promptService\n          .promptP('prompt','Set place max length :', value)\n          .catch(R.always(null)),\n        (value) => (value === 0) ? null : value,\n        (value) => state.eventP('Game.command.execute',\n                                'onModels', [\n                                  'setPlaceMaxLengthP',\n                                  [state.factions, value],\n                                  stamps\n                                ])\n      );\n    }\n    function modelsTogglePlaceWithin(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.placeWithin,\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels', [\n                                    'setPlaceWithinP',\n                                    [state.factions, !present],\n                                    stamps\n                                  ])\n      );\n    }\n    function modelsToggleLeaderDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isLeaderDisplayed,\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setLeaderDisplay', [!present], stamps ])\n      );\n    }\n    function modelsToggleIncorporealDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isIncorporealDisplayed,\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels',\n                                  [ 'setIncorporealDisplay', [!present], stamps ])\n      );\n    }\n    function modelsToggleEffect([effect, flag]) {\n      models_actions['toggle'+effect+'EffectDisplay'] = modelsToggleEffect_;\n\n      function modelsToggleEffect_(state) {\n        const stamps = gameModelSelectionModel\n                .get('local', state.game.model_selection);\n        return R.threadP(state.game)(\n          R.prop('models'),\n          gameModelsModel.findStampP$(stamps[0]),\n          modelModel.isEffectDisplayed$(flag),\n          (present) => state.eventP('Game.command.execute',\n                                    'onModels', [\n                                      'setEffectDisplay',\n                                      [flag, !present],\n                                      stamps\n                                    ])\n        );\n      }\n    }\n    function modelsToggleAura([aura, hex]) {\n      models_actions['toggle'+aura+'AuraDisplay'] = modelsToggleAura_;\n\n      function modelsToggleAura_(state) {\n        const stamps = gameModelSelectionModel\n                .get('local', state.game.model_selection);\n        return R.threadP(state.game)(\n          R.prop('models'),\n          gameModelsModel.findStampP$(stamps[0]),\n          modelModel.auraDisplay,\n          (present) => state.eventP('Game.command.execute',\n                                    'onModels', [\n                                      'setAuraDisplay',\n                                      [(present === hex) ? null : hex],\n                                      stamps\n                                    ])\n        );\n      }\n    }\n    function modelsToggleCtrlAreaDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStampP$(stamps[0]),\n        modelModel.isCtrlAreaDisplayedP$(state.factions),\n        (present) => state.eventP('Game.command.execute',\n                                  'onModels', [\n                                    'setCtrlAreaDisplay',\n                                    [!present],\n                                    stamps\n                                  ])\n      );\n    }\n    function modelsToggleAreaDisplay(area) {\n      const size = area === 0 ? 10 : area;\n      models_actions['toggle'+size+'InchesAreaDisplay'] =\n        modelsToggleAreaDisplay_(size);\n      const big_size = size + 10;\n      models_actions['toggle'+big_size+'InchesAreaDisplay'] =\n        modelsToggleAreaDisplay_(big_size);\n\n      function modelsToggleAreaDisplay_(size) {\n        return function modelsToggleSizeAreaDisplay(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', state.game.model_selection);\n          return R.threadP(state.game)(\n            R.prop('models'),\n            gameModelsModel.findStampP$(stamps[0]),\n            (model) => modelModel.areaDisplay(model),\n            (present) => state.eventP('Game.command.execute',\n                                      'onModels', [\n                                        'setAreaDisplay',\n                                        [(present === size) ? null : size],\n                                        stamps\n                                      ])\n          );\n        };\n      }\n    }\n    function modelsMove([move, _key_]) {\n      models_actions[move] = modelsMove_(false);\n      models_actions[move+'Small'] = modelsMove_(true);\n\n      function modelsMove_(small) {\n        return function modelsSmallMove(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', state.game.model_selection);\n          return state.eventP('Game.command.execute',\n                              'onModels',\n                              [ move+'P', [state.factions, small], stamps ]);\n        };\n      }\n    }\n    function modelsShift([shift, _key_, flip_shift]) {\n      models_actions[shift] = modelsShift_(false);\n      models_actions[shift+'Small'] = modelsShift_(true);\n\n      function modelsShift_(small) {\n        return function modelsShiftSmall(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', state.game.model_selection);\n          const model_shift = ( R.path(['ui_state', 'flip_map'], state)\n                                ? flip_shift\n                                : shift\n                              );\n          return state.eventP('Game.command.execute',\n                              'onModels', [\n                                model_shift+'P',\n                                [state.factions, small],\n                                stamps\n                              ]);\n        };\n      }\n    }\n    function modelsSetOrientationUp(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      const orientation = state.ui_state.flip_map ? 180 : 0;\n      return state.eventP('Game.command.execute',\n                          'onModels', [\n                            'setOrientationP',\n                            [state.factions, orientation],\n                            stamps\n                          ]);\n    }\n    function modelsSetOrientationDown(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      const orientation = state.ui_state.flip_map ? 0 : 180;\n      return state.eventP('Game.command.execute',\n                          'onModels', [\n                            'setOrientationP',\n                            [state.factions, orientation],\n                            stamps\n                          ]);\n    }\n    function modelsSetTargetModel(state, event) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return state.eventP('Game.command.execute',\n                          'onModels', [\n                            'orientToP',\n                            [state.factions, event['click#'].target],\n                            stamps\n                          ]);\n    }\n    function modelsCopySelection(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.copyStampsP$(stamps),\n        (copy) => state.eventP('Game.model.copy', copy)\n      );\n    }\n    function modelsClearLabel(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return state.eventP('Game.command.execute',\n                          'onModels',\n                          [ 'clearLabel', [], stamps]);\n    }\n\n    function modelsDrag() {\n      let drag_charge_target;\n      let drag_models_start_states;\n      let drag_models_start_selection;\n      models_actions.dragStartModel = modelsDragStart;\n      defaultModeModel.actions.dragStartModel = modelsDragStart;\n      models_actions.dragModel = modelsDragContinue;\n      models_actions.dragEndModel = modelsDragEnd;\n\n      function modelsDragStart(state, event) {\n        const stamp = event.target.state.stamp;\n        return R.threadP(state.game)(\n          R.prop('model_selection'),\n          gameModelSelectionModel.in$('local', stamp),\n          setSelectionIfNotAlreadySelectedP,\n          () => gameModelSelectionModel\n            .get('local', state.game.model_selection),\n          (stamps) => gameModelsModel\n            .findAnyStampsP(stamps, state.game.models),\n          R.reject(R.isNil),\n          initDragChargeTarget,\n          initDragStartSelection,\n          R.map(modelModel.saveState),\n          R.spyWarn(drag_models_start_selection, drag_models_start_states),\n          initDragStartStates,\n          () => modelsDragContinue(state, event)\n        );\n\n        function setSelectionIfNotAlreadySelectedP(in_selection) {\n          if(in_selection) return null;\n          return state.eventP('Game.command.execute',\n                              'setModelSelection',\n                              ['set', [stamp]]);\n        }\n        function initDragChargeTarget(models) {\n          drag_charge_target = null;\n          if(R.length(models) !== 1) return models;\n\n          return R.threadP(models)(\n            R.head,\n            modelModel.chargeTargetP,\n            (target_stamp) => gameModelsModel\n              .findStampP(target_stamp, state.game.models),\n            (target_model) => {\n              drag_charge_target = target_model;\n            },\n            R.always(models)\n          ).catch(R.always(models));\n        }\n        function initDragStartSelection(models) {\n          drag_models_start_selection = models;\n          return models;\n        }\n        function initDragStartStates(states) {\n          drag_models_start_states = states;\n        }\n      }\n      function modelsDragContinue(state, event) {\n        return R.threadP(drag_models_start_selection)(\n          R.addIndex(R.map)(updateDragedModelPosition),\n          R.promiseAll,\n          R.forEach(emitModelChangeEvent)\n        );\n\n        function updateDragedModelPosition(model, index) {\n          const pos = {\n            x: drag_models_start_states[index].x + event.now.x - event.start.x,\n            y: drag_models_start_states[index].y + event.now.y - event.start.y\n          };\n          return modelModel\n            .setPosition_(state.factions, drag_charge_target, pos, model);\n        }\n        function emitModelChangeEvent(model) {\n          state.queueChangeEventP(`Game.model.change.${model.state.stamp}`);\n        }\n      }\n      function modelsDragEnd(state, event) {\n        return R.threadP(drag_models_start_selection)(\n          R.addIndex(R.map)(resetDragedModelPosition),\n          R.promiseAll,\n          R.map(R.path(['state','stamp'])),\n          setFinalPositions\n        );\n\n        function resetDragedModelPosition(model, index) {\n          return modelModel\n            .setPosition_(state.factions, drag_charge_target,\n                          drag_models_start_states[index], model);\n        }\n        function setFinalPositions(stamps) {\n          const shift = {\n            x: event.now.x - event.start.x,\n            y: event.now.y - event.start.y\n          };\n          return state.eventP('Game.command.execute',\n                              'onModels', [\n                                'shiftPositionP',\n                                [state.factions, drag_charge_target, shift],\n                                stamps\n                              ]);\n        }\n      }\n    }\n\n    function modelsBindMove([move, keys]) {\n      models_default_bindings[move] = keys;\n      models_default_bindings[move+'Small'] = 'shift+'+keys;\n    }\n    function modelsBindShift([shift, keys]) {\n      models_default_bindings[shift] = keys;\n      models_default_bindings[shift+'Small'] = 'shift+'+keys;\n    }\n    function modelsBindArea(area) {\n      let size = area === 0 ? 10 : area;\n      models_default_bindings['toggle'+size+'InchesAreaDisplay'] = 'alt+'+area;\n      size += 10;\n      models_default_bindings['toggle'+size+'InchesAreaDisplay'] = 'alt+shift+'+area;\n    }\n    function modelsBindAura([aura], index) {\n      models_default_bindings['toggle'+aura+'AuraDisplay'] = 'ctrl+'+(index+1);\n    }\n    function modelsBindEffect([effect, keys]) {\n      models_default_bindings['toggle'+effect+'EffectDisplay'] = 'alt+'+keys;\n    }\n\n    function buildModelsModesButtons({ single,\n                                       start_charge, end_charge,\n                                       start_place, end_place\n                                     } = {}) {\n      let ret = [\n        [ 'Delete', 'deleteSelection' ],\n        [ 'Copy', 'copySelection' ],\n        [ 'Lock', 'toggleLock' ],\n        [ 'Ruler Max Len.', 'setRulerMaxLength' ],\n        [ 'Clear Label', 'clearLabel' ],\n        [ 'Image', 'toggle', 'image' ],\n        [ 'Show/Hide', 'toggleImageDisplay', 'image' ],\n        [ 'Next', 'setNextImage', 'image' ],\n        [ 'Wreck', 'toggleWreckDisplay', 'image' ],\n        [ 'Orient.', 'toggle', 'orientation' ],\n        [ 'Face Up', 'setOrientationUp', 'orientation' ],\n        [ 'Face Down', 'setOrientationDown', 'orientation' ],\n        [ 'Counter', 'toggle', 'counter' ],\n        [ 'Show/Hide', 'toggleCounterDisplay', 'counter' ],\n        [ 'Inc.', 'incrementCounter', 'counter' ],\n        [ 'Dec.', 'decrementCounter', 'counter' ],\n        [ 'Souls', 'toggle', 'souls' ],\n        [ 'Show/Hide', 'toggleSoulsDisplay', 'souls' ],\n        [ 'Inc.', 'incrementSouls', 'souls' ],\n        [ 'Dec.', 'decrementSouls', 'souls' ],\n        [ 'Melee', 'toggle', 'melee' ],\n        [ '0.5\"', 'toggleMeleeDisplay', 'melee' ],\n        [ 'Reach', 'toggleReachDisplay', 'melee' ],\n        [ 'Strike', 'toggleStrikeDisplay', 'melee' ],\n      ];\n      if(single) {\n        ret = R.concat(ret, [ [ 'Templates', 'toggle', 'templates' ],\n                              [ 'AoE', 'createAoEOnModel', 'templates' ],\n                              [ 'Spray', 'createSprayOnModel', 'templates' ],\n                            ]);\n      }\n      ret = R.append([ 'Areas', 'toggle', 'areas' ], ret);\n      ret = R.append([ 'CtrlArea', 'toggleCtrlAreaDisplay', 'areas' ], ret);\n      ret = R.concat(ret, R.map((area) => {\n        const size = area + 1;\n        return [ size+'\"', 'toggle'+size+'InchesAreaDisplay', 'areas' ];\n      }, areas));\n      ret = R.concat(ret, R.map((area) => {\n        const size = area + 11;\n        return [ size+'\"', 'toggle'+size+'InchesAreaDisplay', 'areas' ];\n      }, areas));\n      ret = R.append([ 'Auras', 'toggle', 'auras' ], ret);\n      ret = R.concat(ret, R.map(([aura]) => {\n        return [ aura, 'toggle'+aura+'AuraDisplay', 'auras' ];\n      }, auras));\n      ret = R.append([ 'Effects', 'toggle', 'effects' ], ret);\n      ret = R.concat(ret, R.map(([effect]) => {\n        return [ effect, 'toggle'+effect+'EffectDisplay', 'effects' ];\n      }, effects));\n      ret = R.append([ 'Incorp.', 'toggleIncorporealDisplay', 'effects' ], ret);\n      ret = R.append([ 'Charge', 'toggle', 'charge' ], ret);\n      if(start_charge) {\n        ret = R.append([ 'Start', 'startCharge', 'charge' ], ret);\n      }\n      if(end_charge) {\n        ret = R.append([ 'End', 'endCharge', 'charge' ], ret);\n      }\n      ret = R.append([ 'Max Len.', 'setChargeMaxLength', 'charge' ], ret);\n      ret = R.append([ 'Place', 'toggle', 'place' ], ret);\n      if(start_place) {\n        ret = R.append([ 'Start', 'startPlace', 'place' ], ret);\n      }\n      if(end_place) {\n        ret = R.append([ 'End', 'endPlace', 'place' ], ret);\n      }\n      ret = R.append([ 'Max Len.', 'setPlaceMaxLength', 'place' ], ret);\n      ret = R.append([ 'Within', 'togglePlaceWithin', 'place' ], ret);\n      ret = R.concat(ret, [ [ 'Unit', 'toggle', 'unit' ],\n                            [ 'Show/Hide', 'toggleUnitDisplay', 'unit' ],\n                            [ 'Set #', 'setUnit', 'unit' ],\n                            [ 'Leader', 'toggleLeaderDisplay', 'unit' ],\n                          ]);\n      if(single) {\n        ret = R.append([ 'Select All', 'selectAllUnit', 'unit' ], ret);\n        ret = R.append([ 'Select Friends', 'selectAllFriendly' ], ret);\n      }\n\n      return ret;\n    }\n  }\n})();\n"]}
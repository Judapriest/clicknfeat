{"version":3,"sources":["models.es6"],"names":[],"mappings":"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","file":"models.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelsMode', modelsModeModelFactory);\n\n  modelsModeModelFactory.$inject = [\n    'appState',\n    'modes',\n    'settings',\n    'defaultMode',\n    'model',\n    'gameModels',\n    'gameModelSelection',\n    'prompt',\n  ];\n  function modelsModeModelFactory(appStateService,\n                                  modesModel,\n                                  settingsModel,\n                                  defaultModeModel,\n                                  modelModel,\n                                  gameModelsModel,\n                                  gameModelSelectionModel,\n                                  promptService) {\n    const models_actions = Object.create(defaultModeModel.actions);\n    models_actions.clickMap = modelsClearSelection;\n    models_actions.rightClickMap = modelsClearSelection;\n    models_actions.modeBackToDefault = modelsClearSelection;\n    models_actions.deleteSelection = modelsDeleteSelection;\n    models_actions.copySelection = modelsCopySelection;\n    models_actions.toggleLock = modelsToggleLock;\n    models_actions.toggleImageDisplay = modelsToggleImageDisplay;\n    models_actions.setNextImage = modelsSetNextImage;\n    models_actions.toggleWreckDisplay = modelsToggleWreckDisplay;\n    models_actions.toggleUnitDisplay = modelsToggleUnitDisplay;\n    models_actions.setUnit = modelsSetUnit;\n    models_actions.toggleMeleeDisplay = modelsToggleMeleeDisplay;\n    models_actions.toggleReachDisplay = modelsToggleReachDisplay;\n    models_actions.toggleStrikeDisplay = modelsToggleStrikeDisplay;\n    models_actions.toggleCounterDisplay = modelsToggleCounterDisplay;\n    models_actions.incrementCounter = modelsIncrementCounter;\n    models_actions.decrementCounter = modelsDecrementCounter;\n    models_actions.toggleSoulsDisplay = modelsToggleSoulsDisplay;\n    models_actions.incrementSouls = modelsIncrementSouls;\n    models_actions.decrementSouls = modelsDecrementSouls;\n    // models_actions.setRulerMaxLength = modelsSetRulerMaxLength;\n    models_actions.setChargeMaxLength = modelsSetChargeMaxLength;\n    // models_actions.setPlaceMaxLength = modelsSetPlaceMaxLength;\n    // models_actions.togglePlaceWithin = modelsTogglePlaceWithin;\n    models_actions.toggleLeaderDisplay = modelsToggleLeaderDisplay;\n    models_actions.toggleIncorporealDisplay = modelsToggleIncorporealDisplay;\n    models_actions.setOrientationUp = modelsSetOrientationUp;\n    models_actions.setOrientationDown = modelsSetOrientationDown;\n    models_actions.setTargetModel = modelsSetTargetModel;\n    models_actions.clearLabel = modelsClearLabel;\n    const effects = [\n      [ 'Blind'      , 'b' ],\n      [ 'Corrosion'  , 'c' ],\n      [ 'Disrupt'    , 'd' ],\n      [ 'Fire'       , 'f' ],\n      [ 'Fleeing'    , 'e' ],\n      [ 'KD'         , 'k' ],\n      [ 'Stationary' , 't' ],\n    ];\n    R.forEach(modelsToggleEffect, effects);\n    const auras = [\n      [ 'Red'    , '#F00' ],\n      [ 'Green'  , '#0F0' ],\n      [ 'Blue'   , '#00F' ],\n      [ 'Yellow' , '#FF0' ],\n      [ 'Purple' , '#F0F' ],\n      [ 'Cyan'   , '#0FF' ],\n    ];\n    R.forEach(modelsToggleAura, auras);\n    models_actions.toggleCtrlAreaDisplay = modelsToggleCtrlAreaDisplay;\n    const areas = R.range(0, 10);\n    R.forEach(modelsToggleAreaDisplay, areas);\n    const moves = [\n      ['moveFront'   , 'up'    ],\n      ['moveBack'    , 'down'  ],\n      ['rotateLeft'  , 'left'  ],\n      ['rotateRight' , 'right' ],\n    ];\n    R.forEach(modelsMove, moves);\n    const shifts = [\n      ['shiftUp'    , 'ctrl+up'    , 'shiftDown'  ],\n      ['shiftDown'  , 'ctrl+down'  , 'shiftUp'    ],\n      ['shiftLeft'  , 'ctrl+left'  , 'shiftRight' ],\n      ['shiftRight' , 'ctrl+right' , 'shiftLeft'  ],\n    ];\n    R.forEach(modelsShift, shifts);\n    modelsDrag();\n\n    const models_default_bindings = {\n      'clickMap': 'clickMap',\n      'rightClickMap': 'rightClickMap',\n      'deleteSelection': 'del',\n      'copySelection': 'ctrl+c',\n      'toggleLock': 'l',\n      'toggleImageDisplay': 'alt+i',\n      'setNextImage': 'shift+i',\n      'toggleWreckDisplay': 'alt+w',\n      'setOrientationUp': 'pageup',\n      'setOrientationDown': 'pagedown',\n      'setTargetModel': 'shift+clickModel',\n      'toggleCounterDisplay': 'alt+n',\n      'incrementCounter': '+',\n      'decrementCounter': '-',\n      'toggleSoulsDisplay': 'alt+o',\n      'incrementSouls': 'ctrl++',\n      'decrementSouls': 'ctrl+-',\n      'toggleCtrlAreaDisplay': 'alt+a',\n      'setRulerMaxLength': 'shift+r',\n      'setChargeMaxLength': 'shift+c',\n      'setPlaceMaxLength': 'shift+p',\n      'togglePlaceWithin': 'alt+p',\n      'toggleMeleeDisplay': 'alt+m',\n      'toggleReachDisplay': 'alt+r',\n      'toggleStrikeDisplay': 'alt+s',\n      'toggleUnitDisplay': 'alt+u',\n      'setUnit': 'shift+u',\n      'toggleLeaderDisplay': 'alt+l',\n      'toggleIncorporealDisplay': 'alt+g',\n      'clearLabel': 'ctrl+shift+l'\n    };\n    R.forEach(modelsBindMove, moves);\n    R.forEach(modelsBindShift, shifts);\n    R.forEach(modelsBindArea, areas);\n    R.addIndex(R.forEach)(modelsBindAura, auras);\n    R.forEach(modelsBindEffect, effects);\n    const models_bindings = R.extend(Object.create(defaultModeModel.bindings),\n                                     models_default_bindings);\n\n    const models_buttons = buildModelsModesButtons();\n    const models_mode = {\n      onEnter: () => { },\n      onLeave: () => { },\n      name: 'Models',\n      actions: models_actions,\n      buttons: models_buttons,\n      buildButtons: buildModelsModesButtons,\n      bindings: models_bindings,\n      areas: areas,\n      auras: auras,\n      effects: effects\n    };\n    modesModel.registerMode(models_mode);\n    settingsModel.register('Bindings',\n                           models_mode.name,\n                           models_default_bindings,\n                           (bs) => {\n                             R.extend(models_mode.bindings, bs);\n                           });\n\n    return models_mode;\n\n    function modelsClearSelection() {\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'setModelSelection',\n                     [ 'clear', null ]);\n    }\n    function modelsDeleteSelection(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'deleteModel', [stamps]);\n    }\n    function modelsCopySelection(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.copyStamps$(stamps),\n        (copy) => {\n          appStateService\n            .chainReduce('Game.model.copy', copy);\n        }\n      );\n    }\n    function modelsToggleLock(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isLocked,\n            (present) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'lockModels', [ !present, stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsToggleImageDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isImageDisplayed,\n        (present) => {\n          appStateService\n            .chainReduce('Game.command.execute',\n                         'onModels',\n                         [ 'setImageDisplay', [!present], stamps]);\n        }\n      );\n    }\n    function modelsSetNextImage(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels',\n                     [ 'setNextImage', [state.factions], stamps]);\n    }\n    function modelsToggleWreckDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isWreckDisplayed,\n        (present) => {\n          appStateService\n            .chainReduce('Game.command.execute',\n                         'onModels',\n                         [ 'setWreckDisplay', [!present], stamps]);\n        }\n      );\n    }\n    function modelsToggleUnitDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isUnitDisplayed,\n            (present) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels',\n                             [ 'setUnitDisplay', [!present], stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsSetUnit(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      return R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          (model) => R.threadP(model)(\n            modelModel.unit,\n            R.defaultTo(0),\n            (value) => promptService\n              .promptP('prompt', 'Set unit number :', value)\n              .catch(R.always(null)),\n            (value) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels',\n                             [ 'setUnit', [value], stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsToggleMeleeDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isMeleeDisplayed$('mm'),\n            (present) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels',\n                             [ 'setMeleeDisplay', ['mm', !present], stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsToggleReachDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isMeleeDisplayed$('mr'),\n            (present) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels',\n                             [ 'setMeleeDisplay', ['mr', !present], stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsToggleStrikeDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isMeleeDisplayed$('ms'),\n            (present) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels',\n                             [ 'setMeleeDisplay', ['ms', !present], stamps]);\n            }\n          )\n        )\n      );\n    }\n    function modelsToggleCounterDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isCounterDisplayed$('c'),\n        (present) => {\n          appStateService\n            .chainReduce('Game.command.execute',\n                         'onModels',\n                         [ 'setCounterDisplay', ['c', !present], stamps]);\n        }\n      );\n    }\n    function modelsIncrementCounter(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels',\n                     [ 'incrementCounter', ['c'], stamps]);\n    }\n    function modelsDecrementCounter(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels',\n                     [ 'decrementCounter', ['c'], stamps]);\n    }\n    function modelsToggleSoulsDisplay(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isCounterDisplayed$('s'),\n        (present) => {\n          appStateService\n            .chainReduce('Game.command.execute',\n                         'onModels',\n                         [ 'setCounterDisplay', ['s', !present], stamps]);\n        }\n      );\n    }\n    function modelsIncrementSouls(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels',\n                     [ 'incrementCounter', ['s'], stamps]);\n    }\n    function modelsDecrementSouls(state) {\n      const stamps = gameModelSelectionModel\n            .get('local', state.game.model_selection);\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels',\n                     [ 'decrementCounter', ['s'], stamps]);\n    }\n    // function modelsSetRulerMaxLength(state) {\n    //   const stamps = gameModelSelectionModel\n    //           .get('local', state.game.model_selection);\n    //   return R.threadP(state.game)(\n    //     R.prop('models'),\n    //     gameModelsModel.findStampP$(stamps[0]),\n    //     modelModel.rulerMaxLength,\n    //     R.defaultTo(0),\n    //     (value) => promptService\n    //       .promptP('prompt', 'Set ruler max length :', value)\n    //       .catch(R.always(null)),\n    //     (value) => (value === 0) ? null : value,\n    //     (value) => state.eventP('Game.command.execute',\n    //                             'onModels',\n    //                             [ 'setRulerMaxLength', [value], stamps])\n    //   );\n    // }\n    function modelsSetChargeMaxLength(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      return R.threadP(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          (model) => R.threadP(model)(\n            modelModel.chargeMaxLength,\n            (value) => promptService\n              .promptP('prompt', 'Set charge max length :', value)\n              .catch(R.always(null)),\n            (value) => (value === 0) ? null : value,\n            (value) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels', [\n                               'setChargeMaxLength',\n                               [state.factions, value],\n                               stamps\n                             ]);\n            }\n          )\n        )\n      );\n    }\n    // function modelsSetPlaceMaxLength(state) {\n    //   const stamps = gameModelSelectionModel\n    //           .get('local', state.game.model_selection);\n    //   return R.threadP(state.game)(\n    //     R.prop('models'),\n    //     gameModelsModel.findStampP$(stamps[0]),\n    //     modelModel.placeMaxLength,\n    //     R.defaultTo(0),\n    //     (value) => promptService\n    //       .promptP('prompt','Set place max length :', value)\n    //       .catch(R.always(null)),\n    //     (value) => (value === 0) ? null : value,\n    //     (value) => state.eventP('Game.command.execute',\n    //                             'onModels', [\n    //                               'setPlaceMaxLengthP',\n    //                               [state.factions, value],\n    //                               stamps\n    //                             ])\n    //   );\n    // }\n    // function modelsTogglePlaceWithin(state) {\n    //   const stamps = gameModelSelectionModel\n    //           .get('local', state.game.model_selection);\n    //   return R.threadP(state.game)(\n    //     R.prop('models'),\n    //     gameModelsModel.findStampP$(stamps[0]),\n    //     modelModel.placeWithin,\n    //     (present) => state.eventP('Game.command.execute',\n    //                               'onModels', [\n    //                                 'setPlaceWithinP',\n    //                                 [state.factions, !present],\n    //                                 stamps\n    //                               ])\n    //   );\n    // }\n    function modelsToggleLeaderDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isLeaderDisplayed,\n            (present) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels',\n                             [ 'setLeaderDisplay', [!present], stamps ]);\n            }\n          )\n        )\n      );\n    }\n    function modelsToggleIncorporealDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        modelModel.isIncorporealDisplayed,\n        (present) => {\n          appStateService\n            .chainReduce('Game.command.execute',\n                         'onModels',\n                         [ 'setIncorporealDisplay', [!present], stamps ]);\n        }\n      );\n    }\n    function modelsToggleEffect([effect, flag]) {\n      models_actions[`toggle${effect}EffectDisplay`] = modelsToggleEffect_;\n\n      function modelsToggleEffect_(state) {\n        const stamps = gameModelSelectionModel\n                .get('local', state.game.model_selection);\n        R.thread(state.game)(\n          R.prop('models'),\n          gameModelsModel.findStamp$(stamps[0]),\n          R.unless(\n            R.isNil,\n            R.pipe(\n              modelModel.isEffectDisplayed$(flag),\n              (present) => {\n                appStateService\n                  .chainReduce('Game.command.execute',\n                               'onModels', [\n                                 'setEffectDisplay',\n                                 [flag, !present],\n                                 stamps\n                               ]);\n              }\n            )\n          )\n        );\n      }\n    }\n    function modelsToggleAura([aura, hex]) {\n      models_actions['toggle'+aura+'AuraDisplay'] = modelsToggleAura_;\n\n      function modelsToggleAura_(state) {\n        const stamps = gameModelSelectionModel\n                .get('local', state.game.model_selection);\n        R.thread(state.game)(\n          R.prop('models'),\n          gameModelsModel.findStamp$(stamps[0]),\n          R.unless(\n            R.isNil,\n            R.pipe(\n              modelModel.auraDisplay,\n              (present) => {\n                appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels', [\n                               'setAuraDisplay',\n                               [(present === hex) ? null : hex],\n                               stamps\n                             ]);\n              }\n            )\n          )\n        );\n      }\n    }\n    function modelsToggleCtrlAreaDisplay(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      R.thread(state.game)(\n        R.prop('models'),\n        gameModelsModel.findStamp$(stamps[0]),\n        R.unless(\n          R.isNil,\n          R.pipe(\n            modelModel.isCtrlAreaDisplayed$(state.factions),\n            (present) => {\n              appStateService\n                .chainReduce('Game.command.execute',\n                             'onModels', [\n                               'setCtrlAreaDisplay',\n                               [!present],\n                               stamps\n                             ]);\n            }\n          )\n        )\n      );\n    }\n    function modelsToggleAreaDisplay(area) {\n      const size = area === 0 ? 10 : area;\n      models_actions[`toggle${size}InchesAreaDisplay`] =\n        modelsToggleAreaDisplay_(size);\n      const big_size = size + 10;\n      models_actions[`toggle${big_size}InchesAreaDisplay`] =\n        modelsToggleAreaDisplay_(big_size);\n\n      function modelsToggleAreaDisplay_(size) {\n        return function modelsToggleSizeAreaDisplay(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', state.game.model_selection);\n          return R.thread(state.game)(\n            R.prop('models'),\n            gameModelsModel.findStamp$(stamps[0]),\n            R.unless(\n              R.isNil,\n              R.pipe(\n                modelModel.areaDisplay,\n                (present) => {\n                  appStateService\n                    .chainReduce('Game.command.execute',\n                                 'onModels', [\n                                   'setAreaDisplay',\n                                   [(present === size) ? null : size],\n                                   stamps\n                                 ]);\n                }\n              )\n            )\n          );\n        };\n      }\n    }\n    function modelsMove([move, _key_]) {\n      models_actions[move] = modelsMove_(false);\n      models_actions[`${move}Small`] = modelsMove_(true);\n\n      function modelsMove_(small) {\n        return function modelsSmallMove(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', state.game.model_selection);\n          appStateService\n            .chainReduce('Game.command.execute',\n                         'onModels',\n                         [ move+'P', [state.factions, small], stamps ]);\n        };\n      }\n    }\n    function modelsShift([shift, _key_, flip_shift]) {\n      models_actions[shift] = modelsShift_(false);\n      models_actions[`${shift}Small`] = modelsShift_(true);\n\n      function modelsShift_(small) {\n        return function modelsShiftSmall(state) {\n          const stamps = gameModelSelectionModel\n                  .get('local', state.game.model_selection);\n          const model_shift = ( R.path(['ui_state', 'flip_map'], state)\n                                ? flip_shift\n                                : shift\n                              );\n          appStateService\n            .chainReduce('Game.command.execute',\n                         'onModels', [\n                           model_shift+'P',\n                           [state.factions, small],\n                           stamps\n                         ]);\n        };\n      }\n    }\n    function modelsSetOrientationUp(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      const orientation = state.ui_state.flip_map ? 180 : 0;\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels', [\n                       'setOrientationP',\n                       [state.factions, orientation],\n                       stamps\n                     ]);\n    }\n    function modelsSetOrientationDown(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      const orientation = state.ui_state.flip_map ? 0 : 180;\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels', [\n                       'setOrientationP',\n                       [state.factions, orientation],\n                       stamps\n                     ]);\n    }\n    function modelsSetTargetModel(state, event) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels', [\n                       'orientToP',\n                       [state.factions, event['click#'].target],\n                       stamps\n                     ]);\n    }\n    function modelsClearLabel(state) {\n      const stamps = gameModelSelectionModel\n              .get('local', state.game.model_selection);\n      appStateService\n        .chainReduce('Game.command.execute',\n                     'onModels',\n                     [ 'clearLabel', [], stamps]);\n    }\n\n    function modelsDrag() {\n      let drag_charge_target;\n      let drag_models_start_states;\n      let drag_models_start_selection;\n\n      models_actions.dragStartModel = modelsDragStart;\n      defaultModeModel.actions.dragStartModel = modelsDragStart;\n      models_actions.dragModel = modelsDragContinue;\n      defaultModeModel.actions.dragModel = modelsDragContinue;\n      models_actions.dragEndModel = modelsDragEnd;\n      defaultModeModel.actions.dragEndModel = modelsDragEnd;\n\n      function modelsDragStart(state, event) {\n        const stamp = event.target.state.stamp;\n        return R.thread(state.game)(\n          resolveModelSelection,\n          gameModelsModel.findAnyStamps$(R.__, state.game.models),\n          R.reject(R.isNil),\n          R.tap(initDragChargeTarget),\n          R.tap((models) => { drag_models_start_selection = models; }),\n          R.map(modelModel.saveState),\n          R.tap((states) => { drag_models_start_states = states; }),\n          () => modelsDragContinue(state, event)\n        );\n\n        function resolveModelSelection() {\n          return R.thread(state.game)(\n            R.prop('model_selection'),\n            R.ifElse(\n              gameModelSelectionModel.in$('local', stamp),\n              gameModelSelectionModel.get$('local'),\n              () => {\n                appStateService\n                  .chainReduce('Game.command.execute',\n                               'setModelSelection',\n                               ['set', [stamp]]);\n                return [stamp];\n              }\n            )\n          );\n        }\n        function initDragChargeTarget(models) {\n          drag_charge_target = null;\n          if(R.length(models) !== 1) return;\n\n          R.thread(models)(\n            R.head,\n            modelModel.chargeTarget,\n            R.unless(\n              R.isNil,\n              R.pipe(\n                gameModelsModel.findStamp$(R.__, state.game.models),\n                (target_model) => {\n                  drag_charge_target = target_model;\n                }\n              )\n            )\n          );\n        }\n      }\n      function modelsDragContinue(state, event) {\n        return R.threadP(drag_models_start_selection)(\n          R.addIndex(R.map)(updateDragedModelPositionP),\n          R.allP,\n          R.reject(R.isNil),\n          R.forEach(emitModelChangeEvent)\n        );\n\n        function updateDragedModelPositionP(model, index) {\n          const pos = {\n            x: drag_models_start_states[index].x + event.now.x - event.start.x,\n            y: drag_models_start_states[index].y + event.now.y - event.start.y\n          };\n          return modelModel\n            .setPositionP_(state.factions, drag_charge_target, pos, model)\n            .catch(() => null);\n        }\n        function emitModelChangeEvent(model) {\n          appStateService.emit(`Game.model.change.${model.state.stamp}`);\n        }\n      }\n      function modelsDragEnd(state, event) {\n        return R.threadP(drag_models_start_selection)(\n          R.addIndex(R.map)(resetDragedModelPositionP),\n          R.allP,\n          R.reject(R.isNil),\n          R.map(R.path(['state','stamp'])),\n          setFinalPositions\n        );\n\n        function resetDragedModelPositionP(model, index) {\n          return modelModel\n            .setPositionP_(state.factions, drag_charge_target,\n                           drag_models_start_states[index], model)\n            .catch(() => null);\n        }\n        function setFinalPositions(stamps) {\n          const shift = {\n            x: event.now.x - event.start.x,\n            y: event.now.y - event.start.y\n          };\n          appStateService\n            .chainReduce('Game.command.execute',\n                         'onModels', [\n                           'shiftPositionP',\n                           [state.factions, drag_charge_target, shift],\n                           stamps\n                         ]);\n        }\n      }\n    }\n\n    function modelsBindMove([move, keys]) {\n      models_default_bindings[move] = keys;\n      models_default_bindings[move+'Small'] = 'shift+'+keys;\n    }\n    function modelsBindShift([shift, keys]) {\n      models_default_bindings[shift] = keys;\n      models_default_bindings[shift+'Small'] = 'shift+'+keys;\n    }\n    function modelsBindArea(area) {\n      let size = area === 0 ? 10 : area;\n      models_default_bindings[`toggle${size}InchesAreaDisplay`] = `alt+${area}`;\n      size += 10;\n      models_default_bindings[`toggle${size}InchesAreaDisplay`] = `alt+shift+${area}`;\n    }\n    function modelsBindAura([aura], index) {\n      models_default_bindings[`toggle${aura}AuraDisplay`] = `ctrl+${index+1}`;\n    }\n    function modelsBindEffect([effect, keys]) {\n      models_default_bindings[`toggle${effect}EffectDisplay`] = `alt+${keys}`;\n    }\n\n    function buildModelsModesButtons({ single,\n                                       start_charge, end_charge,\n                                       start_place, end_place\n                                     } = {}) {\n      let ret = [\n        [ 'Delete', 'deleteSelection' ],\n        [ 'Copy', 'copySelection' ],\n        [ 'Lock', 'toggleLock' ],\n        // [ 'Ruler Max Len.', 'setRulerMaxLength' ],\n        [ 'Clear Label', 'clearLabel' ],\n        [ 'Image', 'toggle', 'image' ],\n        [ 'Show/Hide', 'toggleImageDisplay', 'image' ],\n        [ 'Next', 'setNextImage', 'image' ],\n        [ 'Wreck', 'toggleWreckDisplay', 'image' ],\n        [ 'Orient.', 'toggle', 'orientation' ],\n        [ 'Face Up', 'setOrientationUp', 'orientation' ],\n        [ 'Face Down', 'setOrientationDown', 'orientation' ],\n        [ 'Counter', 'toggle', 'counter' ],\n        [ 'Show/Hide', 'toggleCounterDisplay', 'counter' ],\n        [ 'Inc.', 'incrementCounter', 'counter' ],\n        [ 'Dec.', 'decrementCounter', 'counter' ],\n        [ 'Souls', 'toggle', 'souls' ],\n        [ 'Show/Hide', 'toggleSoulsDisplay', 'souls' ],\n        [ 'Inc.', 'incrementSouls', 'souls' ],\n        [ 'Dec.', 'decrementSouls', 'souls' ],\n        [ 'Melee', 'toggle', 'melee' ],\n        [ '0.5\"', 'toggleMeleeDisplay', 'melee' ],\n        [ 'Reach', 'toggleReachDisplay', 'melee' ],\n        [ 'Strike', 'toggleStrikeDisplay', 'melee' ],\n      ];\n      if(single) {\n        ret = R.concat(ret, [ [ 'Templates', 'toggle', 'templates' ],\n                              [ 'AoE', 'createAoEOnModel', 'templates' ],\n                              [ 'Spray', 'createSprayOnModel', 'templates' ],\n                            ]);\n      }\n      ret = R.append([ 'Areas', 'toggle', 'areas' ], ret);\n      ret = R.append([ 'CtrlArea', 'toggleCtrlAreaDisplay', 'areas' ], ret);\n      ret = R.concat(ret, R.map((area) => {\n        const size = area + 1;\n        return [ `${size}\"`, `toggle${size}InchesAreaDisplay`, 'areas' ];\n      }, areas));\n      ret = R.concat(ret, R.map((area) => {\n        const size = area + 11;\n        return [ `${size}\"`, `toggle${size}InchesAreaDisplay`, 'areas' ];\n      }, areas));\n      ret = R.append([ 'Auras', 'toggle', 'auras' ], ret);\n      ret = R.concat(ret, R.map(([aura]) => {\n        return [ aura, `toggle${aura}AuraDisplay`, 'auras' ];\n      }, auras));\n      ret = R.append([ 'Effects', 'toggle', 'effects' ], ret);\n      ret = R.concat(ret, R.map(([effect]) => {\n        return [ effect, `toggle${effect}EffectDisplay`, 'effects' ];\n      }, effects));\n      ret = R.append([ 'Incorp.', 'toggleIncorporealDisplay', 'effects' ], ret);\n      ret = R.append([ 'Charge', 'toggle', 'charge' ], ret);\n      if(start_charge) {\n        ret = R.append([ 'Start', 'startCharge', 'charge' ], ret);\n      }\n      if(end_charge) {\n        ret = R.append([ 'End', 'endCharge', 'charge' ], ret);\n      }\n      ret = R.append([ 'Max Len.', 'setChargeMaxLength', 'charge' ], ret);\n      // ret = R.append([ 'Place', 'toggle', 'place' ], ret);\n      // if(start_place) {\n      //   ret = R.append([ 'Start', 'startPlace', 'place' ], ret);\n      // }\n      // if(end_place) {\n      //   ret = R.append([ 'End', 'endPlace', 'place' ], ret);\n      // }\n      // ret = R.append([ 'Max Len.', 'setPlaceMaxLength', 'place' ], ret);\n      // ret = R.append([ 'Within', 'togglePlaceWithin', 'place' ], ret);\n      ret = R.concat(ret, [ [ 'Unit', 'toggle', 'unit' ],\n                            [ 'Show/Hide', 'toggleUnitDisplay', 'unit' ],\n                            [ 'Set #', 'setUnit', 'unit' ],\n                            [ 'Leader', 'toggleLeaderDisplay', 'unit' ],\n                          ]);\n      if(single) {\n        ret = R.append([ 'Select All', 'selectAllUnit', 'unit' ], ret);\n        ret = R.append([ 'Select Friends', 'selectAllFriendly' ], ret);\n      }\n\n      return ret;\n    }\n  }\n})();\n"]}
{"version":3,"sources":["common.es6"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('commonMode', commonModeModelFactory);\n\n  commonModeModelFactory.$inject = [\n    'settings',\n    'appState',\n  ];\n  function commonModeModelFactory(settingsModel,\n                                  appStateService) {\n    const DEFAULT_SETTINGS = {\n      DragEpsilon: 3,\n      ScrollStep: 30,\n      ZoomFactor: 2\n    };\n    const SETTINGS = R.clone(DEFAULT_SETTINGS);\n    const common_actions = {\n      modeBackToDefault: modeBackToDefault,\n      commandUndoLast: commandUndoLast,\n      commandReplayNext: commandReplayNext,\n      viewScrollLeft: viewScrollLeft,\n      viewScrollRight: viewScrollRight,\n      viewScrollUp: viewScrollUp,\n      viewScrollDown: viewScrollDown,\n      viewZoomIn: viewZoomIn,\n      viewZoomOut: viewZoomOut,\n      viewZoomReset: viewZoomReset,\n      flipMap: flipMap,\n      toggleMenu: toggleMenu\n    };\n    const common_bindings = {\n      modeBackToDefault: 'esc',\n      commandUndoLast: 'ctrl+z',\n      commandReplayNext: 'ctrl+y',\n      viewScrollLeft: 'alt+left',\n      viewScrollRight: 'alt+right',\n      viewScrollUp: 'alt+up',\n      viewScrollDown: 'alt+down',\n      viewZoomIn: 'alt++',\n      viewZoomOut: 'alt+-',\n      viewZoomReset: 'alt+z',\n      flipMap: 'ctrl+shift+f',\n      toggleMenu: 'ctrl+shift+m'\n    };\n    const common_mode = {\n      name: 'Common',\n      actions: common_actions,\n      buttons: [],\n      bindings: R.clone(common_bindings),\n      settings: () => SETTINGS\n    };\n    settingsModel.register('Misc',\n                           common_mode.name,\n                           DEFAULT_SETTINGS,\n                           (settings) => {\n                             R.extend(SETTINGS, settings);\n                           });\n    settingsModel.register('Bindings',\n                           common_mode.name,\n                           common_bindings,\n                           (bs) => {\n                             R.extend(common_mode.bindings, bs);\n                           });\n    return common_mode;\n\n    function modeBackToDefault() {\n      self.window.requestAnimationFrame(() => {\n        appStateService.reduce('Modes.switchTo', 'Default');\n      });\n    }\n    function commandUndoLast() {\n      self.window.requestAnimationFrame(() => {\n        appStateService.reduce('Game.command.undoLast');\n      });\n    }\n    function commandReplayNext() {\n      self.window.requestAnimationFrame(() => {\n        appStateService.reduce('Game.command.replayNext');\n      });\n    }\n    function viewScrollLeft() {\n      appStateService.emit('Game.view.scrollLeft');\n    }\n    function viewScrollRight() {\n      appStateService.emit('Game.view.scrollRight');\n    }\n    function viewScrollUp() {\n      appStateService.emit('Game.view.scrollUp');\n    }\n    function viewScrollDown() {\n      appStateService.emit('Game.view.scrollDown');\n    }\n    function viewZoomIn() {\n      appStateService.emit('Game.view.zoomIn');\n    }\n    function viewZoomOut() {\n      appStateService.emit('Game.view.zoomOut');\n    }\n    function viewZoomReset() {\n      appStateService.emit('Game.view.zoomReset');\n    }\n    function flipMap() {\n      appStateService.emit('Game.view.flipMap');\n    }\n    function toggleMenu() {\n      appStateService.emit('Game.toggleMenu');\n    }\n  }\n})();\n"]}
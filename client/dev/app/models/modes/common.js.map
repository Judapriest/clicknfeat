{"version":3,"sources":["common.es6"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('commonMode', commonModeModelFactory);\n\n  commonModeModelFactory.$inject = [\n    'settings',\n    'appState',\n  ];\n  function commonModeModelFactory(settingsModel,\n                                  appStateService) {\n    const DEFAULT_SETTINGS = {\n      DragEpsilon: 3,\n      ScrollStep: 30,\n      ZoomFactor: 2\n    };\n    const SETTINGS = R.clone(DEFAULT_SETTINGS);\n    const common_actions = {\n      modeBackToDefault: modeBackToDefault,\n      commandUndoLast: commandUndoLast,\n      commandReplayNext: commandReplayNext,\n      viewScrollLeft: viewScrollLeft,\n      viewScrollRight: viewScrollRight,\n      viewScrollUp: viewScrollUp,\n      viewScrollDown: viewScrollDown,\n      viewZoomIn: viewZoomIn,\n      viewZoomOut: viewZoomOut,\n      viewZoomReset: viewZoomReset,\n      viewFlipMap: viewFlipMap,\n      viewToggleMenu: viewToggleMenu\n    };\n    const common_bindings = {\n      modeBackToDefault: 'esc',\n      commandUndoLast: 'ctrl+z',\n      commandReplayNext: 'ctrl+y',\n      viewScrollLeft: 'alt+left',\n      viewScrollRight: 'alt+right',\n      viewScrollUp: 'alt+up',\n      viewScrollDown: 'alt+down',\n      viewZoomIn: 'alt++',\n      viewZoomOut: 'alt+-',\n      viewZoomReset: 'alt+z',\n      flipMap: 'ctrl+shift+f',\n      toggleMenu: 'ctrl+shift+m'\n    };\n    const common_mode = {\n      name: 'Common',\n      actions: common_actions,\n      buttons: [],\n      bindings: R.clone(common_bindings),\n      settings: () => SETTINGS\n    };\n    settingsModel.register('Misc',\n                           common_mode.name,\n                           DEFAULT_SETTINGS,\n                           (settings) => {\n                             R.extend(SETTINGS, settings);\n                           });\n    settingsModel.register('Bindings',\n                           common_mode.name,\n                           common_bindings,\n                           (bs) => {\n                             R.extend(common_mode.bindings, bs);\n                           });\n    return common_mode;\n\n    function modeBackToDefault(state) {\n      return appStateService\n        .onAction(state, ['Modes.switchTo', 'Default']);\n    }\n    function commandUndoLast(state) {\n      return appStateService\n        .onAction(state, ['Game.command.undoLast']);\n    }\n    function commandReplayNext(state) {\n      return appStateService\n        .onAction(state, ['Game.command.replayNext']);\n    }\n    function viewScrollLeft(state) {\n      return appStateService\n        .onAction(state, ['Game.view.scrollLeft']);\n    }\n    function viewScrollRight(state) {\n      return appStateService\n        .onAction(state, ['Game.view.scrollRight']);\n    }\n    function viewScrollUp(state) {\n      return appStateService\n        .onAction(state, ['Game.view.scrollUp']);\n    }\n    function viewScrollDown(state) {\n      return appStateService\n        .onAction(state, ['Game.view.scrollDown']);\n    }\n    function viewZoomIn(state) {\n      return appStateService\n        .onAction(state, ['Game.view.zoomIn']);\n    }\n    function viewZoomOut(state) {\n      return appStateService\n        .onAction(state, ['Game.view.zoomOut']);\n    }\n    function viewZoomReset(state) {\n      return appStateService\n        .onAction(state, ['Game.view.zoomReset']);\n    }\n    function viewFlipMap(state) {\n      return appStateService\n        .onAction(state, ['Game.view.flipMap']);\n    }\n    function viewToggleMenu(state) {\n      return appStateService\n        .onAction(state, ['Game.view.toggleMenu']);\n    }\n  }\n})();\n"]}
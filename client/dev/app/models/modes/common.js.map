{"version":3,"sources":["common.es6"],"names":[],"mappings":"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","file":"common.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('commonMode', commonModeModelFactory);\n\n  commonModeModelFactory.$inject = [\n    'modes',\n    'settings',\n  ];\n  function commonModeModelFactory(modesService,\n                                  settingsModel) {\n    const DEFAULT_SETTINGS = {\n      DragEpsilon: 3,\n      ScrollStep: 30,\n      ZoomFactor: 2\n    };\n    const SETTINGS = R.clone(DEFAULT_SETTINGS);\n    const common_actions = {\n      modeBackToDefault: modeBackToDefault,\n      commandUndoLast: commandUndoLast,\n      commandReplayNext: commandReplayNext,\n      viewScrollLeft: viewScrollLeft,\n      viewScrollRight: viewScrollRight,\n      viewScrollUp: viewScrollUp,\n      viewScrollDown: viewScrollDown,\n      viewZoomIn: viewZoomIn,\n      viewZoomOut: viewZoomOut,\n      viewZoomReset: viewZoomReset,\n      flipMap: flipMap,\n      toggleMenu: toggleMenu,\n      // roll1D6: roll1D6,\n      // roll2D6: roll2D6,\n      // roll3D6: roll3D6,\n      // roll4D6: roll4D6,\n      // roll5D6: roll5D6\n    };\n    const common_bindings = {\n      modeBackToDefault: 'esc',\n      commandUndoLast: 'ctrl+z',\n      commandReplayNext: 'ctrl+y',\n      viewScrollLeft: 'alt+left',\n      viewScrollRight: 'alt+right',\n      viewScrollUp: 'alt+up',\n      viewScrollDown: 'alt+down',\n      viewZoomIn: 'alt++',\n      viewZoomOut: 'alt+-',\n      viewZoomReset: 'alt+z',\n      flipMap: 'ctrl+shift+f',\n      toggleMenu: 'ctrl+shift+m'\n    };\n    const common_mode = {\n      name: 'Common',\n      actions: common_actions,\n      buttons: [],\n      bindings: R.clone(common_bindings),\n      settings: () => SETTINGS\n    };\n    settingsModel.register('Misc',\n                           common_mode.name,\n                           DEFAULT_SETTINGS,\n                           (settings) => {\n                             R.extend(SETTINGS, settings);\n                           });\n    settingsModel.register('Bindings',\n                           common_mode.name,\n                           common_bindings,\n                           (bs) => {\n                             R.extend(common_mode.bindings, bs);\n                           });\n    return common_mode;\n\n    function modeBackToDefault(state) {\n      return state.eventP('Modes.switchTo', 'Default');\n    }\n    function commandUndoLast(state) {\n      return state.eventP('Game.command.undoLast');\n    }\n    function commandReplayNext(state) {\n      return state.eventP('Game.command.replayNext');\n    }\n    function viewScrollLeft(state) {\n      state.queueChangeEventP('Game.view.scrollLeft');\n    }\n    function viewScrollRight(state) {\n      state.queueChangeEventP('Game.view.scrollRight');\n    }\n    function viewScrollUp(state) {\n      state.queueChangeEventP('Game.view.scrollUp');\n    }\n    function viewScrollDown(state) {\n      state.queueChangeEventP('Game.view.scrollDown');\n    }\n    function viewZoomIn(state) {\n      state.queueChangeEventP('Game.view.zoomIn');\n    }\n    function viewZoomOut(state) {\n      state.queueChangeEventP('Game.view.zoomOut');\n    }\n    function viewZoomReset(state) {\n      state.queueChangeEventP('Game.view.zoomReset');\n    }\n    function flipMap(state) {\n      state.queueChangeEventP('Game.view.flipMap');\n    }\n    function toggleMenu(state) {\n      state.queueChangeEventP('Game.toggleMenu');\n    }\n    // function roll1D6(state) {\n    //   return state.event('Game.command.execute',\n    //                      'rollDice', [6, 1]);\n    // }\n    // function roll2D6(state) {\n    //   return state.event('Game.command.execute',\n    //                      'rollDice', [6, 2]);\n    // }\n    // function roll3D6(state) {\n    //   return state.event('Game.command.execute',\n    //                      'rollDice', [6, 3]);\n    // }\n    // function roll4D6(state) {\n    //   return state.event('Game.command.execute',\n    //                      'rollDice', [6, 4]);\n    // }\n    // function roll5D6(state) {\n    //   return state.event('Game.command.execute',\n    //                      'rollDice', [6, 5]);\n    // }\n  }\n})();\n"]}
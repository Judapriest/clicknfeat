{"version":3,"sources":["lockTemplates.es6"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,sBADX,EACmC,CAC/B,UAD+B,EAE/B,eAF+B,EAG/B,SAAS,kCAAT,CAA4C,eAA5C,EAC4C,oBAD5C,EACkE;AAChE,MAAI,8BAA8B;AAChC,aAAS,SAAS,oBAAT,CAA8B,IAA9B,EAAoC,MAApC,EAA4C,KAA5C,EAAmD,IAAnD,EAAyD;AAChE,UAAI,OAAO;AACT,gBAAQ,MAAR;AACA,cAAM,IAAN;OAFE,CAD4D;;AAMhE,aAAO,EAAE,KAAF,CACL,qBAAqB,WAArB,CAAiC,IAAjC,EAAuC,MAAvC,CADK,EAEL,UAAS,cAAT,EAAyB;AACvB,eAAO,EAAE,KAAF,CAAQ,WAAR,EAAqB,cAArB,EAAqC,IAArC,CAAP,CADuB;;AAGvB,cAAM,WAAN,CAAkB,sBAAlB,EAHuB;;AAKvB,eAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CALuB;OAAzB,CAFK,CASL,KAAK,SAAL,CATF,CANgE;KAAzD;AAiBT,YAAQ,SAAS,mBAAT,CAA6B,IAA7B,EAAmC,KAAnC,EAA0C,IAA1C,EAAgD;AACtD,aAAO,EAAE,KAAF,CACL,qBAAqB,WAArB,CAAiC,KAAK,IAAL,EAAW,KAAK,MAAL,CADvC,EAEL,UAAS,cAAT,EAAyB;AACvB,eAAO,EAAE,KAAF,CAAQ,WAAR,EAAqB,cAArB,EAAqC,IAArC,CAAP,CADuB;;AAGvB,cAAM,WAAN,CAAkB,sBAAlB,EAHuB;;AAKvB,eAAO,IAAP,CALuB;OAAzB,CAFK,CASL,KAAK,SAAL,CATF,CADsD;KAAhD;AAYR,UAAM,SAAS,iBAAT,CAA2B,IAA3B,EAAiC,KAAjC,EAAwC,IAAxC,EAA8C;AAClD,aAAO,EAAE,KAAF,CACL,qBAAqB,WAArB,CAAiC,CAAC,KAAK,IAAL,EAAW,KAAK,MAAL,CADxC,EAEL,UAAS,cAAT,EAAyB;AACvB,eAAO,EAAE,KAAF,CAAQ,WAAR,EAAqB,cAArB,EAAqC,IAArC,CAAP,CADuB;;AAGvB,cAAM,WAAN,CAAkB,sBAAlB,EAHuB;;AAKvB,eAAO,IAAP,CALuB;OAAzB,CAFK,CASL,KAAK,SAAL,CATF,CADkD;KAA9C;GA9BJ,CAD4D;AA4ChE,kBAAgB,eAAhB,CAAgC,eAAhC,EAAiD,2BAAjD,EA5CgE;AA6ChE,SAAO,2BAAP,CA7CgE;CADlE,CAJJ","file":"lockTemplates.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('lockTemplatesCommand', [\n    'commands',\n    'gameTemplates',\n    function lockTemplatesCommandServiceFactory(commandsService,\n                                                gameTemplatesService) {\n      var lockTemplatesCommandService = {\n        execute: function lockTemplatesExecute(lock, stamps, state, game) {\n          var ctxt = {\n            stamps: stamps,\n            desc: lock\n          };\n\n          return R.pipeP(\n            gameTemplatesService.lockStamps$(lock, stamps),\n            function(game_templates) {\n              game = R.assoc('templates', game_templates, game);\n\n              state.changeEvent('Game.template.create');\n              \n              return [ctxt, game];\n            }\n          )(game.templates);\n        },\n        replay: function lockTemplatesReplay(ctxt, state, game) {\n          return R.pipeP(\n            gameTemplatesService.lockStamps$(ctxt.desc, ctxt.stamps),\n            function(game_templates) {\n              game = R.assoc('templates', game_templates, game);\n              \n              state.changeEvent('Game.template.create');\n\n              return game;\n            }\n          )(game.templates);\n        },\n        undo: function lockTemplatesUndo(ctxt, state, game) {\n          return R.pipeP(\n            gameTemplatesService.lockStamps$(!ctxt.desc, ctxt.stamps),\n            function(game_templates) {\n              game = R.assoc('templates', game_templates, game);\n              \n              state.changeEvent('Game.template.create');\n\n              return game;\n            }\n          )(game.templates);\n        }\n      };\n      commandsService.registerCommand('lockTemplates', lockTemplatesCommandService);\n      return lockTemplatesCommandService;\n    }\n  ]);\n"]}
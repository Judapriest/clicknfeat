{"version":3,"sources":["segment.es6"],"names":[],"mappings":"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","file":"segment.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('gameSegment', gameSegmentModelFactory);\n\n  gameSegmentModelFactory.$inject = [];\n  function gameSegmentModelFactory() {\n    return function buildGameSegmentModel(type) {\n      const gameSegmentModel = {\n        create: gameSegmentCreate,\n        isDisplayed: gameSegmentIsDisplayed,\n        toggleDisplay: gameSegmentToggleDisplay,\n        setLocal: gameSegmentSetLocal,\n        setRemote: gameSegmentSetRemote,\n        saveRemoteState: gameSegmentSaveRemoteState,\n        resetRemote: gameSegmentResetRemote\n      };\n\n      R.curryService(gameSegmentModel);\n      return gameSegmentModel;\n\n      function gameSegmentCreate() {\n        return {\n          local: {\n            display: false,\n            start: { x: 0, y: 0 },\n            end: { x: 0, y: 0 }\n          },\n          remote: {\n            display: false,\n            start: { x: 0, y: 0 },\n            end: { x: 0, y: 0 }\n          },\n          computed: {}\n        };\n      }\n      function gameSegmentIsDisplayed(segment) {\n        return R.path(['remote','display'], segment);\n      }\n      function gameSegmentToggleDisplay(state, game, segment) {\n        return R.thread(segment)(\n          R.over(R.lensPath(['remote','display']), R.not),\n          (segment) => {\n            state.queueChangeEventP(`Game.${type}.remote.change`);\n            return segment;\n          }\n        );\n      }\n      function gameSegmentSetLocal(start, end, state, game, segment) {\n        return R.over(R.lensProp('local'), R.pipe(\n          R.assoc('start', R.clone(start)),\n          R.assoc('end', R.clone(end)),\n          R.assoc('display', true),\n          (local) => {\n            state.queueChangeEventP(`Game.${type}.local.change`);\n            return local;\n          }\n        ), segment);\n      }\n      function gameSegmentSetRemote(start, end, state, game, segment) {\n        return R.thread(segment)(\n          R.assocPath(['local','display'], false),\n          R.assocPath(['remote','start'], R.clone(start)),\n          R.assocPath(['remote','end'], R.clone(end)),\n          R.assocPath(['remote','display'], true),\n          (segment) => {\n            state.queueChangeEventP(`Game.${type}.local.change`);\n            state.queueChangeEventP(`Game.${type}.remote.change`);\n            return segment;\n          }\n        );\n      }\n      function gameSegmentSaveRemoteState(segment) {\n        return R.clone(R.prop('remote', segment));\n      }\n      function gameSegmentResetRemote(remote, state, game, segment) {\n        return R.thread(segment)(\n          R.assoc('remote', R.clone(remote)),\n          (segment) => {\n            state.queueChangeEventP(`Game.${type}.remote.change`);\n            return segment;\n          }\n        );\n      }\n    };\n  }\n})();\n"]}
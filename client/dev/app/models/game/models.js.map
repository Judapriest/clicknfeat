{"version":3,"sources":["models.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,YADX,EACyB,sBADzB,EADU;;AAIV,yBAAuB,OAAvB,GAAiC,CAC/B,cAD+B,EAE/B,OAF+B,CAAjC,CAJU;AAQV,WAAS,sBAAT,CAAgC,iBAAhC,EACgC,UADhC,EAC4C;AAC1C,QAAM,OAAO,kBAAkB,OAAlB,EAA2B,UAA3B,CAAP,CADoC;AAE1C,QAAM,kBAAkB,OAAO,MAAP,CAAc,IAAd,CAAlB,CAFoC;AAG1C,MAAE,UAAF,CAAa,eAAb,EAA8B;AAC5B,gCAA0B,6BAA1B;AACA,qBAAe,mBAAf;KAFF,EAH0C;;AAQ1C,MAAE,YAAF,CAAe,eAAf,EAR0C;AAS1C,WAAO,eAAP,CAT0C;;AAW1C,aAAS,6BAAT,CAAuC,QAAvC,EAAiD,YAAjD,EAA+D,MAA/D,EAAuE;AACrE,aAAO,IAAI,KAAK,OAAL,CAAa,UAAS,OAAT,EAAkB,MAAlB,EAA0B;AAChD,YAAM,SAAS,EAAE,MAAF,CAAS,MAAT,EACb,gBAAgB,GAAhB,EACA,EAAE,MAAF,CAAS,WAAW,gBAAX,CAA4B,QAA5B,EAAsC,YAAtC,CAAT,CAFa,EAGb,EAAE,GAAF,CAAM,EAAE,IAAF,CAAO,CAAC,OAAD,EAAS,OAAT,CAAP,CAAN,CAHa,CAAT,CAD0C;AAMhD,YAAG,EAAE,OAAF,CAAU,MAAV,CAAH,EAAsB,OAAO,+BAAP,EAAtB,KACK,QAAQ,MAAR,EADL;OANsB,CAAxB,CADqE;KAAvE;AAWA,aAAS,mBAAT,CAA6B,KAA7B,EAAoC,MAApC,EAA4C;AAC1C,aAAO,EAAE,OAAF,CAAU,MAAV,EACL,gBAAgB,WAAhB,CAA4B,KAA5B,CADK,EAEL,WAAW,QAAX,CAFF,CAD0C;KAA5C;GAvBF;CARD,CAAD","file":"models.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('gameModels', gameModelsModelFactory);\n\n  gameModelsModelFactory.$inject = [\n    'gameElements',\n    'model',\n  ];\n  function gameModelsModelFactory(gameElementsModel,\n                                  modelModel) {\n    const base = gameElementsModel('model', modelModel);\n    const gameModelsModel = Object.create(base);\n    R.deepExtend(gameModelsModel, {\n      findStampsBetweenPointsP: modelsFindStampBetweenPointsP,\n      modeForStampP: modelsModeForStampP\n    });\n\n    R.curryService(gameModelsModel);\n    return gameModelsModel;\n\n    function modelsFindStampBetweenPointsP(top_left, bottom_right, models) {\n      return new self.Promise(function(resolve, reject) {\n        const stamps = R.thread(models)(\n          gameModelsModel.all,\n          R.filter(modelModel.isBetweenPoints$(top_left, bottom_right)),\n          R.map(R.path(['state','stamp']))\n        );\n        if(R.isEmpty(stamps)) reject('No model found between points');\n        else resolve(stamps);\n      });\n    }\n    function modelsModeForStampP(stamp, models) {\n      return R.threadP(models)(\n        gameModelsModel.findStampP$(stamp),\n        modelModel.modeFor$\n      );\n    }\n  }\n})();\n"]}
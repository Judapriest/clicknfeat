{"version":3,"sources":["elements.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,qBADX,EACkC,+BADlC,EADU;;AAIV,kCAAgC,OAAhC,GAA0C,EAA1C,CAJU;AAKV,WAAS,+BAAT,GAA2C;AACzC,WAAO,SAAS,6BAAT,CAAuC,IAAvC,EACuC,iBADvC,EAC0D;AAC/D,UAAM,2BAA2B;AAC/B,kBAAU,oBAAV;AACA,iBAAS,iBAAT;AACA,eAAO,iBAAP;OAHI,CADyD;;AAO/D,UAAM,eAAe,EAAE,KAAF,CAAQ,WAAR,CAAf,CAPyD;AAQ/D,UAAM,oBAAoB,EAAE,KAAF,CAAQ,gBAAR,CAApB,CARyD;;AAU/D,aAAO,wBAAP,CAV+D;;AAY/D,eAAS,oBAAT,CAA8B,IAA9B,EAAoC,MAApC,EAA4C,KAA5C,EAAmD,IAAnD,EAAyD;AACvD,YAAM,OAAO;AACX,gBAAM,IAAN;AACA,kBAAQ,MAAR;SAFI,CADiD;;AAMvD,eAAO,EAAE,OAAF,CAAU,IAAV,EACL,aAAa,IAAb,EAAmB,MAAnB,CADK,EAEL,kBAAkB,MAAlB,EAA0B,KAA1B,CAFK,EAGL,UAAC,IAAD,EAAU;AACR,iBAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CADQ;SAAV,CAHF,CANuD;OAAzD;AAcA,eAAS,iBAAT,CAA2B,IAA3B,EAAiC,KAAjC,EAAwC,IAAxC,EAA8C;AAC5C,eAAO,EAAE,OAAF,CAAU,IAAV,EACL,aAAa,KAAK,IAAL,EAAW,KAAK,MAAL,CADnB,EAEL,kBAAkB,KAAK,MAAL,EAAa,KAA/B,CAFK,CAAP,CAD4C;OAA9C;AAMA,eAAS,iBAAT,CAA2B,IAA3B,EAAiC,KAAjC,EAAwC,IAAxC,EAA8C;AAC5C,eAAO,EAAE,OAAF,CAAU,IAAV,EACL,aAAa,CAAC,KAAK,IAAL,EAAW,KAAK,MAAL,CADpB,EAEL,kBAAkB,KAAK,MAAL,EAAa,KAA/B,CAFK,CAAP,CAD4C;OAA9C;AAMA,eAAS,WAAT,CAAqB,IAArB,EAA2B,MAA3B,EAAmC,IAAnC,EAAyC;AACvC,eAAO,EAAE,OAAF,CAAU,IAAV,EACL,EAAE,IAAF,CAAU,UAAV,CADK,EAEL,kBAAkB,YAAlB,CAA+B,IAA/B,EAAqC,MAArC,CAFK,EAGL,UAAC,aAAD,EAAmB;AACjB,iBAAO,EAAE,KAAF,CAAW,UAAX,EAAoB,aAApB,EAAmC,IAAnC,CAAP,CADiB;SAAnB,CAHF,CADuC;OAAzC;AASA,eAAS,gBAAT,CAA0B,MAA1B,EAAkC,KAAlC,EAAyC,IAAzC,EAA+C;AAC7C,UAAE,OAAF,CAAU,UAAC,KAAD,EAAW;AACnB,gBAAM,iBAAN,WAAgC,oBAAe,KAA/C,EADmB;SAAX,EAEP,MAFH,EAD6C;AAI7C,cAAM,iBAAN,WAAgC,gBAAhC,EAJ6C;AAK7C,eAAO,IAAP,CAL6C;OAA/C;KAhDK,CADkC;GAA3C;CALD,CAAD","file":"elements.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('lockElementsCommand', lockElementsCommandModelFactory);\n\n  lockElementsCommandModelFactory.$inject = [];\n  function lockElementsCommandModelFactory() {\n    return function buildLockElementsCommandModel(type,\n                                                  gameElementsModel) {\n      const lockElementsCommandModel = {\n        executeP: lockElementsExecuteP,\n        replayP: lockElementsRedoP,\n        undoP: lockElementsUndoP\n      };\n\n      const lockStampsP$ = R.curry(lockStampsP);\n      const emitChangeEvents$ = R.curry(emitChangeEvents);\n\n      return lockElementsCommandModel;\n\n      function lockElementsExecuteP(lock, stamps, state, game) {\n        const ctxt = {\n          desc: lock,\n          stamps: stamps\n        };\n\n        return R.threadP(game)(\n          lockStampsP$(lock, stamps),\n          emitChangeEvents$(stamps, state),\n          (game) => {\n            return [ctxt, game];\n          }\n        );\n      }\n      function lockElementsRedoP(ctxt, state, game) {\n        return R.threadP(game)(\n          lockStampsP$(ctxt.desc, ctxt.stamps),\n          emitChangeEvents$(ctxt.stamps, state)\n        );\n      }\n      function lockElementsUndoP(ctxt, state, game) {\n        return R.threadP(game)(\n          lockStampsP$(!ctxt.desc, ctxt.stamps),\n          emitChangeEvents$(ctxt.stamps, state)\n        );\n      }\n      function lockStampsP(lock, stamps, game) {\n        return R.threadP(game)(\n          R.prop(`${type}s`),\n          gameElementsModel.lockStampsP$(lock, stamps),\n          (game_elements) => {\n            return R.assoc(`${type}s`, game_elements, game);\n          }\n        );\n      }\n      function emitChangeEvents(stamps, state, game) {\n        R.forEach((stamp) => {\n          state.queueChangeEventP(`Game.${type}.change.${stamp}`);\n        }, stamps);\n        state.queueChangeEventP(`Game.${type}.create`);\n        return game;\n      }\n    };\n  }\n})();\n"]}
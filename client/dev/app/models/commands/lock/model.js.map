{"version":3,"sources":["model.es6"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,mBADX,EACgC,CAC5B,UAD4B,EAE5B,YAF4B,EAG5B,SAAS,+BAAT,CAAyC,eAAzC,EACyC,iBADzC,EAC4D;AAC1D,MAAI,2BAA2B;AAC7B,aAAS,SAAS,iBAAT,CAA2B,IAA3B,EAAiC,MAAjC,EAAyC,KAAzC,EAAgD,IAAhD,EAAsD;AAC7D,UAAI,OAAO;AACT,cAAM,IAAN;AACA,gBAAQ,MAAR;OAFE,CADyD;;AAM7D,aAAO,EAAE,KAAF,CACL,kBAAkB,WAAlB,CAA8B,IAA9B,EAAoC,MAApC,CADK,EAEL,UAAS,WAAT,EAAsB;AACpB,eAAO,EAAE,KAAF,CAAQ,QAAR,EAAkB,WAAlB,EAA+B,IAA/B,CAAP,CADoB;;AAGpB,UAAE,OAAF,CAAU,UAAC,KAAD,EAAW;AACnB,gBAAM,WAAN,wBAAuC,KAAvC,EADmB;SAAX,EAEP,MAFH,EAHoB;;AAOpB,eAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CAPoB;OAAtB,CAFK,CAWL,KAAK,MAAL,CAXF,CAN6D;KAAtD;AAmBT,YAAQ,SAAS,cAAT,CAAwB,IAAxB,EAA8B,KAA9B,EAAqC,IAArC,EAA2C;AACjD,aAAO,EAAE,KAAF,CACL,kBAAkB,WAAlB,CAA8B,KAAK,IAAL,EAAW,KAAK,MAAL,CADpC,EAEL,UAAS,WAAT,EAAsB;AACpB,eAAO,EAAE,KAAF,CAAQ,QAAR,EAAkB,WAAlB,EAA+B,IAA/B,CAAP,CADoB;;AAGpB,UAAE,OAAF,CAAU,UAAC,KAAD,EAAW;AACnB,gBAAM,WAAN,wBAAuC,KAAvC,EADmB;SAAX,EAEP,KAAK,MAAL,CAFH,CAHoB;;AAOpB,eAAO,IAAP,CAPoB;OAAtB,CAFK,CAWL,KAAK,MAAL,CAXF,CADiD;KAA3C;AAcR,UAAM,SAAS,cAAT,CAAwB,IAAxB,EAA8B,KAA9B,EAAqC,IAArC,EAA2C;AAC/C,aAAO,EAAE,KAAF,CACL,kBAAkB,WAAlB,CAA8B,CAAC,KAAK,IAAL,EAAW,KAAK,MAAL,CADrC,EAEL,UAAS,WAAT,EAAsB;AACpB,eAAO,EAAE,KAAF,CAAQ,QAAR,EAAkB,WAAlB,EAA+B,IAA/B,CAAP,CADoB;;AAGpB,UAAE,OAAF,CAAU,UAAC,KAAD,EAAW;AACnB,gBAAM,WAAN,wBAAuC,KAAvC,EADmB;SAAX,EAEP,KAAK,MAAL,CAFH,CAHoB;;AAOpB,eAAO,IAAP,CAPoB;OAAtB,CAFK,CAWL,KAAK,MAAL,CAXF,CAD+C;KAA3C;GAlCJ,CADsD;AAkD1D,kBAAgB,eAAhB,CAAgC,YAAhC,EAA8C,wBAA9C,EAlD0D;AAmD1D,SAAO,wBAAP,CAnD0D;CAD5D,CAJJ","file":"model.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('lockModelsCommand', [\n    'commands',\n    'gameModels',\n    function lockModelsCommandServiceFactory(commandsService,\n                                             gameModelsService) {\n      var lockModelsCommandService = {\n        execute: function lockModelsExecute(lock, stamps, state, game) {\n          var ctxt = {\n            desc: lock,\n            stamps: stamps\n          };\n\n          return R.pipeP(\n            gameModelsService.lockStamps$(lock, stamps),\n            function(game_models) {\n              game = R.assoc('models', game_models, game);\n\n              R.forEach((stamp) => {\n                state.changeEvent(`Game.model.change.${stamp}`);\n              }, stamps);\n              \n              return [ctxt, game];\n            }\n          )(game.models);\n        },\n        replay: function lockModelsRedo(ctxt, state, game) {\n          return R.pipeP(\n            gameModelsService.lockStamps$(ctxt.desc, ctxt.stamps),\n            function(game_models) {\n              game = R.assoc('models', game_models, game);\n              \n              R.forEach((stamp) => {\n                state.changeEvent(`Game.model.change.${stamp}`);\n              }, ctxt.stamps);\n\n              return game;\n            }\n          )(game.models);\n        },\n        undo: function lockModelsUndo(ctxt, state, game) {\n          return R.pipeP(\n            gameModelsService.lockStamps$(!ctxt.desc, ctxt.stamps),\n            function(game_models) {\n              game = R.assoc('models', game_models, game);\n              \n              R.forEach((stamp) => {\n                state.changeEvent(`Game.model.change.${stamp}`);\n              }, ctxt.stamps);\n\n              return game;\n            }\n          )(game.models);\n        }\n      };\n      commandsService.registerCommand('lockModels', lockModelsCommandService);\n      return lockModelsCommandService;\n    }\n  ]);\n"]}
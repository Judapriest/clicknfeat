{"version":3,"sources":["lockTerrains.es6"],"names":[],"mappings":";;AAAA,QAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,qBADX,EACkC,CAC9B,UAD8B,EAE9B,cAF8B,EAG9B,SAAS,iCAAT,CAA2C,eAA3C,EAC2C,mBAD3C,EACgE;AAC9D,MAAI,6BAA6B;AAC/B,aAAS,SAAS,mBAAT,CAA6B,IAA7B,EAAmC,MAAnC,EAA2C,KAA3C,EAAkD,IAAlD,EAAwD;AAC/D,UAAI,OAAO;AACT,cAAM,IAAN;AACA,gBAAQ,MAAR;OAFE,CAD2D;;AAM/D,aAAO,EAAE,KAAF,CACL,oBAAoB,WAApB,CAAgC,IAAhC,EAAsC,MAAtC,CADK,EAEL,UAAS,aAAT,EAAwB;AACtB,eAAO,EAAE,KAAF,CAAQ,UAAR,EAAoB,aAApB,EAAmC,IAAnC,CAAP,CADsB;;AAGtB,UAAE,OAAF,CAAU,UAAC,KAAD,EAAW;AACnB,gBAAM,WAAN,0BAAyC,KAAzC,EADmB;SAAX,EAEP,MAFH,EAHsB;AAMtB,cAAM,WAAN,CAAkB,qBAAlB,EANsB;;AAQtB,eAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CARsB;OAAxB,CAFK,CAYL,KAAK,QAAL,CAZF,CAN+D;KAAxD;AAoBT,YAAQ,SAAS,gBAAT,CAA0B,IAA1B,EAAgC,KAAhC,EAAuC,IAAvC,EAA6C;AACnD,aAAO,EAAE,KAAF,CACL,oBAAoB,WAApB,CAAgC,KAAK,IAAL,EAAW,KAAK,MAAL,CADtC,EAEL,UAAS,aAAT,EAAwB;AACtB,eAAO,EAAE,KAAF,CAAQ,UAAR,EAAoB,aAApB,EAAmC,IAAnC,CAAP,CADsB;;AAGtB,UAAE,OAAF,CAAU,UAAC,KAAD,EAAW;AACnB,gBAAM,WAAN,0BAAyC,KAAzC,EADmB;SAAX,EAEP,KAAK,MAAL,CAFH,CAHsB;AAMtB,cAAM,WAAN,CAAkB,qBAAlB,EANsB;;AAQtB,eAAO,IAAP,CARsB;OAAxB,CAFK,CAYL,KAAK,QAAL,CAZF,CADmD;KAA7C;AAeR,UAAM,SAAS,gBAAT,CAA0B,IAA1B,EAAgC,KAAhC,EAAuC,IAAvC,EAA6C;AACjD,aAAO,EAAE,KAAF,CACL,oBAAoB,WAApB,CAAgC,CAAC,KAAK,IAAL,EAAW,KAAK,MAAL,CADvC,EAEL,UAAS,aAAT,EAAwB;AACtB,eAAO,EAAE,KAAF,CAAQ,UAAR,EAAoB,aAApB,EAAmC,IAAnC,CAAP,CADsB;;AAGtB,UAAE,OAAF,CAAU,UAAC,KAAD,EAAW;AACnB,gBAAM,WAAN,0BAAyC,KAAzC,EADmB;SAAX,EAEP,KAAK,MAAL,CAFH,CAHsB;AAMtB,cAAM,WAAN,CAAkB,qBAAlB,EANsB;;AAQtB,eAAO,IAAP,CARsB;OAAxB,CAFK,CAYL,KAAK,QAAL,CAZF,CADiD;KAA7C;GApCJ,CAD0D;AAqD9D,kBAAgB,eAAhB,CAAgC,cAAhC,EAAgD,0BAAhD,EArD8D;AAsD9D,SAAO,0BAAP,CAtD8D;CADhE,CAJJ","file":"lockTerrains.js","sourcesContent":["angular.module('clickApp.services')\n  .factory('lockTerrainsCommand', [\n    'commands',\n    'gameTerrains',\n    function lockTerrainsCommandServiceFactory(commandsService,\n                                               gameTerrainsService) {\n      var lockTerrainsCommandService = {\n        execute: function lockTerrainsExecute(lock, stamps, state, game) {\n          var ctxt = {\n            desc: lock,\n            stamps: stamps\n          };\n\n          return R.pipeP(\n            gameTerrainsService.lockStamps$(lock, stamps),\n            function(game_terrains) {\n              game = R.assoc('terrains', game_terrains, game);\n\n              R.forEach((stamp) => {\n                state.changeEvent(`Game.terrain.change.${stamp}`);\n              }, stamps);\n              state.changeEvent('Game.terrain.create');\n              \n              return [ctxt, game];\n            }\n          )(game.terrains);\n        },\n        replay: function lockTerrainsRedo(ctxt, state, game) {\n          return R.pipeP(\n            gameTerrainsService.lockStamps$(ctxt.desc, ctxt.stamps),\n            function(game_terrains) {\n              game = R.assoc('terrains', game_terrains, game);\n              \n              R.forEach((stamp) => {\n                state.changeEvent(`Game.terrain.change.${stamp}`);\n              }, ctxt.stamps);\n              state.changeEvent('Game.terrain.create');\n\n              return game;\n            }\n          )(game.terrains);\n        },\n        undo: function lockTerrainsUndo(ctxt, state, game) {\n          return R.pipeP(\n            gameTerrainsService.lockStamps$(!ctxt.desc, ctxt.stamps),\n            function(game_terrains) {\n              game = R.assoc('terrains', game_terrains, game);\n              \n              R.forEach((stamp) => {\n                state.changeEvent(`Game.terrain.change.${stamp}`);\n              }, ctxt.stamps);\n              state.changeEvent('Game.terrain.create');\n\n              return game;\n            }\n          )(game.terrains);\n        }\n      };\n      commandsService.registerCommand('lockTerrains', lockTerrainsCommandService);\n      return lockTerrainsCommandService;\n    }\n  ]);\n"]}
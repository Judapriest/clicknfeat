{"version":3,"sources":["dice.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,iBADX,EAC8B,2BAD9B,EADU;;AAIV,8BAA4B,OAA5B,GAAsC,CACpC,UADoC,CAAtC,CAJU;AAOV,WAAS,2BAAT,CAAqC,aAArC,EAAoD;AAClD,QAAM,YAAY,EAAE,QAAF,CAAW,MAAX,CAAZ,CAD4C;AAElD,QAAM,uBAAuB;AAC3B,gBAAU,gBAAV;AACA,eAAS,eAAT;AACA,aAAO,aAAP;KAHI,CAF4C;AAOlD,kBAAc,eAAd,CAA8B,UAA9B,EAA0C,oBAA1C,EAPkD;AAQlD,WAAO,oBAAP,CARkD;;AAUlD,aAAS,gBAAT,CAA0B,KAA1B,EAAiC,OAAjC,EAA0C,IAA1C,EAAgD;AAC9C,UAAM,OAAO,EAAE,KAAF,CAAQ,YAAM;AACzB,eAAO,EAAE,WAAF,CAAc,CAAd,EAAiB,KAAjB,CAAP,CADyB;OAAN,EAElB,OAFU,CAAP,CADwC;AAI9C,UAAM,QAAQ,EAAE,MAAF,CAAS,EAAE,GAAF,EAAO,CAAhB,EAAmB,IAAnB,CAAR,CAJwC;AAK9C,UAAM,OAAO;AACX,oBAAU,cAAS,KAAK,IAAL,CAAU,GAAV,aAAqB,KAAxC;AACA,WAAG,KAAH;AACA,WAAG,OAAH;AACA,WAAG,IAAH;OAJI,CALwC;AAW9C,aAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CAX8C;KAAhD;AAaA,aAAS,eAAT,CAAyB,IAAzB,EAA+B,IAA/B,EAAqC;AACnC,aAAO,EAAE,IAAF,CACL,SADK,EAEL,EAAE,MAAF,CAAS,IAAT,CAFK,EAGL,IAHK,CAAP,CADmC;KAArC;AAOA,aAAS,aAAT,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AACjC,aAAO,EAAE,IAAF,CACL,SADK,EAEL,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,OAAT,EAAkB,KAAK,KAAL,CAA3B,CAFK,EAGL,IAHK,CAAP,CADiC;KAAnC;GA9BF;CAPD,CAAD","file":"dice.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('rollDiceCommand', rollDiceCommandModelFactory);\n\n  rollDiceCommandModelFactory.$inject = [\n    'commands',\n  ];\n  function rollDiceCommandModelFactory(commandsModel) {\n    const DICE_LENS = R.lensProp('dice');\n    const rollDiceCommandModel = {\n      executeP: rollDiceExecuteP,\n      replayP: rollDiceReplayP,\n      undoP: rollDiceUndoP\n    };\n    commandsModel.registerCommand('rollDice', rollDiceCommandModel);\n    return rollDiceCommandModel;\n\n    function rollDiceExecuteP(sides, nb_dice, game) {\n      const dice = R.times(() => {\n        return R.randomRange(1, sides);\n      }, nb_dice);\n      const total = R.reduce(R.add, 0, dice);\n      const ctxt = {\n        desc: `d${sides}[${dice.join(',')}] = ${total}`,\n        s: sides,\n        n: nb_dice,\n        d: dice\n      };\n      return [ctxt, game];\n    }\n    function rollDiceReplayP(ctxt, game) {\n      return R.over(\n        DICE_LENS,\n        R.append(ctxt),\n        game\n      );\n    }\n    function rollDiceUndoP(ctxt, game) {\n      return R.over(\n        DICE_LENS,\n        R.reject(R.propEq('stamp', ctxt.stamp)),\n        game\n      );\n    }\n  }\n})();\n"]}
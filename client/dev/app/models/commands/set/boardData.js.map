{"version":3,"sources":["boardData.es6"],"names":[],"mappings":"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","file":"boardData.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('setBoardDataCommand', setBoardCommandModelFactory);\n\n  setBoardCommandModelFactory.$inject = [\n    'appError',\n    'commands',\n    'gameTerrains',\n    'setBoardCommand',\n    'createTerrainCommand',\n    'deleteTerrainCommand',\n  ];\n  function setBoardCommandModelFactory(appErrorService,\n                                       commandsService,\n                                       gameTerrainsModel,\n                                       setBoardCommandModel,\n                                       createTerrainCommandModel,\n                                       deleteTerrainCommandModel) {\n    const setBoardDataCommandModel = {\n      executeP: setBoardDataExecuteP,\n      replayP: setBoardDataReplayP,\n      undoP: setBoardDataUndoP\n    };\n    commandsService.registerCommand('setBoardData', setBoardDataCommandModel);\n    return setBoardDataCommandModel;\n\n    function setBoardDataExecuteP(data, game) {\n      const ctxt = {};\n      return R.threadP(game)(\n        (game) => {\n          return R.thread(game)(\n            R.prop('terrains'),\n            gameTerrainsModel.all,\n            R.pluck('state'),\n            R.pluck('stamp'),\n            (stamps) => deleteTerrainCommandModel\n              .executeP(stamps, game)\n          );\n        },\n        ([delete_ctxt, game]) => {\n          ctxt.delete_ctxt = delete_ctxt;\n          return createTerrainCommandModel\n            .executeP(data.terrain, false, game)\n            .catch(R.pipe(appErrorService.emit,\n                          R.defaultTo([{}, game])));\n        },\n        ([create_ctxt, game]) => {\n          ctxt.create_ctxt = create_ctxt;\n          return setBoardCommandModel\n            .executeP(data.board, game);\n        },\n        ([set_ctxt, game]) => {\n          ctxt.set_ctxt = set_ctxt;\n          return [ctxt, game];\n        }\n      );\n    }\n    function setBoardDataReplayP(ctxt, game) {\n      return R.threadP(game)(\n        (game) => deleteTerrainCommandModel\n          .replayP(ctxt.delete_ctxt, game),\n        (game) => createTerrainCommandModel\n          .replayP(ctxt.create_ctxt, game)\n          .catch(R.pipe(appErrorService.emit,\n                        R.defaultTo(game))),\n        (game) => setBoardCommandModel\n          .replayP(ctxt.set_ctxt, game)\n      );\n    }\n    function setBoardDataUndoP(ctxt, game) {\n      return R.threadP(game)(\n        (game) => deleteTerrainCommandModel\n          .undoP(ctxt.delete_ctxt, game)\n          .catch(R.pipe(appErrorService.emit,\n                        R.defaultTo(game))),\n        (game) => createTerrainCommandModel\n          .undoP(ctxt.create_ctxt, game),\n        (game) => setBoardCommandModel\n          .undoP(ctxt.set_ctxt, game)\n      );\n    }\n  }\n})();\n"]}
{"version":3,"sources":["layers.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,kBADX,EAC+B,4BAD/B,EADU;;AAIV,+BAA6B,OAA7B,GAAuC,CACrC,UADqC,EAErC,YAFqC,CAAvC,CAJU;AAQV,WAAS,4BAAT,CAAsC,aAAtC,EACsC,eADtC,EACuD;AACrD,QAAM,wBAAwB;AAC5B,gBAAU,iBAAV;AACA,eAAS,cAAT;AACA,aAAO,cAAP;KAHI,CAD+C;;AAOrD,kBAAc,eAAd,CAA8B,WAA9B,EAA2C,qBAA3C,EAPqD;AAQrD,WAAO,qBAAP,CARqD;;AAUrD,aAAS,iBAAT,CAA2B,GAA3B,EAAgC,CAAhC,EAAmC,KAAnC,EAA0C,IAA1C,EAAgD;AAC9C,UAAG,eAAe,EAAE,IAAF,CAAO,gBAAgB,GAAhB,CAAP,CAAf,EAA6C;AAC9C,eAAO,EAAE,OAAF,6BAAoC,SAApC,CAAP,CAD8C;OAAhD;;AAIA,UAAM,OAAO;AACX,gBAAQ,KAAK,MAAL;AACR,cAAS,YAAO,OAAhB;OAFI,CALwC;AAS9C,aAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,QAAX,CAAP,EACO,gBAAmB,SAAnB,EAA2B,CAA3B,CADP,EAEO,IAFP,CAAP,CAT8C;AAY9C,WAAK,KAAL,GAAa,KAAK,MAAL,CAZiC;;AAc9C,YAAM,iBAAN,CAAwB,oBAAxB,EAd8C;;AAgB9C,aAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CAhB8C;KAAhD;AAkBA,aAAS,cAAT,CAAwB,IAAxB,EAA8B,KAA9B,EAAqC,IAArC,EAA2C;AACzC,aAAO,EAAE,KAAF,CAAQ,QAAR,EAAkB,KAAK,KAAL,EAAY,IAA9B,CAAP,CADyC;;AAGzC,YAAM,iBAAN,CAAwB,oBAAxB,EAHyC;;AAKzC,aAAO,IAAP,CALyC;KAA3C;AAOA,aAAS,cAAT,CAAwB,IAAxB,EAA8B,KAA9B,EAAqC,IAArC,EAA2C;AACzC,aAAO,EAAE,KAAF,CAAQ,QAAR,EAAkB,KAAK,MAAL,EAAa,IAA/B,CAAP,CADyC;;AAGzC,YAAM,iBAAN,CAAwB,oBAAxB,EAHyC;;AAKzC,aAAO,IAAP,CALyC;KAA3C;GApCF;CARD,CAAD","file":"layers.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('setLayersCommand', setLayersCommandModelFactory);\n\n  setLayersCommandModelFactory.$inject = [\n    'commands',\n    'gameLayers',\n  ];\n  function setLayersCommandModelFactory(commandsModel,\n                                        gameLayersModel) {\n    const setLayersCommandModel = {\n      executeP: setLayersExecuteP,\n      replayP: setLayersRedoP,\n      undoP: setLayersUndoP\n    };\n\n    commandsModel.registerCommand('setLayers', setLayersCommandModel);\n    return setLayersCommandModel;\n\n    function setLayersExecuteP(cmd, l, state, game) {\n      if('Function' !== R.type(gameLayersModel[cmd])) {\n        return R.rejectP(`Layers unknown method \"${cmd}\"`);\n      }\n\n      const ctxt = {\n        before: game.layers,\n        desc: `${cmd}(${l})`\n      };\n      game = R.over(R.lensProp('layers'),\n                    gameLayersModel[`${cmd}$`](l),\n                    game);\n      ctxt.after = game.layers;\n\n      state.queueChangeEventP('Game.layers.change');\n\n      return [ctxt, game];\n    }\n    function setLayersRedoP(ctxt, state, game) {\n      game = R.assoc('layers', ctxt.after, game);\n\n      state.queueChangeEventP('Game.layers.change');\n\n      return game;\n    }\n    function setLayersUndoP(ctxt, state, game) {\n      game = R.assoc('layers', ctxt.before, game);\n\n      state.queueChangeEventP('Game.layers.change');\n\n      return game;\n    }\n  }\n})();\n"]}
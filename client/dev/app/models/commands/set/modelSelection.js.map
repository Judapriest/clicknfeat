{"version":3,"sources":["modelSelection.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,0BADX,EACuC,oCADvC,EADU;;AAIV,uCAAqC,OAArC,GAA+C,CAC7C,UAD6C,EAE7C,oBAF6C,CAA/C,CAJU;AAQV,WAAS,oCAAT,CAA8C,aAA9C,EAC8C,uBAD9C,EACuE;AACrE,QAAM,gCAAgC;AACpC,gBAAU,yBAAV;AACA,eAAS,wBAAT;AACA,aAAO,sBAAP;KAHI,CAD+D;AAMrE,kBAAc,eAAd,CAA8B,mBAA9B,EAC8B,6BAD9B,EANqE;AAQrE,WAAO,6BAAP,CARqE;;AAUrE,aAAS,yBAAT,CAAmC,MAAnC,EAA2C,MAA3C,EAAmD,KAAnD,EAA0D,IAA1D,EAAgE;AAC9D,aAAO,EAAE,OAAF,CAAU,uBAAV,EACL,EAAE,IAAF,CAAO,MAAP,CADK,EAEL,EAAE,IAAF,EACA,EAAE,QAAF,CAAW,EAAE,UAAF,CAAa,EAAE,MAAF,CAAS,UAAT,CAAb,CAAX,wCAC+C,MAD/C,CAHK,EAKL,YAAM;AACJ,YAAM,OAAS,EAAE,KAAF,CAAQ,MAAR,IACE,CAAE,OAAF,EAAW,KAAX,EAAkB,KAAK,eAAL,CADpB,GAEE,CAAE,OAAF,EAAW,MAAX,EAAmB,KAAnB,EAA0B,KAAK,eAAL,CAF5B,CADX;AAKJ,eAAO,wBAAwB,MAAxB,EACJ,KADI,CACE,uBADF,EAC2B,IAD3B,CAAP,CALI;OAAN,EAQA,UAAC,SAAD;eAAe,EAAE,KAAF,CAAQ,iBAAR,EAA2B,SAA3B,EAAsC,IAAtC;OAAf,EACA,UAAC,IAAD,EAAU;AACR,YAAM,OAAO;AACX,iBAAO,wBAAwB,GAAxB,CAA4B,OAA5B,EAAqC,KAAK,eAAL,CAA5C;AACA,gBAAM,EAAN;AACA,sBAAY,IAAZ;SAHI,CADE;AAMR,eAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CANQ;OAAV,CAdF,CAD8D;KAAhE;AAyBA,aAAS,wBAAT,CAAkC,IAAlC,EAAwC,KAAxC,EAA+C,IAA/C,EAAqD;AACnD,UAAM,YAAY,wBACT,GADS,CACL,QADK,EACK,KAAK,KAAL,EAAY,KADjB,EACwB,KAAK,eAAL,CADpC,CAD6C;AAGnD,aAAO,EAAE,KAAF,CAAQ,iBAAR,EAA2B,SAA3B,EAAsC,IAAtC,CAAP,CAHmD;AAInD,aAAO,IAAP,CAJmD;KAArD;AAMA,aAAS,sBAAT,GAAkC;AAChC,aAAO,EAAE,OAAF,CAAU,uCAAV,CAAP,CADgC;KAAlC;GA1CF;CARD,CAAD","file":"modelSelection.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('setModelSelectionCommand', setModelSelectionCommandModelFactory);\n\n  setModelSelectionCommandModelFactory.$inject = [\n    'commands',\n    'gameModelSelection',\n  ];\n  function setModelSelectionCommandModelFactory(commandsModel,\n                                                gameModelSelectionModel) {\n    const setModelSelectionCommandModel = {\n      executeP: setModelSelectionExecuteP,\n      replayP: setModelSelectionReplayP,\n      undoP: setModelSelectionUndoP\n    };\n    commandsModel.registerCommand('setModelSelection',\n                                  setModelSelectionCommandModel);\n    return setModelSelectionCommandModel;\n\n    function setModelSelectionExecuteP(method, stamps, state, game) {\n      return R.threadP(gameModelSelectionModel)(\n        R.prop(method),\n        R.type,\n        R.rejectIf(R.complement(R.equals('Function')),\n                   `SetModelSelection unknown method ${method}`),\n        () => {\n          const args = ( R.isNil(stamps)\n                         ? [ 'local', state, game.model_selection ]\n                         : [ 'local', stamps, state, game.model_selection ]\n                       );\n          return gameModelSelectionModel[method]\n            .apply(gameModelSelectionModel, args);\n        },\n        (selection) => R.assoc('model_selection', selection, game),\n        (game) => {\n          const ctxt = {\n            after: gameModelSelectionModel.get('local', game.model_selection),\n            desc: '',\n            do_not_log: true\n          };\n          return [ctxt, game];\n        }\n      );\n    }\n    function setModelSelectionReplayP(ctxt, state, game) {\n      const selection = gameModelSelectionModel\n              .set('remote', ctxt.after, state, game.model_selection);\n      game = R.assoc('model_selection', selection, game);\n      return game;\n    }\n    function setModelSelectionUndoP() {\n      return R.rejectP('!!! ERROR : WE SHOULD NOT BE HERE !!!');\n    }\n  }\n})();\n"]}
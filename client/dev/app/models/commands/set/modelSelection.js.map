{"version":3,"sources":["modelSelection.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,0BADX,EACuC,oCADvC,EADU;;AAIV,uCAAqC,OAArC,GAA+C,CAC7C,UAD6C,EAE7C,oBAF6C,CAA/C,CAJU;AAQV,WAAS,oCAAT,CAA8C,aAA9C,EAC8C,uBAD9C,EACuE;AACrE,QAAM,iBAAiB,EAAE,QAAF,CAAW,iBAAX,CAAjB,CAD+D;AAErE,QAAM,gCAAgC;AACpC,gBAAU,yBAAV;AACA,eAAS,wBAAT;AACA,aAAO,sBAAP;KAHI,CAF+D;AAOrE,kBAAc,eAAd,CAA8B,mBAA9B,EAC8B,6BAD9B,EAPqE;AASrE,WAAO,6BAAP,CATqE;;AAWrE,aAAS,yBAAT,CAAmC,MAAnC,EAA2C,MAA3C,EAAmD,IAAnD,EAAyD;AACvD,aAAO,EAAE,OAAF,CAAU,uBAAV,EACL,EAAE,IAAF,CAAO,MAAP,CADK,EAEL,EAAE,IAAF,EACA,EAAE,SAAF,CAAY,EAAE,UAAF,CAAa,EAAE,MAAF,CAAS,UAAT,CAAb,CAAZ,wCAC+C,MAD/C,CAHK,EAKL;eAAQ,EAAE,KAAF,CAAQ,MAAR,IACE,CAAE,OAAF,EAAW,KAAK,eAAL,CADb,GAEE,CAAE,OAAF,EAAW,MAAX,EAAmB,KAAK,eAAL,CAFrB;OAAR,EAIA,UAAC,IAAD;eAAU,wBAAwB,MAAxB,EACP,KADO,CACD,uBADC,EACwB,IADxB;OAAV,EAEA,UAAC,SAAD;eAAe,EAAE,KAAF,CAAQ,iBAAR,EAA2B,SAA3B,EAAsC,IAAtC;OAAf,EACA,UAAC,IAAD,EAAU;AACR,YAAM,OAAO;AACX,iBAAO,wBAAwB,GAAxB,CAA4B,OAA5B,EAAqC,KAAK,eAAL,CAA5C;AACA,gBAAM,EAAN;AACA,sBAAY,IAAZ;SAHI,CADE;AAMR,eAAO,CAAC,IAAD,EAAO,IAAP,CAAP,CANQ;OAAV,CAZF,CADuD;KAAzD;AAuBA,aAAS,wBAAT,CAAkC,IAAlC,EAAwC,IAAxC,EAA8C;AAC5C,aAAO,EAAE,IAAF,CACL,cADK,EAEL,wBAAwB,IAAxB,CAA6B,QAA7B,EAAuC,KAAK,KAAL,CAFlC,EAGL,IAHK,CAAP,CAD4C;KAA9C;AAOA,aAAS,sBAAT,GAAkC;AAChC,aAAO,EAAE,OAAF,CAAU,uCAAV,CAAP,CADgC;KAAlC;GA1CF;CARD,CAAD","file":"modelSelection.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('setModelSelectionCommand', setModelSelectionCommandModelFactory);\n\n  setModelSelectionCommandModelFactory.$inject = [\n    'commands',\n    'gameModelSelection',\n  ];\n  function setModelSelectionCommandModelFactory(commandsModel,\n                                                gameModelSelectionModel) {\n    const SELECTION_LENS = R.lensProp('model_selection');\n    const setModelSelectionCommandModel = {\n      executeP: setModelSelectionExecuteP,\n      replayP: setModelSelectionReplayP,\n      undoP: setModelSelectionUndoP\n    };\n    commandsModel.registerCommand('setModelSelection',\n                                  setModelSelectionCommandModel);\n    return setModelSelectionCommandModel;\n\n    function setModelSelectionExecuteP(method, stamps, game) {\n      return R.threadP(gameModelSelectionModel)(\n        R.prop(method),\n        R.type,\n        R.rejectIfP(R.complement(R.equals('Function')),\n                   `SetModelSelection unknown method ${method}`),\n        () => ( R.isNil(stamps)\n                ? [ 'local', game.model_selection ]\n                : [ 'local', stamps, game.model_selection ]\n              ),\n        (args) => gameModelSelectionModel[method]\n          .apply(gameModelSelectionModel, args),\n        (selection) => R.assoc('model_selection', selection, game),\n        (game) => {\n          const ctxt = {\n            after: gameModelSelectionModel.get('local', game.model_selection),\n            desc: '',\n            do_not_log: true\n          };\n          return [ctxt, game];\n        }\n      );\n    }\n    function setModelSelectionReplayP(ctxt, game) {\n      return R.over(\n        SELECTION_LENS,\n        gameModelSelectionModel.set$('remote', ctxt.after),\n        game\n      );\n    }\n    function setModelSelectionUndoP() {\n      return R.rejectP('!!! ERROR : WE SHOULD NOT BE HERE !!!');\n    }\n  }\n})();\n"]}
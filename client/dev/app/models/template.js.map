{"version":3,"sources":["template.es6"],"names":[],"mappings":"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","file":"template.js","sourcesContent":["angular.module('clickApp.services')\n  .factory('aoeTemplate', [\n    'template',\n    'model',\n    'point',\n    function aoeTemplateServiceFactory(templateService,\n                                       modelService,\n                                       pointService) {\n      var aoeTemplateService = Object.create(templateService);\n      aoeTemplateService.create = function aoeTemplateCreate(temp) {    \n        return R.assocPath(['state','s'], 15, temp);\n      };\n      aoeTemplateService.setSize = function aoeTemplateSetSize(size, temp) {\n        if(R.isNil(R.find(R.equals(size), [3,4,5]))) {\n          return self.Promise.reject('Invalid size for an AoE');\n        }\n        return R.assocPath(['state','s'], size * 5, temp);\n      };\n      aoeTemplateService.size = function aoeTemplateSize(temp) {\n        return R.path(['state','s'], temp);\n      };\n      aoeTemplateService.deviate = function aoeTemplateDeviate(dir, len, temp) {\n        if(templateService.isLocked(temp)) {\n          return self.Promise.reject('Template is locked');\n        }\n        dir = temp.state.r + 60 * (dir-1);\n        var max_len = R.defaultTo(len, R.path(['state','m'], temp));\n        len = Math.min(len, max_len);\n        return R.pipe(\n          R.over(R.lensProp('state'),\n                 pointService.translateInDirection$(len * 10, dir)),\n          R.assocPath(['state','r'], dir),\n          templateService.checkState\n        )(temp);\n      };\n      aoeTemplateService.maxDeviation = function aoeTemplateMaxDeviation(temp) {\n        return R.pathOr(0, ['state','m'], temp);\n      };\n      aoeTemplateService.setMaxDeviation = function aoeTemplateSetMaxDeviation(max, temp) {\n        return R.assocPath(['state','m'], max, temp);\n      };\n      aoeTemplateService.setToRuler = function aoeTemplateSetToRuler(pos, temp) {\n        if(templateService.isLocked(temp)) {\n          return self.Promise.reject('Template is locked');\n        }\n        let state = R.pipe(\n          R.assoc('x', pos.x),\n          R.assoc('y', pos.y),\n          R.assoc('r', pos.r),\n          R.assoc('m', pos.m)\n        )(temp.state);\n        return R.pipe(\n          R.assoc('state', state),\n          templateService.checkState\n        )(temp);\n      };\n      aoeTemplateService.setTarget = function aoeTemplateSetTarget(factions, origin, target, temp) {\n        return templateService.setPosition(target.state, temp);\n      };\n      templateService.registerTemplate('aoe', aoeTemplateService);\n      R.curryService(aoeTemplateService);\n      return aoeTemplateService;\n    }\n  ])\n  .factory('wallTemplate', [\n    'template',\n    self.wallTemplateServiceFactory = function wallTemplateServiceFactory(templateService) {\n      var wallTemplateService = Object.create(templateService);\n      wallTemplateService.create = function wallTemplateCreate(temp) {    \n        return temp;\n      };\n      templateService.registerTemplate('wall', wallTemplateService);\n      R.curryService(wallTemplateService);\n      return wallTemplateService;\n    }\n  ])\n  .factory('sprayTemplate', [\n    'template',\n    'model',\n    'point',\n    self.sprayTemplateServiceFactory = function sprayTemplateServiceFactory(templateService,\n                                                                            modelService,\n                                                                            pointService) {\n      var sprayTemplateService = Object.create(templateService);\n      sprayTemplateService.create = function sprayTemplateCreate(temp) {    \n        return R.assocPath(['state','s'], 6, temp);\n      };\n      sprayTemplateService.setSize = function sprayTemplateSetSize(size, temp) {\n        if(R.isNil(R.find(R.equals(size), [6,8,10]))) {\n          return self.Promise.reject('Invalid size for a Spray');\n        }\n        return R.assocPath(['state','s'], size, temp);\n      };\n      sprayTemplateService.size = function sprayTemplateSize(temp) {\n        return R.path(['state','s'], temp);\n      };\n      sprayTemplateService.origin = function sprayTemplateOrigin(temp) {\n        return R.path(['state','o'], temp);\n      };\n      sprayTemplateService.setOrigin = function sprayTemplateSetOrigin(factions, origin, temp) {\n        if(templateService.isLocked(temp)) {\n          return self.Promise.reject('Template is locked');\n        }\n        return R.pipeP(\n          modelService.baseEdgeInDirection$(factions, temp.state.r),\n          (position) => {\n            return R.pipe(\n              R.assocPath(['state','o'], origin.state.stamp),\n              templateService.setPosition$(position)\n            )(temp);\n          }\n        )(origin);\n      };\n      sprayTemplateService.setTarget = function sprayTemplateSetTarget(factions, origin, target, temp) {\n        if(templateService.isLocked(temp)) {\n          return self.Promise.reject('Template is locked');\n        }\n        var direction = pointService.directionTo(target.state, origin.state);\n        return R.pipeP(\n          modelService.baseEdgeInDirection$(factions, direction),\n          (position) => {\n            return R.pipe(\n              R.assocPath(['state','r'], direction),\n              templateService.setPosition$(position)\n            )(temp);\n          }\n        )(origin);\n      };\n      var FORWARD_MOVES = [\n        'moveFront',\n        'moveBack',\n        'shiftLeft',\n        'shiftRight',\n        'shiftUp',\n        'shiftDown',\n        'setPosition',\n      ];\n      R.forEach(function(move) {\n        sprayTemplateService[move] = function sprayTemplateForwardMove(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          return R.pipePromise(\n            R.assocPath(['state','o'], null),\n            (template) => {\n              return templateService[move](small, template);\n            }\n          )(template);\n        };\n      }, FORWARD_MOVES);\n      sprayTemplateService.rotateLeft = function sprayTemplateRotateLeft(factions, origin,\n                                                                         small, template) {\n        if(templateService.isLocked(template)) {\n          return self.Promise.reject('Template is locked');\n        }\n        if(R.isNil(origin)) return templateService.rotateLeft(small, template);\n        \n        var angle = templateService.moves()[small ? 'RotateSmall' : 'Rotate'];\n        template = R.over(R.lensProp('state'),\n                          pointService.rotateLeft$(angle),\n                          template);\n        return R.pipeP(\n          modelService.baseEdgeInDirection$(factions, template.state.r),\n          (base_edge) => {\n            return templateService.setPosition(base_edge, template);\n          }\n        )(origin);\n      };\n      sprayTemplateService.rotateRight = function sprayTemplateRotateRight(factions, origin,\n                                                                           small, template) {\n        if(templateService.isLocked(template)) {\n          return self.Promise.reject('Template is locked');\n        }\n        if(R.isNil(origin)) return templateService.rotateRight(small, template);\n        \n        var angle = templateService.moves()[small ? 'RotateSmall' : 'Rotate'];\n        template = R.over(R.lensProp('state'),\n                          pointService.rotateRight$(angle),\n                          template);\n        return R.pipeP(\n          modelService.baseEdgeInDirection$(factions, template.state.r),\n          (base_edge) => {\n            return templateService.setPosition(base_edge, template);\n          }\n        )(origin);\n      };\n      templateService.registerTemplate('spray', sprayTemplateService);\n      R.curryService(sprayTemplateService);\n      return sprayTemplateService;\n    }\n  ])\n  .factory('template', [\n    'settings',\n    'point',\n    self.templateServiceFactory = function templateServiceFactory(settingsService,\n                                                                  pointService) {\n      let TEMP_REGS = {};\n      let DEFAULT_MOVES = {\n        Move: 10,\n        MoveSmall: 1,\n        Rotate: 60,\n        RotateSmall: 6,\n        Shift: 10,\n        ShiftSmall: 1\n      };\n      let MOVES = R.clone(DEFAULT_MOVES);\n      settingsService.register('Moves',\n                               'Template',\n                               DEFAULT_MOVES,\n                               (moves) => {\n                                 R.extend(MOVES, moves);\n                               });\n      var templateService = {\n        registerTemplate: function templateRegister(type, service) {\n          TEMP_REGS[type] = service;\n        },\n        moves: function templateMoves() {\n          return MOVES;\n        },\n        create: function templateCreate(temp) {\n          return R.pipePromise(\n            R.prop(temp.type),\n            R.rejectIf(R.isNil, `Create unknown template type ${temp.type}`),\n            (service) => {\n              var template = {\n                state: {\n                  type: temp.type,\n                  x: 0, y: 0, r: 0,\n                  l: [],\n                  stamp: R.guid()\n                }\n              };\n              return service.create(template);\n            },\n            (template) => {\n              template.state = R.deepExtend(template.state, temp);\n              return template;\n            }\n          )(TEMP_REGS);\n        },\n        state: function templateState(template) {\n          return R.prop('state', template);\n        },\n        saveState: function templateSaveState(template) {\n          return R.clone(R.prop('state', template));\n        },\n        setState: function templateSetState(state, template) {\n          return R.assoc('state', R.clone(state), template);\n        },\n        respondTo: function templateAnswerTo(method, template) {\n          return ( R.exists(TEMP_REGS[template.state.type]) &&\n                   R.exists(TEMP_REGS[template.state.type][method])\n                 );\n        },\n        call: function templateCall(method, args, template) {\n          return new self.Promise((resolve, reject) => {\n            if(!templateService.respondTo(method, template)) {\n              reject(`Unknown call ${method} on ${template.state.type} template`);\n              return;\n            }\n            resolve(TEMP_REGS[template.state.type][method]\n                    .apply(null, [...args, template]));\n          });\n        },\n        checkState: function templateCheckState(template) {\n          return R.pipe(\n            R.over(R.lensPath(['state','x']),\n                   R.compose(R.max(0), R.min(480))),\n            R.over(R.lensPath(['state','y']),\n                   R.compose(R.max(0), R.min(480)))\n          )(template);\n        },\n        isLocked: function templateIsLocked(template) {\n          return R.path(['state','lk'], template);\n        },\n        setLock: function templateIsLocked(lock, template) {\n          return R.assocPath(['state','lk'], lock, template);\n        },\n        setPosition: function templateSet(pos, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          return R.pipe(\n            R.assocPath(['state','x'], pos.x),\n            R.assocPath(['state','y'], pos.y),\n            templateService.checkState\n          )(template);\n        },\n        moveFront: function templateMoveFront(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          var dist = MOVES[small ? 'MoveSmall' : 'Move'];\n          return R.pipe(\n            R.over(R.lensProp('state'),\n                   pointService.moveFront$(dist)),\n            templateService.checkState\n          )(template);\n        },\n        moveBack: function templateMoveBack(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          var dist = MOVES[small ? 'MoveSmall' : 'Move'];\n          return R.pipe(\n            R.over(R.lensProp('state'),\n                   pointService.moveBack$(dist)),\n            templateService.checkState\n          )(template);\n        },\n        rotateLeft: function templateRotateLeft(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          var angle = MOVES[small ? 'RotateSmall' : 'Rotate'];\n          return R.pipe(\n            R.over(R.lensProp('state'),\n                   pointService.rotateLeft$(angle)),\n            templateService.checkState\n          )(template);\n        },\n        rotateRight: function templateRotateRight(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          var angle = MOVES[small ? 'RotateSmall' : 'Rotate'];\n          return R.pipe(\n            R.over(R.lensProp('state'),\n                   pointService.rotateRight$(angle)),\n            templateService.checkState\n          )(template);\n        },\n        shiftLeft: function templateShiftLeft(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n          return R.pipe(\n            R.over(R.lensProp('state'),\n                   pointService.shiftLeft$(dist)),\n            templateService.checkState\n          )(template);\n        },\n        shiftRight: function templateShiftRight(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n          return R.pipe(\n            R.over(R.lensProp('state'),\n                   pointService.shiftRight$(dist)),\n            templateService.checkState\n          )(template);\n        },\n        shiftUp: function templateShiftUp(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n          return R.pipe(\n            R.over(R.lensProp('state'),\n                   pointService.shiftUp$(dist)),\n            templateService.checkState\n          )(template);\n        },\n        shiftDown: function templateShiftDown(small, template) {\n          if(templateService.isLocked(template)) {\n            return self.Promise.reject('Template is locked');\n          }\n          var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n          return R.pipe(\n            R.over(R.lensProp('state'),\n                   pointService.shiftDown$(dist)),\n            templateService.checkState\n          )(template);\n        },\n        eventName: function templateEventName(template) {\n          return R.path(['state','stamp'], template);\n        },\n        addLabel: function templateAddLabel(label, template) {\n          return R.over(R.lensPath(['state','l']),\n                        R.compose(R.uniq, R.append(label)),\n                        template);\n        },\n        removeLabel: function templateRemoveLabel(label, template) {\n          return R.over(R.lensPath(['state','l']),\n                        R.reject(R.equals(label)),\n                        template);\n        },\n        fullLabel: function templateFullLabel(template) {\n          return R.pathOr([], ['state','l'], template).join(' ');\n        }\n      };\n      R.curryService(templateService);\n      return templateService;\n    }\n  ])\n  .factory('allTemplates', [\n    'aoeTemplate',\n    'sprayTemplate',\n    'wallTemplate',\n    () => { return {}; }\n  ]);\n"]}
{"version":3,"sources":["element.es6"],"names":[],"mappings":"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","file":"element.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('element', elementModelFactory);\n\n  elementModelFactory.$inject = [\n    'point',\n  ];\n  function elementModelFactory(pointModel) {\n    return function buildElementModel(type, MOVES) {\n      const elementModel = {\n        createDefaultP: elementCreateDefaultP,\n        createP: elementCreateP,\n        stamp: elementStamp,\n        eventName: elementEventName,\n        state: elementState,\n        saveState: elementSaveState,\n        setState: elementSetState,\n        checkState: elementCheckState,\n        isLocked: elementIsLocked,\n        setLock: elementSetLock,\n        addLabel: elementAddLabel,\n        removeLabel: elementRemoveLabel,\n        fullLabel: elementFullLabel,\n        clearLabel: elementClearLabel,\n        setPositionP: moveElementP(elementSetPosition),\n        shiftPositionP: moveElementP(elementShiftPosition),\n        setOrientationP: moveElementP(elementSetOrientation),\n        moveFrontP: moveElementP(elementMoveFront),\n        moveBackP: moveElementP(elementMoveBack),\n        rotateLeftP: moveElementP(elementRotateLeft),\n        rotateRightP: moveElementP(elementRotateRight),\n        shiftLeftP: moveElementP(elementShiftLeft),\n        shiftRightP: moveElementP(elementShiftRight),\n        shiftUpP: moveElementP(elementShiftUp),\n        shiftDownP: moveElementP(elementShiftDown)\n      };\n\n      R.curryService(elementModel);\n      return elementModel;\n\n      function elementCreateDefaultP() {\n        return R.resolveP({\n          state: {\n            x: 0, y: 0, r: 0,\n            l: [],\n            lk: false,\n            stamp: R.guid()\n          }\n        });\n      }\n      function elementCreateP(temp) {\n        return R.threadP(temp)(\n          this.createDefaultP,\n          (element) => {\n            R.deepExtend(element.state, temp);\n            return element;\n          },\n          this.checkState\n        );\n      }\n      function elementStamp(element) {\n        return R.path(['state','stamp'], element);\n      }\n      function elementEventName(element) {\n        return R.path(['state','stamp'], element);\n      }\n      function elementState(element) {\n        return R.prop('state', element);\n      }\n      function elementSaveState(element) {\n        return R.clone(R.prop('state', element));\n      }\n      function elementSetState(state, element) {\n        return R.assoc('state', R.clone(state), element);\n      }\n      function elementCheckState(element) {\n        return R.thread(element)(\n          R.over(R.lensPath(['state','x']),\n                 R.compose(R.max(0), R.min(480))),\n          R.over(R.lensPath(['state','y']),\n                 R.compose(R.max(0), R.min(480)))\n        );\n      }\n      function elementIsLocked(element) {\n        return R.path(['state', 'lk'], element);\n      }\n      function elementSetLock(set, element) {\n        return R.assocPath(['state','lk'], set, element);\n      }\n      function moveElementP(move) {\n        return function(...args) {\n          const element = R.last(args);\n          const params = R.init(args);\n          return R.threadP(element)(\n            R.rejectIf(this.isLocked,\n                       `${s.capitalize(type)} is locked`),\n            (element) => move.apply(null, [...params, element]),\n            this.checkState\n          );\n        };\n      }\n      function elementSetPosition(pos, element) {\n        return R.thread(element)(\n          R.assocPath(['state','x'], pos.x),\n          R.assocPath(['state','y'], pos.y)\n        );\n      }\n      function elementShiftPosition(shift, element) {\n        return R.thread(element)(\n          R.assocPath(['state','x'], element.state.x + shift.x),\n          R.assocPath(['state','y'], element.state.y + shift.y)\n        );\n      }\n      function elementSetOrientation(orientation, element) {\n        return R.thread(element)(\n          R.assocPath(['state','r'], orientation)\n        );\n      }\n      function elementMoveFront(small, element) {\n        const dist = MOVES[small ? 'MoveSmall' : 'Move'];\n        return R.thread(element)(\n          R.over(R.lensProp('state'),\n                 pointModel.moveFront$(dist))\n        );\n      }\n      function elementMoveBack(small, element) {\n        const dist = MOVES[small ? 'MoveSmall' : 'Move'];\n        return R.thread(element)(\n          R.over(R.lensProp('state'),\n                 pointModel.moveBack$(dist))\n        );\n      }\n      function elementRotateLeft(small, element) {\n        const angle = MOVES[small ? 'RotateSmall' : 'Rotate'];\n        return R.thread(element)(\n          R.over(R.lensProp('state'),\n                 pointModel.rotateLeft$(angle))\n        );\n      }\n      function elementRotateRight(small, element) {\n        const angle = MOVES[small ? 'RotateSmall' : 'Rotate'];\n        return R.thread(element)(\n          R.over(R.lensProp('state'),\n                 pointModel.rotateRight$(angle))\n        );\n      }\n      function elementShiftLeft(small, element) {\n        const dist = MOVES[small ? 'MoveSmall' : 'Move'];\n        return R.thread(element)(\n          R.over(R.lensProp('state'),\n                 pointModel.shiftLeft$(dist))\n        );\n      }\n      function elementShiftRight(small, element) {\n        const dist = MOVES[small ? 'MoveSmall' : 'Move'];\n        return R.thread(element)(\n          R.over(R.lensProp('state'),\n                 pointModel.shiftRight$(dist))\n        );\n      }\n      function elementShiftUp(small, element) {\n        const dist = MOVES[small ? 'MoveSmall' : 'Move'];\n        return R.thread(element)(\n          R.over(R.lensProp('state'),\n                 pointModel.shiftUp$(dist))\n        );\n      }\n      function elementShiftDown(small, element) {\n        const dist = MOVES[small ? 'MoveSmall' : 'Move'];\n        return R.thread(element)(\n          R.over(R.lensProp('state'),\n                 pointModel.shiftDown$(dist))\n        );\n      }\n      function elementAddLabel(label, element) {\n        return R.over(R.lensPath(['state','l']),\n                      R.compose(R.uniq, R.append(label)),\n                      element);\n      }\n      function elementRemoveLabel(label, element) {\n        return R.over(R.lensPath(['state','l']),\n                      R.reject(R.equals(label)),\n                      element);\n      }\n      function elementClearLabel(element) {\n        return R.assocPath(['state','l'], [], element);\n      }\n      function elementFullLabel(element) {\n        return R.pathOr([], ['state','l'], element).join(' ');\n      }\n    };\n  }\n})();\n"]}
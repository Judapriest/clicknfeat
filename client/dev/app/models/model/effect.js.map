{"version":3,"sources":["effect.es6"],"names":[],"mappings":";;;;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,aADX,EAC0B,yBAD1B,EADU;;AAIV,4BAA0B,OAA1B,GAAoC,EAApC,CAJU;AAKV,WAAS,yBAAT,GAAqC;AACnC,QAAM,UAAU,CACd,CAAE,GAAF,EAAQ,uBAAR,CADc,EAEd,CAAE,GAAF,EAAQ,2BAAR,CAFc,EAGd,CAAE,GAAF,EAAQ,0BAAR,CAHc,EAId,CAAE,GAAF,EAAQ,sBAAR,CAJc,EAKd,CAAE,GAAF,EAAQ,4BAAR,CALc,EAMd,CAAE,GAAF,EAAQ,oBAAR,CANc,EAOd,CAAE,GAAF,EAAQ,4BAAR,CAPc,CAAV,CAD6B;AAUnC,QAAM,cAAc,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAd,CAV6B;AAWnC,WAAO,UAAC,YAAD,EAAkB;AACvB,UAAM,mBAAmB;AACvB,2BAAmB,sBAAnB;AACA,0BAAkB,qBAAlB;AACA,6BAAqB,wBAArB;AACA,sBAAc,iBAAd;OAJI,CADiB;AAOvB,aAAO,gBAAP,CAPuB;;AASvB,eAAS,sBAAT,CAAgC,MAAhC,EAAwC,KAAxC,EAA+C;AAC7C,eAAO,CAAC,CAAC,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,MAAT,CAAP,EAAyB,EAAE,MAAF,CAAS,EAAT,EAAa,WAAb,EAA0B,KAA1B,CAAzB,CAAD,CADqC;OAA/C;AAGA,eAAS,qBAAT,CAA+B,MAA/B,EAAuC,GAAvC,EAA4C,KAA5C,EAAmD;AACjD,YAAM,SAAW,MACE,EAAE,OAAF,CAAU,EAAE,IAAF,EAAQ,EAAE,MAAF,CAAS,MAAT,CAAlB,EAAoC,EAAE,SAAF,CAAY,EAAZ,CAApC,CADF,GAEE,EAAE,OAAF,CAAU,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,MAAT,CAAT,CAAV,EAAsC,EAAE,SAAF,CAAY,EAAZ,CAAtC,CAFF,CADgC;AAKjD,eAAO,EAAE,IAAF,CAAO,WAAP,EAAoB,MAApB,EAA4B,KAA5B,CAAP,CALiD;OAAnD;AAOA,eAAS,wBAAT,CAAkC,MAAlC,EAA0C,KAA1C,EAAiD;AAC/C,YAAM,SAAW,aAAa,iBAAb,CAA+B,MAA/B,EAAuC,KAAvC,IACE,EAAE,OAAF,CAAU,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,MAAT,CAAT,CAAV,EAAsC,EAAE,SAAF,CAAY,EAAZ,CAAtC,CADF,GAEE,EAAE,OAAF,CAAU,EAAE,MAAF,CAAS,MAAT,CAAV,EAA4B,EAAE,SAAF,CAAY,EAAZ,CAA5B,CAFF,CAD8B;AAK/C,eAAO,EAAE,IAAF,CAAO,WAAP,EAAoB,MAApB,EAA4B,KAA5B,CAAP,CAL+C;OAAjD;AAOA,eAAS,iBAAT,OACqC,KADrC,EAC4C;YADf,eACe;YAAf,iBAAe;;AAC1C,YAAM,UAAU,EAAE,MAAF,CAAS,OAAT,EACd,EAAE,MAAF,CAAS;;;cAAE;iBAAS,iBAAiB,iBAAjB,CAAmC,GAAnC,EAAwC,EAAC,YAAD,EAAxC;SAAX,CADK,EAEd,UAAC,OAAD,EAAa;AACX,cAAM,SAAS,IAAI,KAAJ,GAAY,CAAZ,GAAiB,EAAE,MAAF,CAAS,OAAT,IAAoB,EAApB,GAAyB,CAAzB,CADrB;AAEX,cAAM,SAAS,IAAI,MAAJ,GAAa,CAAb,GAAiB,KAAK,WAAL,GAAmB,CAApC,CAFJ;AAGX,iBAAO,EAAE,QAAF,CAAW,EAAE,MAAF,CAAX,CAAqB,UAAC,GAAD,SAAmB,CAAnB,EAAyB;;;gBAAlB,eAAkB;gBAAb,gBAAa;;AACnD,mBAAO,EAAE,KAAF,CAAQ,GAAR,EAAa;AAClB,oBAAM,iBAAiB,iBAAjB,CAAmC,GAAnC,EAAwC,EAAC,YAAD,EAAxC,CAAN;AACA,iBAAG,SAAS,IAAI,EAAJ,EAAQ,GAAG,MAAH,EAAW,UAFb;aAAb,EAGJ,GAHI,CAAP,CADmD;WAAzB,EAKzB,EALI,EAKA,OALA,CAAP,CAHW;SAAb,CAFI,CADoC;AAc1C,eAAO,EAAE,gBAAF,EAAP,CAd0C;OAD5C;KA1BK,CAX4B;GAArC;CALD,CAAD","file":"effect.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelEffect', modelEffectServiceFactory);\n\n  modelEffectServiceFactory.$inject = [];\n  function modelEffectServiceFactory() {\n    const EFFECTS = [\n      [ 'b' , '/data/icons/Blind.png'      ],\n      [ 'c' , '/data/icons/Corrosion.png'  ],\n      [ 'd' , '/data/icons/BoltBlue.png'   ],\n      [ 'f' , '/data/icons/Fire.png'       ],\n      [ 'e' , '/data/icons/BoltYellow.png' ],\n      [ 'k' , '/data/icons/KD.png'         ],\n      [ 't' , '/data/icons/Stationary.png' ],\n    ];\n    const EFFECT_LENS = R.lensPath(['state','eff']);\n    return (modelService) => {\n      const modelEffectModel = {\n        isEffectDisplayed: modelIsEffectDisplayed,\n        setEffectDisplay: modelSetEffectDisplay,\n        toggleEffectDisplay: modelToggleEffectDisplay,\n        renderEffect: modelRenderEffect\n      };\n      return modelEffectModel;\n\n      function modelIsEffectDisplayed(effect, model) {\n        return !!R.find(R.equals(effect), R.viewOr([], EFFECT_LENS, model));\n      }\n      function modelSetEffectDisplay(effect, set, model) {\n        const update = ( set\n                         ? R.compose(R.uniq, R.append(effect), R.defaultTo([]))\n                         : R.compose(R.reject(R.equals(effect)), R.defaultTo([]))\n                       );\n        return R.over(EFFECT_LENS, update, model);\n      }\n      function modelToggleEffectDisplay(effect, model) {\n        const update = ( modelService.isEffectDisplayed(effect, model)\n                         ? R.compose(R.reject(R.equals(effect)), R.defaultTo([]))\n                         : R.compose(R.append(effect), R.defaultTo([]))\n                       );\n        return R.over(EFFECT_LENS, update, model);\n      }\n      function modelRenderEffect({ img,\n                                   info }, state) {\n        const effects = R.thread(EFFECTS)(\n          R.filter(([key]) => modelEffectModel.isEffectDisplayed(key, {state})),\n          (actives) => {\n            const base_x = img.width / 2 - (R.length(actives) * 10 / 2);\n            const base_y = img.height / 2 + info.base_radius + 1;\n            return R.addIndex(R.reduce)((mem, [key, link], i) => {\n              return R.assoc(key, {\n                show: modelEffectModel.isEffectDisplayed(key, {state}),\n                x: base_x + i * 10, y: base_y, link\n              }, mem);\n            }, {}, actives);\n          }\n        );\n        return { effects };\n      }\n    };\n  }\n})();\n"]}
{"version":3,"sources":["image.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,YADX,EACyB,sBADzB,EADU;;AAIV,yBAAuB,OAAvB,GAAiC,EAAjC,CAJU;AAKV,WAAS,sBAAT,GAAkC;AAChC,QAAM,WAAW,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAX,CAD0B;AAEhC,WAAO,UAAC,UAAD,EAAgB;AACrB,UAAM,kBAAkB;AACtB,0BAAkB,qBAAlB;AACA,kBAAU,aAAV;AACA,sBAAc,iBAAd;AACA,yBAAiB,oBAAjB;AACA,4BAAoB,uBAApB;AACA,qBAAa,gBAAb;OANI,CADe;AASrB,aAAO,eAAP,CATqB;;AAWrB,eAAS,qBAAT,CAA+B,KAA/B,EAAsC;AACpC,eAAO,CAAC,CAAC,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,GAAT,CAAP,EAAsB,EAAE,MAAF,CAAS,EAAT,EAAa,QAAb,EAAuB,KAAvB,CAAtB,CAAD,CAD4B;OAAtC;AAGA,eAAS,aAAT,CAAuB,KAAvB,EAA8B;AAC5B,YAAM,OAAO,MAAM,IAAN,CADe;AAE5B,YAAM,WAAW,KAAK,GAAL,CAFW;AAG5B,YAAI,MAAM,EAAE,MAAF,CAAS,QAAT,EACR,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,MAAT,EAAgB,SAAhB,CAAT,CADQ,EAER,EAAE,IAAF,CAAO,MAAM,KAAN,CAAY,GAAZ,CAFC,CAAN,CAHwB;AAO5B,YAAG,WAAW,iBAAX,CAA6B,KAA7B,CAAH,EAAwC;AACtC,gBAAM,EAAE,MAAF,CAAS,QAAT,EACJ,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,MAAT,EAAgB,QAAhB,CAAT,CADI,EAEJ,EAAE,IAAF,EACA,EAAE,SAAF,CAAY,GAAZ,CAHI,CAAN,CADsC;SAAxC;AAOA,YAAG,WAAW,sBAAX,CAAkC,KAAlC,CAAH,EAA6C;AAC3C,gBAAM,EAAE,MAAF,CAAS,QAAT,EACJ,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,MAAT,EAAgB,aAAhB,CAAT,CADI,EAEJ,EAAE,IAAF,EACA,EAAE,SAAF,CAAY,GAAZ,CAHI,CAAN,CAD2C;SAA7C;AAOA,YAAM,OAAO,WAAW,gBAAX,CAA4B,KAA5B,IAAqC,IAAI,IAAJ,GAAW,IAAhD,CArBe;AAsB5B,eAAO,EAAE,KAAF,CAAQ,MAAR,EAAgB,IAAhB,EAAsB,GAAtB,CAAP,CAtB4B;OAA9B;AAwBA,eAAS,iBAAT,CAA2B,KAA3B,EAAkC;AAChC,eAAO,EAAE,MAAF,CAAS,MAAM,IAAN,CAAT,CACL,EAAE,IAAF,CAAO,KAAP,CADK,EAEL,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,MAAT,EAAgB,SAAhB,CAAT,CAFK,EAGL,UAAC,IAAD;iBAAU,KAAC,CAAM,KAAN,CAAY,GAAZ,IAAmB,KAAK,MAAL,GAAY,CAAZ,GAAiB,CAArC,GAAyC,MAAM,KAAN,CAAY,GAAZ,GAAkB,CAAlB;SAAnD,EACA,UAAC,QAAD;iBAAc,EAAE,SAAF,CAAY,CAAC,OAAD,EAAS,KAAT,CAAZ,EAA6B,QAA7B,EAAuC,KAAvC;SAAd,CAJF,CADgC;OAAlC;AAQA,eAAS,oBAAT,CAA8B,GAA9B,EAAmC,KAAnC,EAA0C;AACxC,YAAM,SAAW,MACE,EAAE,OAAF,CAAU,EAAE,IAAF,EAAQ,EAAE,MAAF,CAAS,GAAT,CAAlB,CADF,GAEE,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,GAAT,CAAT,CAFF,CADuB;AAKxC,eAAO,EAAE,IAAF,CAAO,QAAP,EAAiB,MAAjB,EAAyB,KAAzB,CAAP,CALwC;OAA1C;AAOA,eAAS,uBAAT,CAAiC,KAAjC,EAAwC;AACtC,YAAM,SAAW,WAAW,gBAAX,CAA4B,KAA5B,IACE,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,GAAT,CAAT,CADF,GAEE,EAAE,MAAF,CAAS,GAAT,CAFF,CADqB;AAKtC,eAAO,EAAE,IAAF,CAAO,QAAP,EAAiB,MAAjB,EAAyB,KAAzB,CAAP,CALsC;OAAxC;AAOA,eAAS,gBAAT,OAAmC,OAAnC,EAA4C;YAAhB,eAAgB;;AAC1C,eAAO,EAAE,KAAK,IAAI,IAAJ,EAAd,CAD0C;OAA5C;KA5DK,CAFyB;GAAlC;CALD,CAAD","file":"image.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelImage', modelImageModelFactory);\n\n  modelImageModelFactory.$inject = [];\n  function modelImageModelFactory() {\n    const DSP_LENS = R.lensPath(['state','dsp']);\n    return (modelModel) => {\n      const modelImageModel = {\n        isImageDisplayed: modelIsImageDisplayed,\n        getImage: modelGetImage,\n        setNextImage: modelSetNextImage,\n        setImageDisplay: modelSetImageDisplay,\n        toggleImageDisplay: modelToggleImageDisplay,\n        renderImage: modelRenderImage\n      };\n      return modelImageModel;\n\n      function modelIsImageDisplayed(model) {\n        return !!R.find(R.equals('i'), R.viewOr([], DSP_LENS, model));\n      }\n      function modelGetImage(model) {\n        const info = model.info;\n        const info_img = info.img;\n        let img = R.thread(info_img)(\n          R.filter(R.propEq('type','default')),\n          R.prop(model.state.img)\n        );\n        if(modelModel.isLeaderDisplayed(model)) {\n          img = R.thread(info_img)(\n            R.filter(R.propEq('type','leader')),\n            R.head,\n            R.defaultTo(img)\n          );\n        }\n        if(modelModel.isIncorporealDisplayed(model)) {\n          img = R.thread(info_img)(\n            R.filter(R.propEq('type','incorporeal')),\n            R.head,\n            R.defaultTo(img)\n          );\n        }\n        const link = modelModel.isImageDisplayed(model) ? img.link : null;\n        return R.assoc('link', link, img);\n      }\n      function modelSetNextImage(model) {\n        return R.thread(model.info)(\n          R.prop('img'),\n          R.filter(R.propEq('type','default')),\n          (imgs) => (model.state.img >= imgs.length-1) ? 0 : model.state.img + 1,\n          (next_img) => R.assocPath(['state','img'], next_img, model)\n        );\n      }\n      function modelSetImageDisplay(set, model) {\n        const update = ( set\n                         ? R.compose(R.uniq, R.append('i'))\n                         : R.reject(R.equals('i'))\n                       );\n        return R.over(DSP_LENS, update, model);\n      }\n      function modelToggleImageDisplay(model) {\n        const update = ( modelModel.isImageDisplayed(model)\n                         ? R.reject(R.equals('i'))\n                         : R.append('i')\n                       );\n        return R.over(DSP_LENS, update, model);\n      }\n      function modelRenderImage({ img }, _model_) {\n        return { img: img.link };\n      }\n    };\n  }\n})();\n"]}
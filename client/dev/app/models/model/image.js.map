{"version":3,"sources":["image.es6"],"names":[],"mappings":"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","file":"image.js","sourcesContent":["angular.module('clickApp.services')\n  .factory('modelImage', [\n    'gameFactions',\n    function modelImageServiceFactory(gameFactionsService) {\n      return function(modelService) {\n        var modelImageService = {\n          isImageDisplayed: function modelIsImageDisplayed(model) {\n            return !!R.find(R.equals('i'), model.state.dsp);\n          },\n          getImage: function modelGetImage(factions, model) {\n            return R.pipeP(\n              gameFactionsService.getModelInfo$(model.state.info),\n              R.prop('img'),\n              function(info_img) {\n                var img = R.pipe(\n                  R.filter(R.propEq('type','default')),\n                  R.prop(model.state.img)\n                )(info_img);\n                if(modelService.isLeaderDisplayed(model)) {\n                  img = R.pipe(\n                    R.filter(R.propEq('type','leader')),\n                    R.head,\n                    R.defaultTo(img)\n                  )(info_img);\n                }\n                if(modelService.isIncorporealDisplayed(model)) {\n                  img = R.pipe(\n                    R.filter(R.propEq('type','incorporeal')),\n                    R.head,\n                    R.defaultTo(img)\n                  )(info_img);\n                }\n                var link = modelService.isImageDisplayed(model) ? img.link : null;\n                return R.assoc('link', link, img);\n              }\n            )(factions);\n          },\n          setNextImage: function modelSetNextImage(factions, model) {\n            return R.pipeP(\n              gameFactionsService.getModelInfo$(model.state.info),\n              R.prop('img'),\n              R.filter(R.propEq('type','default')),\n              function(imgs) {\n                return (model.state.img >= imgs.length-1) ? 0 : model.state.img + 1;\n              },\n              function(next_img) {\n                return R.assocPath(['state','img'], next_img, model);\n              }\n            )(factions);\n          },\n          setImageDisplay: function modelSetImageDisplay(set, model) {\n            if(set) {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.compose(R.uniq, R.append('i')),\n                            model);\n            }\n            else {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.reject(R.equals('i')),\n                            model);\n            }\n          },\n          toggleImageDisplay: function modelToggleImageDisplay(model) {\n            if(modelService.isImageDisplayed(model)) {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.reject(R.equals('i')),\n                            model);\n            }\n            else {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.append('i'),\n                            model);\n            }\n          }\n        };\n        return modelImageService;\n      };\n    }\n  ]);\n"]}
{"version":3,"sources":["image.es6"],"names":[],"mappings":"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","file":"image.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelImage', modelImageModelFactory);\n\n  modelImageModelFactory.$inject = [\n    'gameFactions',\n  ];\n  function modelImageModelFactory(gameFactionsModel) {\n    return (modelModel) => {\n      const modelImageModel = {\n        isImageDisplayed: modelIsImageDisplayed,\n        getImageP: modelGetImageP,\n        setNextImageP: modelSetNextImageP,\n        setImageDisplay: modelSetImageDisplay,\n        toggleImageDisplay: modelToggleImageDisplay\n      };\n      return modelImageModel;\n\n      function modelIsImageDisplayed(model) {\n        return !!R.find(R.equals('i'), model.state.dsp);\n      }\n      function modelGetImageP(factions, model) {\n        return R.threadP(factions)(\n          gameFactionsModel.getModelInfoP$(model.state.info),\n          R.prop('img'),\n          (info_img) => {\n            let img = R.thread(info_img)(\n              R.filter(R.propEq('type','default')),\n              R.prop(model.state.img)\n            );\n            if(modelModel.isLeaderDisplayed(model)) {\n              img = R.thread(info_img)(\n                R.filter(R.propEq('type','leader')),\n                R.head,\n                R.defaultTo(img)\n              );\n            }\n            if(modelModel.isIncorporealDisplayed(model)) {\n              img = R.thread(info_img)(\n                R.filter(R.propEq('type','incorporeal')),\n                R.head,\n                R.defaultTo(img)\n              );\n            }\n            const link = modelModel.isImageDisplayed(model) ? img.link : null;\n            return R.assoc('link', link, img);\n          }\n        );\n      }\n      function modelSetNextImageP(factions, model) {\n        return R.threadP(factions)(\n          gameFactionsModel.getModelInfoP$(model.state.info),\n          R.prop('img'),\n          R.filter(R.propEq('type','default')),\n          (imgs) => {\n            return (model.state.img >= imgs.length-1) ? 0 : model.state.img + 1;\n          },\n          (next_img) => R.assocPath(['state','img'], next_img, model)\n        );\n      }\n      function modelSetImageDisplay(set, model) {\n        if(set) {\n          return R.over(R.lensPath(['state','dsp']),\n                        R.compose(R.uniq, R.append('i')),\n                        model);\n        }\n        else {\n          return R.over(R.lensPath(['state','dsp']),\n                        R.reject(R.equals('i')),\n                        model);\n        }\n      }\n      function modelToggleImageDisplay(model) {\n        if(modelModel.isImageDisplayed(model)) {\n          return R.over(R.lensPath(['state','dsp']),\n                        R.reject(R.equals('i')),\n                        model);\n        }\n        else {\n          return R.over(R.lensPath(['state','dsp']),\n                        R.append('i'),\n                        model);\n        }\n      }\n    };\n  }\n})();\n"]}
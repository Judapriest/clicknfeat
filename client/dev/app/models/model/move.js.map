{"version":3,"sources":["move.es6"],"names":[],"mappings":"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","file":"move.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('modelMove', [\n    'settings',\n    'point',\n    function modelMoveServiceFactory(settingsService,\n                                     pointService) {\n      return function(MOVES, modelService) {\n        var modelMoveService = {\n          setPosition: function modelSetPosition(factions, target, pos, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n            \n            model = R.pipe(\n              R.assocPath(['state','x'], pos.x),\n              R.assocPath(['state','y'], pos.y)\n            )(model);\n            return modelService.checkState(factions, target, model);\n          },\n          setPosition_: function modelSetPosition(factions, target, pos, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n            \n            model.state = R.pipe(\n              R.assoc('x', pos.x),\n              R.assoc('y', pos.y)\n            )(model.state);\n            return R.pipePromise(\n              () => { return modelService.checkState(factions, target, model); },\n              (check) => {\n                model.state = check.state;\n                return model;\n              }\n            )();\n          },\n          shiftPosition: function modelSet(factions, target, shift, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            model = R.pipe(\n              R.over(R.lensPath(['state','x']), R.add(shift.x)),\n              R.over(R.lensPath(['state','y']), R.add(shift.y))\n            )(model);\n            return modelService.checkState(factions, target, model);\n          },\n          setOrientation: function modelSet(factions, orientation, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            model = R.assocPath(['state','r'], orientation, model);\n            return modelService.checkState(factions, null, model);\n          },\n          orientTo: function modelSet(factions, other, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            model = R.assocPath(['state','r'],\n                                pointService.directionTo(other.state, model.state),\n                                model);\n            return modelService.checkState(factions, null, model);\n          },\n          moveFront: function modelMoveFront(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'MoveSmall' : 'Move'];\n            model = R.over(R.lensProp('state'),\n                           pointService.moveFront$(dist),\n                           model);\n            return modelService.checkState(factions, null, model);\n          },\n          moveBack: function modelMoveBack(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'MoveSmall' : 'Move'];\n            model = R.over(R.lensProp('state'),\n                           pointService.moveBack$(dist),\n                           model);\n            return modelService.checkState(factions, null, model);\n          },\n          rotateLeft: function modelRotateLeft(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var angle = MOVES[small ? 'RotateSmall' : 'Rotate'];\n            model = R.over(R.lensProp('state'),\n                           pointService.rotateLeft$(angle),\n                           model);\n            return modelService.checkState(factions, null, model);\n          },\n          rotateRight: function modelRotateRight(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var angle = MOVES[small ? 'RotateSmall' : 'Rotate'];\n            model = R.over(R.lensProp('state'),\n                           pointService.rotateRight$(angle),\n                           model);\n            return modelService.checkState(factions, null, model);\n          },\n          shiftLeft: function modelShiftLeft(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n            model = R.over(R.lensProp('state'),\n                           pointService.shiftLeft$(dist),\n                           model);\n            return modelService.checkState(factions, null, model);\n          },\n          shiftRight: function modelShiftRight(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n            model = R.over(R.lensProp('state'),\n                           pointService.shiftRight$(dist),\n                           model);\n            return modelService.checkState(factions, null, model);\n          },\n          shiftUp: function modelShiftUp(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n            model = R.over(R.lensProp('state'),\n                           pointService.shiftUp$(dist),\n                           model);\n            return modelService.checkState(factions, null, model);\n          },\n          shiftDown: function modelShiftDown(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n            model = R.over(R.lensProp('state'),\n                           pointService.shiftDown$(dist),\n                           model);\n            return modelService.checkState(factions, null, model);\n          }\n        };\n        return modelMoveService;\n      };\n    }\n  ]);\n"]}
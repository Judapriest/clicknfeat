{"version":3,"sources":["wreck.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,YADX,EACyB,sBADzB,EADU;;AAIV,yBAAuB,OAAvB,GAAiC,CAC/B,cAD+B,CAAjC,CAJU;AAOV,WAAS,sBAAT,CAAgC,iBAAhC,EAAmD;AACjD,WAAO,UAAC,UAAD,EAAgB;AACrB,UAAM,kBAAkB;AACtB,0BAAkB,qBAAlB;AACA,wBAAgB,mBAAhB;AACA,yBAAiB,oBAAjB;AACA,4BAAoB,uBAApB;OAJI,CADe;AAOrB,aAAO,eAAP,CAPqB;;AASrB,eAAS,qBAAT,CAA+B,KAA/B,EAAsC;AACpC,eAAO,CAAC,CAAC,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,GAAT,CAAP,EAAsB,MAAM,KAAN,CAAY,GAAZ,CAAvB,CAD4B;OAAtC;AAGA,eAAS,mBAAT,CAA6B,QAA7B,EAAuC,KAAvC,EAA8C;AAC5C,eAAO,EAAE,OAAF,CAAU,QAAV,EACL,kBAAkB,cAAlB,CAAiC,MAAM,KAAN,CAAY,IAAZ,CAD5B,EAEL,EAAE,IAAF,CAAO,KAAP,CAFK,EAGL,UAAC,QAAD;iBAAc,EAAE,MAAF,CAAS,QAAT,EACZ,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,MAAT,EAAgB,OAAhB,CAAP,CADY,EAEZ,EAAE,SAAF,CAAY,EAAE,MAAF,CAAS,QAAT,EACV,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,MAAT,EAAgB,SAAhB,CAAP,CADU,EAEV,EAAE,SAAF,CAAY,EAAZ,CAFU,EAGV,EAAE,KAAF,CAAQ,MAAR,EAAgB,IAAhB,CAHU,CAAZ,CAFY;SAAd,EAQA,UAAC,GAAD,EAAS;AACP,cAAM,OAAO,WAAW,gBAAX,CAA4B,KAA5B,IAAqC,IAAI,IAAJ,GAAW,IAAhD,CADN;AAEP,iBAAO,EAAE,KAAF,CAAQ,MAAR,EAAgB,IAAhB,EAAsB,GAAtB,CAAP,CAFO;SAAT,CAXF,CAD4C;OAA9C;AAkBA,eAAS,oBAAT,CAA8B,GAA9B,EAAmC,KAAnC,EAA0C;AACxC,YAAG,GAAH,EAAQ;AACN,iBAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAP,EACO,EAAE,OAAF,CAAU,EAAE,IAAF,EAAQ,EAAE,MAAF,CAAS,GAAT,CAAlB,CADP,EAEO,KAFP,CAAP,CADM;SAAR,MAKK;AACH,iBAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAP,EACO,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,GAAT,CAAT,CADP,EAEO,KAFP,CAAP,CADG;SALL;OADF;AAYA,eAAS,uBAAT,CAAiC,KAAjC,EAAwC;AACtC,YAAG,WAAW,gBAAX,CAA4B,KAA5B,CAAH,EAAuC;AACrC,iBAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAP,EACO,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,GAAT,CAAT,CADP,EAEO,KAFP,CAAP,CADqC;SAAvC,MAKK;AACH,iBAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAP,EACO,EAAE,MAAF,CAAS,GAAT,CADP,EAEO,KAFP,CAAP,CADG;SALL;OADF;KA1CK,CAD0C;GAAnD;CAPD,CAAD","file":"wreck.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelWreck', modelWreckModelFactory);\n\n  modelWreckModelFactory.$inject = [\n    'gameFactions',\n  ];\n  function modelWreckModelFactory(gameFactionsModel) {\n    return (modelModel) => {\n      const modelWreckModel = {\n        isWreckDisplayed: modelIsWreckDisplayed,\n        getWreckImageP: modelGetWreckImageP,\n        setWreckDisplay: modelSetWreckDisplay,\n        toggleWreckDisplay: modelToggleWreckDisplay\n      };\n      return modelWreckModel;\n\n      function modelIsWreckDisplayed(model) {\n        return !!R.find(R.equals('w'), model.state.dsp);\n      }\n      function modelGetWreckImageP(factions, model) {\n        return R.threadP(factions)(\n          gameFactionsModel.getModelInfoP$(model.state.info),\n          R.prop('img'),\n          (info_img) => R.thread(info_img)(\n            R.find(R.propEq('type','wreck')),\n            R.defaultTo(R.thread(info_img)(\n              R.find(R.propEq('type','default')),\n              R.defaultTo({}),\n              R.assoc('link', null)\n            ))\n          ),\n          (img) => {\n            const link = modelModel.isImageDisplayed(model) ? img.link : null;\n            return R.assoc('link', link, img);\n          }\n        );\n      }\n      function modelSetWreckDisplay(set, model) {\n        if(set) {\n          return R.over(R.lensPath(['state','dsp']),\n                        R.compose(R.uniq, R.append('w')),\n                        model);\n        }\n        else {\n          return R.over(R.lensPath(['state','dsp']),\n                        R.reject(R.equals('w')),\n                        model);\n        }\n      }\n      function modelToggleWreckDisplay(model) {\n        if(modelModel.isWreckDisplayed(model)) {\n          return R.over(R.lensPath(['state','dsp']),\n                        R.reject(R.equals('w')),\n                        model);\n        }\n        else {\n          return R.over(R.lensPath(['state','dsp']),\n                        R.append('w'),\n                        model);\n        }\n      }\n    };\n  }\n})();\n"]}
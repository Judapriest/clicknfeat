{"version":3,"sources":["wreck.es6"],"names":[],"mappings":"AAAA;;AAEA,QAAQ,MAAR,CAAe,mBAAf,EACG,OADH,CACW,YADX,EACyB,CACrB,cADqB,EAErB,SAAS,wBAAT,CAAkC,mBAAlC,EAAuD;AACrD,SAAO,UAAS,YAAT,EAAuB;AAC5B,QAAI,oBAAoB;AACtB,wBAAkB,SAAS,qBAAT,CAA+B,KAA/B,EAAsC;AACtD,eAAO,CAAC,CAAC,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,GAAT,CAAP,EAAsB,MAAM,KAAN,CAAY,GAAZ,CAAvB,CAD8C;OAAtC;AAGlB,qBAAe,SAAS,kBAAT,CAA4B,QAA5B,EAAsC,KAAtC,EAA6C;AAC1D,eAAO,EAAE,KAAF,CACL,oBAAoB,aAApB,CAAkC,MAAM,KAAN,CAAY,IAAZ,CAD7B,EAEL,EAAE,IAAF,CAAO,KAAP,CAFK,EAGL,UAAS,QAAT,EAAmB;AACjB,cAAI,MAAM,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,MAAT,EAAgB,OAAhB,CAAP,EAAiC,QAAjC,CAAN,CADa;;AAGjB,cAAG,EAAE,KAAF,CAAQ,GAAR,CAAH,EAAiB;AACf,kBAAM,EAAE,IAAF,CACJ,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,MAAT,EAAgB,SAAhB,CAAP,CADI,EAEJ,EAAE,SAAF,CAAY,EAAZ,CAFI,EAGJ,EAAE,KAAF,CAAQ,MAAR,EAAgB,IAAhB,CAHI,EAIJ,QAJI,CAAN,CADe;WAAjB;;AAQA,iBAAO,GAAP,CAXiB;SAAnB,EAaA,UAAS,GAAT,EAAc;AACZ,cAAI,OAAO,aAAa,gBAAb,CAA8B,KAA9B,IAAuC,IAAI,IAAJ,GAAW,IAAlD,CADC;AAEZ,iBAAO,EAAE,KAAF,CAAQ,MAAR,EAAgB,IAAhB,EAAsB,GAAtB,CAAP,CAFY;SAAd,CAhBK,CAoBL,QApBK,CAAP,CAD0D;OAA7C;AAuBf,uBAAiB,SAAS,oBAAT,CAA8B,GAA9B,EAAmC,KAAnC,EAA0C;AACzD,YAAG,GAAH,EAAQ;AACN,iBAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAP,EACO,EAAE,OAAF,CAAU,EAAE,IAAF,EAAQ,EAAE,MAAF,CAAS,GAAT,CAAlB,CADP,EAEO,KAFP,CAAP,CADM;SAAR,MAKK;AACH,iBAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAP,EACO,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,GAAT,CAAT,CADP,EAEO,KAFP,CAAP,CADG;SALL;OADe;AAYjB,0BAAoB,SAAS,uBAAT,CAAiC,KAAjC,EAAwC;AAC1D,YAAG,aAAa,gBAAb,CAA8B,KAA9B,CAAH,EAAyC;AACvC,iBAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAP,EACO,EAAE,MAAF,CAAS,EAAE,MAAF,CAAS,GAAT,CAAT,CADP,EAEO,KAFP,CAAP,CADuC;SAAzC,MAKK;AACH,iBAAO,EAAE,IAAF,CAAO,EAAE,QAAF,CAAW,CAAC,OAAD,EAAS,KAAT,CAAX,CAAP,EACO,EAAE,MAAF,CAAS,GAAT,CADP,EAEO,KAFP,CAAP,CADG;SALL;OADkB;KAvClB,CADwB;AAqD5B,WAAO,iBAAP,CArD4B;GAAvB,CAD8C;CAAvD,CAHJ","file":"wreck.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('modelWreck', [\n    'gameFactions',\n    function modelWreckServiceFactory(gameFactionsService) {\n      return function(modelService) {\n        var modelWreckService = {\n          isWreckDisplayed: function modelIsWreckDisplayed(model) {\n            return !!R.find(R.equals('w'), model.state.dsp);\n          },\n          getWreckImage: function modelGetWreckImage(factions, model) {\n            return R.pipeP(\n              gameFactionsService.getModelInfo$(model.state.info),\n              R.prop('img'),\n              function(info_img) {\n                var img = R.find(R.propEq('type','wreck'), info_img);\n\n                if(R.isNil(img)) {\n                  img = R.pipe(\n                    R.find(R.propEq('type','default')),\n                    R.defaultTo({}),\n                    R.assoc('link', null)\n                  )(info_img);\n                }\n                \n                return img;\n              },\n              function(img) {\n                var link = modelService.isImageDisplayed(model) ? img.link : null;\n                return R.assoc('link', link, img);\n              }\n            )(factions);\n          },\n          setWreckDisplay: function modelSetWreckDisplay(set, model) {\n            if(set) {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.compose(R.uniq, R.append('w')),\n                            model);\n            }\n            else {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.reject(R.equals('w')),\n                            model);\n            }\n          },\n          toggleWreckDisplay: function modelToggleWreckDisplay(model) {\n            if(modelService.isWreckDisplayed(model)) {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.reject(R.equals('w')),\n                            model);\n            }\n            else {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.append('w'),\n                            model);\n            }\n          }\n        };\n        return modelWreckService;\n      };\n    }\n  ]);\n"]}
{"version":3,"sources":["area.es6"],"names":[],"mappings":"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","file":"area.js","sourcesContent":["(function() {\n  angular.module('clickApp.services')\n    .factory('modelArea', modelAreaModelFactory);\n\n  modelAreaModelFactory.$inject = [\n    'gameFactions',\n  ];\n  function modelAreaModelFactory(gameFactionsModel) {\n    const DSP_LENS = R.lensPath(['state','dsp']);\n    const AREA_LENS = R.lensPath(['state','are']);\n    return () => {\n      const modelAreaModel = {\n        isCtrlAreaDisplayed: modelIsCtrlAreaDisplayed,\n        setCtrlAreaDisplay: modelSetCtrlAreaDisplay,\n        toggleCtrlAreaDisplay: modelToggleCtrlAreaDisplay,\n        isAreaDisplayed: modelIsAreaDisplayed,\n        areaDisplay: modelAreaDisplay,\n        setAreaDisplay: modelSetAreaDisplay,\n        toggleAreaDisplay: modelToggleAreaDisplay,\n        renderArea: modelRenderArea\n      };\n      return modelAreaModel;\n\n      function modelIsCtrlAreaDisplayed(factions, model) {\n        return R.thread(factions)(\n          gameFactionsModel.getModelInfo$(model.state.info),\n          R.ifElse(\n            R.isNil,\n            () => false,\n            (info) => {\n              return ( info.type === 'wardude' &&\n                       ( 'Number' === R.type(info.focus) ||\n                         'Number' === R.type(info.fury)\n                       ) &&\n                       !!R.find(R.equals('a'), model.state.dsp)\n                     );\n            }\n          )\n        );\n      }\n      function modelSetCtrlAreaDisplay(set, model) {\n        const update = ( set\n                         ? R.compose(R.uniq, R.append('a'))\n                         : R.reject(R.equals('a'))\n                       );\n        return R.over(DSP_LENS, update, model);\n      }\n      function modelToggleCtrlAreaDisplay(model) {\n        const update = ( R.find(R.equals('a'), model.state.dsp)\n                         ? R.reject(R.equals('a'))\n                         : R.append('a')\n                       );\n        return R.over(DSP_LENS, update, model);\n      }\n      function modelIsAreaDisplayed(model) {\n        return R.exists(R.view(AREA_LENS, model));\n      }\n      function modelAreaDisplay(model) {\n        return R.view(AREA_LENS, model);\n      }\n      function modelSetAreaDisplay(area, model) {\n        return R.set(AREA_LENS, area, model);\n      }\n      function modelToggleAreaDisplay(area, model) {\n        return R.over(\n          AREA_LENS,\n          (are) => ((area === are) ? null : area),\n          model\n        );\n      }\n      function modelRenderArea({ info,\n                                 radius\n                               }, factions, state) {\n        const area = ( modelAreaModel.isAreaDisplayed({state})\n                       ? modelAreaModel.areaDisplay({state}) * 10 + radius\n                       : null\n                     );\n        const ctrl = ( modelAreaModel.isCtrlAreaDisplayed(factions, {state})\n                       ? (info.focus || info.fury) * 20 + radius\n                       : null\n                     );\n        return {\n          area,\n          ctrl\n        };\n      }\n    };\n  }\n})();\n"]}
{"version":3,"sources":["mailNotification.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,qBAAf,EACG,SADH,CACa,uBADb,EACsC,gCADtC,EADU;;AAIV,mCAAiC,OAAjC,GAA2C,CACzC,YADyC,CAA3C,CAJU;AAOV,WAAS,gCAAT,CAA0C,UAA1C,EAAsD;AACpD,WAAO;AACL,gBAAU,GAAV;AACA,aAAO,EAAE,MAAM,GAAN,EAAT;AACA,mBAAa,yDAAb;AACA,YAAM,IAAN;KAJF,CADoD;;AAQpD,aAAS,IAAT,CAAc,KAAd,EAAqB,OAArB,EAA8B;AAC5B,UAAM,QAAQ,QAAQ,CAAR,EAAW,aAAX,CAAyB,OAAzB,CAAR,CADsB;AAE5B,iBAAW,kBAAX,CAAiC,EAAE,UAAF,CAAa,MAAM,IAAN,WAA9C,EAC8B,MAD9B,EACsC,KADtC,EAF4B;;AAK5B,eAAS,MAAT,CAAgB,KAAhB,EAAuB,IAAvB,EAA6B;AAC3B,gBAAQ,GAAR,CAAe,MAAM,IAAN,qBAAf,EAA6C,KAA7C,EAAoD,IAApD,EAD2B;AAE3B,YAAG,EAAE,KAAF,CAAQ,IAAR,KAAiB,EAAE,KAAF,CAAQ,KAAK,IAAL,CAAzB,IACA,KAAK,IAAL,KAAc,WAAW,KAAX,CAAiB,IAAjB,CAAsB,KAAtB,CAA4B,KAA5B,IACd,KAAK,IAAL,KAAc,WAAW,KAAX,CAAiB,IAAjB,CAAsB,KAAtB,CAA4B,IAA5B,EAAkC,OAFnD;;AAIA,cAAM,WAAN,GAAoB,CAApB,CAN2B;AAO3B,cAAM,IAAN,GAP2B;OAA7B;KALF;GARF;CAPD,CAAD","file":"mailNotification.js","sourcesContent":["(function() {\n  angular.module('clickApp.directives')\n    .directive('clickMailNotification', mailNotificationDirectiveFactory);\n\n  mailNotificationDirectiveFactory.$inject = [\n    '$rootScope'\n  ];\n  function mailNotificationDirectiveFactory($rootScope) {\n    return {\n      restrict: 'E',\n      scope: { type: '@' },\n      templateUrl: 'app/components/mail_notification/mail_notification.html',\n      link: link\n    };\n\n    function link(scope, element) {\n      const audio = element[0].querySelector('audio');\n      $rootScope.onStateChangeEvent(`${s.capitalize(scope.type)}.chat`,\n                                    onChat, scope);\n\n      function onChat(event, chat) {\n        console.log(`${scope.type}MailNotification`, event, chat);\n        if(R.isNil(chat) || R.isNil(chat.from) ||\n           chat.from === $rootScope.state.user.state.stamp ||\n           chat.from === $rootScope.state.user.state.name) return;\n\n        audio.currentTime = 0;\n        audio.play();\n      }\n    }\n  }\n})();\n"]}
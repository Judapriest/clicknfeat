{"version":3,"sources":["modelDamage.es6"],"names":[],"mappings":"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","file":"modelDamage.js","sourcesContent":["angular.module('clickApp.directives')\n  .controller('clickGameModelDamageCtrl', [\n    '$scope',\n    function($scope) {\n      console.log('init clickModelDamageCtrl', $scope.info, $scope.state);\n      let state = $scope.$parent.state;\n\n      $scope.range = (n) => {\n        return R.range(0, n);\n      };\n\n      $scope.warriorBoxClass = (i) => {\n        return ($scope.state && $scope.state.dmg.n > i) ? 'mark' : '';\n      };\n      $scope.fieldBoxClass = (col, line) => {\n        return ($scope.state &&\n                $scope.state.dmg.f > line * $scope.info.field/2 + col) ? 'mark' : '';\n      };\n      $scope.gridBoxClass = (col, line) => {\n        return ( !$scope.info[col][line] ? 'none' :\n                 ($scope.state && $scope.state.dmg[col][line] === 1) ? 'mark' :\n                 ''\n               );\n      };\n      $scope.doResetDamage = () => {\n        if(R.isNil($scope.state)) return;\n\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'resetDamage', []\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n      $scope.doWarriorDamage = (i) => {\n        if(R.isNil($scope.state)) return;\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'setWarriorDamage',\n                                        [state.factions, i],\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n      $scope.doFieldDamage = (i) => {\n        if(R.isNil($scope.state)) return;\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'setFieldDamage',\n                                        [state.factions, i],\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n      $scope.doGridDamage = (line, col) => {\n        if(R.isNil($scope.state)) return;\n        if(R.isNil($scope.info[col][line])) return;\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'setGridDamage',\n                                        [state.factions, line, col],\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n      $scope.doGridColDamage = (col) => {\n        if(R.isNil($scope.state)) return;\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'setGridColDamage',\n                                        [state.factions, col],\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n    }\n  ])\n  .directive('clickGameModelDamage', [\n    function() {\n      return {\n        restrict: 'E',\n        scope: {\n          info: '=',\n          state: '=',\n          onError: '&'\n        },\n        controller: 'clickGameModelDamageCtrl',\n        templateUrl: 'partials/game/model_damage.html',\n        link: function(scope) {\n          console.log('gameModelDamage', scope);\n        }\n      };\n    }\n  ]);\n"]}
{"version":3,"sources":["base.es6"],"names":[],"mappings":"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","file":"base.js","sourcesContent":["(function() {\n\n  angular.module('clickApp.directives')\n    .factory('clickGameModelBase', gameModelBaseModelFactory);\n\n  gameModelBaseModelFactory.$inject = [\n    'model',\n  ];\n  function gameModelBaseModelFactory(modelService) {\n    return {\n      create: gameModelBaseCreate,\n      update: gameModelBaseUpdate\n    };\n\n    function gameModelBaseCreate(svgNS, info, model, parent) {\n      const base = document.createElementNS(svgNS, 'circle');\n      base.classList.add('model-base');\n      base.setAttribute('cx', (info.img[0].width/2)+'');\n      base.setAttribute('cy', (info.img[0].height/2)+'');\n      base.setAttribute('r', info.base_radius);\n      base.setAttribute('style', [\n        'fill:', info.base_color, ';',\n      ].join(''));\n      base.setAttribute('data-stamp', model.state.stamp);\n      parent.appendChild(base);\n\n      const title = document.createElementNS(svgNS, 'title');\n      base.appendChild(title);\n      title.innerHTML = modelService.descriptionFromInfo(info, model);\n\n      const direction = document.createElementNS(svgNS, 'line');\n      direction.classList.add('model-los');\n      direction.setAttribute('x1', (info.img[0].width/2)+'');\n      direction.setAttribute('y1', (info.img[0].height/2)+'');\n      direction.setAttribute('x2', (info.img[0].width/2)+'');\n      direction.setAttribute('y2', (info.img[0].height/2-info.base_radius)+'');\n      parent.appendChild(direction);\n\n      const front_arc = document.createElementNS(svgNS, 'line');\n      front_arc.classList.add('model-los');\n      front_arc.setAttribute('x1', (info.img[0].width/2-info.base_radius)+'');\n      front_arc.setAttribute('y1', (info.img[0].height/2)+'');\n      front_arc.setAttribute('x2', (info.img[0].width/2+info.base_radius)+'');\n      front_arc.setAttribute('y2', (info.img[0].height/2)+'');\n      parent.appendChild(front_arc);\n\n      const image = document.createElementNS(svgNS, 'image');\n      image.classList.add('model-image');\n      image.setAttribute('x', '0');\n      image.setAttribute('y', '0');\n      parent.appendChild(image);\n\n      const edge = document.createElementNS(svgNS, 'circle');\n      edge.classList.add('model-edge');\n      edge.setAttribute('cx', (info.img[0].width/2)+'');\n      edge.setAttribute('cy', (info.img[0].height/2)+'');\n      edge.setAttribute('r', info.base_radius);\n      parent.appendChild(edge);\n\n      return [ base, direction, front_arc, image, edge ];\n    }\n    function gameModelBaseUpdate(_info_, _model_, img, element) {\n      const [ _base_, _direction_, _front_arc_, image, _edge_ ] = element;\n\n      image.setAttribute('width', img.width+'');\n      image.setAttribute('height', img.height+'');\n      if(R.exists(img.link)) {\n        image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', img.link);\n        image.style.visibility = 'visible';\n      }\n      else {\n        image.style.visibility = 'hidden';\n      }\n    }\n  }\n})();\n"]}
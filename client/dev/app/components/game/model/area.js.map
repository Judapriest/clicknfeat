{"version":3,"sources":["area.es6"],"names":[],"mappings":";;;;AAAA,QAAQ,MAAR,CAAe,qBAAf,EACG,OADH,CACW,oBADX,EACiC,CAC7B,OAD6B,EAE7B,UAAS,YAAT,EAAuB;AACrB,SAAO;AACL,YAAQ,SAAS,wBAAT,CAAkC,KAAlC,EAAyC,MAAzC,EAAiD;AACvD,UAAI,YAAY,SAAS,eAAT,CAAyB,KAAzB,EAAgC,QAAhC,CAAZ,CADmD;AAEvD,gBAAU,SAAV,CAAoB,GAApB,CAAwB,iBAAxB,EAFuD;AAGvD,gBAAU,YAAV,CAAuB,IAAvB,EAA6B,GAA7B,EAHuD;AAIvD,gBAAU,YAAV,CAAuB,IAAvB,EAA6B,GAA7B,EAJuD;AAKvD,gBAAU,YAAV,CAAuB,GAAvB,EAA4B,GAA5B,EALuD;AAMvD,gBAAU,KAAV,CAAgB,UAAhB,GAA6B,QAA7B,CANuD;AAOvD,aAAO,WAAP,CAAmB,SAAnB,EAPuD;;AASvD,UAAI,OAAO,SAAS,eAAT,CAAyB,KAAzB,EAAgC,QAAhC,CAAP,CATmD;AAUvD,WAAK,SAAL,CAAe,GAAf,CAAmB,YAAnB,EAVuD;AAWvD,WAAK,YAAL,CAAkB,IAAlB,EAAwB,GAAxB,EAXuD;AAYvD,WAAK,YAAL,CAAkB,IAAlB,EAAwB,GAAxB,EAZuD;AAavD,WAAK,YAAL,CAAkB,GAAlB,EAAuB,GAAvB,EAbuD;AAcvD,WAAK,KAAL,CAAW,UAAX,GAAwB,QAAxB,CAduD;AAevD,aAAO,WAAP,CAAmB,IAAnB,EAfuD;;AAiBvD,aAAO,CAAE,IAAF,EAAQ,SAAR,CAAP,CAjBuD;KAAjD;AAmBR,YAAQ,SAAS,wBAAT,CAAkC,QAAlC,EAA4C,IAA5C,EAAkD,KAAlD,EAAyD,GAAzD,EAA8D,OAA9D,EAAuE;oCACrD,YADqD;;UACxE,mBADwE;UAClE,wBADkE;;AAG7E,gBAAU,YAAV,CAAuB,IAAvB,EAA6B,GAAC,CAAI,KAAJ,GAAU,CAAV,GAAa,EAAd,CAA7B,CAH6E;AAI7E,gBAAU,YAAV,CAAuB,IAAvB,EAA6B,GAAC,CAAI,MAAJ,GAAW,CAAX,GAAc,EAAf,CAA7B,CAJ6E;AAK7E,mBAAa,mBAAb,CAAiC,QAAjC,EAA2C,KAA3C,EACG,IADH,CACQ,UAAC,YAAD,EAAkB;AACtB,YAAG,YAAH,EAAiB;AACf,cAAI,SAAU,CAAC,KAAK,KAAL,IAAc,KAAK,IAAL,CAAf,GAA0B,EAA1B,GAA+B,KAAK,WAAL,CAD9B;AAEf,oBAAU,YAAV,CAAuB,GAAvB,EAA4B,SAAO,EAAP,CAA5B,CAFe;AAGf,oBAAU,KAAV,CAAgB,UAAhB,GAA6B,SAA7B,CAHe;SAAjB,MAKK;AACH,oBAAU,KAAV,CAAgB,UAAhB,GAA6B,QAA7B,CADG;SALL;OADI,CADR,CAL6E;;AAiB7E,WAAK,YAAL,CAAkB,IAAlB,EAAwB,GAAC,CAAI,KAAJ,GAAU,CAAV,GAAa,EAAd,CAAxB,CAjB6E;AAkB7E,WAAK,YAAL,CAAkB,IAAlB,EAAwB,GAAC,CAAI,MAAJ,GAAW,CAAX,GAAc,EAAf,CAAxB,CAlB6E;AAmB7E,UAAG,aAAa,eAAb,CAA6B,KAA7B,CAAH,EAAwC;AACtC,aAAK,YAAL,CAAkB,GAAlB,EAAuB,KAAC,CAAM,KAAN,CAAY,GAAZ,GAAkB,EAAlB,GAAuB,KAAK,WAAL,GAAkB,EAA1C,CAAvB,CADsC;AAEtC,aAAK,KAAL,CAAW,UAAX,GAAwB,SAAxB,CAFsC;OAAxC,MAIK;AACH,aAAK,KAAL,CAAW,UAAX,GAAwB,QAAxB,CADG;OAJL;KAnBM;GApBV,CADqB;CAAvB,CAHJ","file":"area.js","sourcesContent":["angular.module('clickApp.directives')\n  .factory('clickGameModelArea', [\n    'model',\n    function(modelService) {\n      return {\n        create: function clickGameModelAreaCreate(svgNS, parent) {\n          let ctrl_area = document.createElementNS(svgNS, 'circle');\n          ctrl_area.classList.add('model-ctrl-area');\n          ctrl_area.setAttribute('cx', '0');\n          ctrl_area.setAttribute('cy', '0');\n          ctrl_area.setAttribute('r', '0');\n          ctrl_area.style.visibility = 'hidden';\n          parent.appendChild(ctrl_area);\n\n          let area = document.createElementNS(svgNS, 'circle');\n          area.classList.add('model-area');\n          area.setAttribute('cx', '0');\n          area.setAttribute('cy', '0');\n          area.setAttribute('r', '0');\n          area.style.visibility = 'hidden';\n          parent.appendChild(area);\n\n          return [ area, ctrl_area ];\n        },\n        update: function clickGameModelAreaUpdate(factions, info, model, img, element) {\n          let [area, ctrl_area] = element;\n\n          ctrl_area.setAttribute('cx', (img.width/2)+'');\n          ctrl_area.setAttribute('cy', (img.height/2)+'');\n          modelService.isCtrlAreaDisplayed(factions, model)\n            .then((is_displayed) => {\n              if(is_displayed) {\n                let radius = ((info.focus || info.fury)*20 + info.base_radius);\n                ctrl_area.setAttribute('r', radius+'');\n                ctrl_area.style.visibility = 'visible';\n              }\n              else {\n                ctrl_area.style.visibility = 'hidden';\n              }\n            });\n\n          area.setAttribute('cx', (img.width/2)+'');\n          area.setAttribute('cy', (img.height/2)+'');\n          if(modelService.isAreaDisplayed(model)) {\n            area.setAttribute('r', (model.state.are * 10 + info.base_radius)+'');\n            area.style.visibility = 'visible';\n          }\n          else {\n            area.style.visibility = 'hidden';\n          }\n        }\n      };\n    }\n  ]);\n"]}
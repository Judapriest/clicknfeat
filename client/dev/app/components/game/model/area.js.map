{"version":3,"sources":["area.es6"],"names":[],"mappings":"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","file":"area.js","sourcesContent":["(function() {\n  angular.module('clickApp.directives')\n    .factory('clickGameModelArea', gameModelAreaModelFactory);\n\n  gameModelAreaModelFactory.$inject = [\n    'model',\n  ];\n  function gameModelAreaModelFactory(modelService) {\n    return {\n      create: gameModelAreaCreate,\n      update: gameModelAreaUpdate\n    };\n\n    function gameModelAreaCreate(svgNS, parent) {\n      const ctrl_area = document.createElementNS(svgNS, 'circle');\n      ctrl_area.classList.add('model-ctrl-area');\n      ctrl_area.setAttribute('cx', '0');\n      ctrl_area.setAttribute('cy', '0');\n      ctrl_area.setAttribute('r', '0');\n      ctrl_area.style.visibility = 'hidden';\n      parent.appendChild(ctrl_area);\n\n      const area = document.createElementNS(svgNS, 'circle');\n      area.classList.add('model-area');\n      area.setAttribute('cx', '0');\n      area.setAttribute('cy', '0');\n      area.setAttribute('r', '0');\n      area.style.visibility = 'hidden';\n      parent.appendChild(area);\n\n      return [ area, ctrl_area ];\n    }\n    function gameModelAreaUpdate(factions, info, model, img, element) {\n      const [area, ctrl_area] = element;\n\n      ctrl_area.setAttribute('cx', (img.width/2)+'');\n      ctrl_area.setAttribute('cy', (img.height/2)+'');\n      modelService\n        .isCtrlAreaDisplayedP(factions, model)\n        .then((is_displayed) => {\n          if(is_displayed) {\n            let radius = ((info.focus || info.fury)*20 + info.base_radius);\n            ctrl_area.setAttribute('r', radius+'');\n            ctrl_area.style.visibility = 'visible';\n          }\n          else {\n            ctrl_area.style.visibility = 'hidden';\n          }\n        });\n\n      area.setAttribute('cx', (img.width/2)+'');\n      area.setAttribute('cy', (img.height/2)+'');\n      if(modelService.isAreaDisplayed(model)) {\n        area.setAttribute('r', (model.state.are * 10 + info.base_radius)+'');\n        area.style.visibility = 'visible';\n      }\n      else {\n        area.style.visibility = 'hidden';\n      }\n    }\n  }\n})();\n"]}
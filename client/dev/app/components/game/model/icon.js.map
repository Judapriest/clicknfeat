{"version":3,"sources":["icon.es6"],"names":[],"mappings":"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","file":"icon.js","sourcesContent":["angular.module('clickApp.directives')\n  .factory('clickGameModelIcon', [\n    'model',\n    function(modelService) {\n      let EFFECTS = [\n        [ 'b', '/data/icons/Blind.png' ],\n        [ 'c', '/data/icons/Corrosion.png' ],\n        [ 'd', '/data/icons/BoltBlue.png' ],\n        [ 'f', '/data/icons/Fire.png' ],\n        [ 'e', '/data/icons/BoltYellow.png' ],\n        [ 'k', '/data/icons/KD.png' ],\n        [ 't', '/data/icons/Stationary.png' ],\n      ];\n\n      return {\n        create: function clickGameModelInconsCreate(svgNS, parent) {\n          let effects = R.reduce(function(mem, effect) {\n            let image = document.createElementNS(svgNS, 'image');\n            image.classList.add('model-image');\n            image.setAttribute('x', '0');\n            image.setAttribute('y', '0');\n            image.setAttribute('width', '10');\n            image.setAttribute('height', '10');\n            image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', effect[1]);\n            image.style.visibility = 'hidden';\n            parent.appendChild(image);\n            return R.assoc(effect[0], image, mem);\n          }, {}, EFFECTS);\n\n          let leader = document.createElementNS(svgNS, 'image');\n          leader.classList.add('model-image');\n          leader.setAttribute('x', '0');\n          leader.setAttribute('y', '0');\n          leader.setAttribute('width', '10');\n          leader.setAttribute('height', '10');\n          leader.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '/data/icons/Leader.png');\n          parent.appendChild(leader);\n\n          let lock = document.createElementNS(svgNS, 'image');\n          lock.classList.add('model-image');\n          lock.setAttribute('x', '0');\n          lock.setAttribute('y', '0');\n          lock.setAttribute('width', '10');\n          lock.setAttribute('height', '10');\n          lock.setAttributeNS('http://www.w3.org/1999/xlink',\n                              'href', '/data/icons/Lock.png');\n          lock.style.visibility = 'visible';\n          parent.appendChild(lock);\n\n          return [ effects, leader, lock ];\n        },\n        update: function clickGameModelIconsUpdate(info, model, img, element) {\n          let [ effects, leader, lock ] = element;\n\n          R.pipe(\n            R.keys,\n            R.filter((effect) => {\n              return modelService.isEffectDisplayed(effect, model);\n            }),\n            (actives) => {\n              let base_x = img.width / 2 - (R.length(actives) * 10 / 2);\n              let base_y = img.height / 2 + info.base_radius + 1;\n              R.addIndex(R.forEach)((effect, i) => {\n                effects[effect].setAttribute('x', (base_x + i * 10)+'');\n                effects[effect].setAttribute('y', (base_y)+'');\n                effects[effect].style.visibility = 'visible';\n              }, actives);\n            }\n          )(effects);\n          R.pipe(\n            R.keys,\n            R.reject((effect) => {\n              return modelService.isEffectDisplayed(effect, model);\n            }),\n            R.forEach((effect) => {\n              effects[effect].style.visibility = 'hidden';\n            })\n          )(effects);\n\n          leader.setAttribute('x', (img.width / 2 - 0.7 * info.base_radius - 5)+'');\n          leader.setAttribute('y', (img.height / 2 - 0.7 * info.base_radius - 5)+'');\n          if(modelService.isLeaderDisplayed(model)) {\n            leader.style.visibility = 'visible';\n          }\n          else {\n            leader.style.visibility = 'hidden';\n          }\n\n          if(!modelService.isLocked(model)) {\n            lock.style.visibility = 'hidden';\n            return;\n          }\n          lock.setAttribute('x', (img.width/2+info.base_radius-5)+'');\n          lock.setAttribute('y', (img.height/2-5)+'');\n          lock.style.visibility = 'visible';\n        }\n      };\n    }\n  ]);\n"]}
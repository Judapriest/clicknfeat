{"version":3,"sources":["gameLos.es6"],"names":[],"mappings":";;;;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,qBAAf,EACG,SADH,CACa,cADb,EAC6B,uBAD7B,EAEG,SAFH,CAEa,uBAFb,EAEsC,gCAFtC,EADU;;AAKV,0BAAwB,OAAxB,GAAkC,CAChC,SADgC,EAEhC,UAFgC,EAGhC,OAHgC,EAIhC,SAJgC,CAAlC,CALU;AAWV,WAAS,uBAAT,CAAiC,cAAjC,EACiC,eADjC,EAEiC,UAFjC,EAGiC,YAHjC,EAG+C;AAC7C,WAAO;AACL,gBAAU,GAAV;AACA,aAAO,IAAP;AACA,mBAAa,kCAAb;AACA,YAAM,IAAN;KAJF,CAD6C;;AAQ7C,aAAS,IAAT,CAAc,KAAd,EAAqB;AACnB,YAAM,YAAN,CAAmB,SAAnB,EAA8B,eAAe,GAAf,CAAmB,OAAnB,EAA4B,KAA1D,EADmB;;AAGnB,cAHmB;;AAKnB,eAAS,KAAT,GAAiB;AACf,YAAM,QAAQ,gBAAgB,KAAhB,CAAsB,MAAtB,EAAR,CADS;AAEf,YAAM,SAAS,eAAe,MAAf,CAAsB,MAAtB,CAA6B,MAA7B,EAAT,CAFS;AAGf,YAAM,MAAM,eAAe,GAAf,CAAmB,GAAnB,CAAuB,MAAvB,EAAN,CAHS;;AAKf,kBAAU,CAAC,KAAD,EAAQ,MAAR,EAAgB,GAAhB,CAAV,EALe;OAAjB;AAOA,eAAS,SAAT,OAAyC;;;YAArB,iBAAqB;YAAd,kBAAc;YAAN,eAAM;;AACvC,YAAM,cAAc,WACX,eADW,CACK,KADL,MACgB,KADhB,CADmB;AAGvC,cAAM,MAAN,GAAe,aACZ,MADY,CACL,EAAE,wBAAF;AACE,kBAAQ,MAAR,EAFG,EAEe,GAFf,CAAf,CAHuC;AAMvC,gBAAQ,IAAR,CAAa,YAAb,EAA2B,SAA3B,EAAsC,MAAM,MAAN,CAAtC,CANuC;OAAzC;KAZF;GAXF;;AAkCA,mCAAiC,OAAjC,GAA2C,CACzC,SADyC,EAEzC,SAFyC,CAA3C,CA7CU;AAiDV,WAAS,gCAAT,CAA0C,cAA1C,EAC0C,YAD1C,EACwD;AACtD,WAAO;AACL,gBAAU,GAAV;AACA,aAAO,IAAP;AACA,mBAAa,4CAAb;AACA,YAAM,IAAN;KAJF,CADsD;AAOtD,aAAS,IAAT,CAAc,KAAd,EAAqB;AACnB,YAAM,YAAN,CAAmB,cAAnB,EAAmC,eAAe,GAAf,CAAmB,OAAnB,EAA4B,KAA/D,EADmB;AAEnB,eAAS,cAAT,QAAgD;;;YAAvB,mBAAuB;YAAd,kBAAc;YAAN,eAAM;;AAC9C,cAAM,MAAN,GAAe,aAAa,eAAb,CAA6B,MAA7B,EAAqC,GAArC,CAAf,CAD8C;AAE9C,YAAM,YAAY,SAAS,aAAT,CAAuB,mBAAvB,CAAZ,CAFwC;AAG9C,kBAAU,YAAV,CAAuB,QAAvB,EAAiC,MAAM,MAAN,CAAa,SAAb,CAAjC,CAH8C;AAI9C,gBAAQ,IAAR,CAAa,sBAAb,EAAqC,SAArC,EAAgD,MAAM,MAAN,CAAhD,CAJ8C;OAAhD;KAFF;GARF;CAjDD,CAAD","file":"gameLos.js","sourcesContent":["(function() {\n  angular.module('clickApp.directives')\n    .directive('clickGameLos', gameLosDirectiveFactory)\n    .directive('clickGameLosEnveloppe', gameLosEnveloppeDirectiveFactory);\n\n  gameLosDirectiveFactory.$inject = [\n    'appGame',\n    'appModes',\n    'modes',\n    'gameLos',\n  ];\n  function gameLosDirectiveFactory(appGameService,\n                                   appModesService,\n                                   modesModel,\n                                   gameLosModel) {\n    return {\n      restrict: 'A',\n      scope: true,\n      templateUrl: 'app/components/game/los/los.html',\n      link: link\n    };\n\n    function link(scope) {\n      scope.listenSignal(updateLos, appGameService.los.changes, scope);\n\n      mount();\n\n      function mount() {\n        const modes = appModesService.modes.sample();\n        const models = appGameService.models.models.sample();\n        const los = appGameService.los.los.sample();\n\n        updateLos([modes, models, los]);\n      }\n      function updateLos([modes, models, los]) {\n        const in_los_mode = modesModel\n                .currentModeName(modes) === 'Los';\n        scope.render = gameLosModel\n          .render({ in_los_mode,\n                    models: models }, los);\n        console.warn('RENDER LOS', arguments, scope.render);\n      }\n    }\n  }\n\n  gameLosEnveloppeDirectiveFactory.$inject = [\n    'appGame',\n    'gameLos'\n  ];\n  function gameLosEnveloppeDirectiveFactory(appGameService,\n                                            gameLosModel) {\n    return {\n      restrict: 'A',\n      scope: true,\n      templateUrl: 'app/components/game/los/los_enveloppe.html',\n      link: link\n    };\n    function link(scope) {\n      scope.listenSignal(updateEnvelope, appGameService.los.changes, scope);\n      function updateEnvelope([_modes_, models, los]) {\n        scope.render = gameLosModel.renderEnveloppe(models, los);\n        const clip_path = document.querySelector('#los-clip polygon');\n        clip_path.setAttribute('points', scope.render.enveloppe);\n        console.warn('RENDER LOS ENVELOPPE', arguments, scope.render);\n      }\n    }\n  }\n})();\n"]}
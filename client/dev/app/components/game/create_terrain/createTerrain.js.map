{"version":3,"sources":["createTerrain.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,qBAAf,EACG,SADH,CACa,wBADb,EACuC,sCADvC,EADU;;AAIV,yCAAuC,OAAvC,GAAiD,CAC/C,YAD+C,EAE/C,SAF+C,EAG/C,SAH+C,EAI/C,iBAJ+C,EAK/C,SAL+C,CAAjD,CAJU;AAWV,WAAS,sCAAT,CAAgD,UAAhD,EACgD,cADhD,EAEgD,YAFhD,EAGgD,oBAHhD,EAGsE;AACpE,WAAO;AACL,gBAAU,GAAV;AACA,mBAAa,wDAAb;AACA,YAAM,IAAN;KAHF,CADoE;;AAOpE,aAAS,IAAT,CAAc,KAAd,EAAqB,MAArB,EAA6B;AAC3B,eAAS,OAAO,CAAP,CAAT,CAD2B;AAE3B,cAAQ,GAAR,CAAY,oBAAZ,EAAkC,MAAM,OAAN,CAAlC,CAF2B;;AAI3B,UAAM,OAAO,qBACJ,OADI,CACI,MAAM,OAAN,CAAc,IAAd,EACA,WAAW,KAAX,CAAiB,QAAjB,CAFX,CAJqB;AAO3B,YAAM,QAAN,CAAe,cAAf,EAA+B,eAAe,MAAf,EAAuB,KAAtD,EAP2B;AAQ3B,gBAAU,KAAV,EAAiB,IAAjB,EAAuB,MAAM,KAAN,CAAY,MAAZ,CAAvB,CAR2B;;AAU3B,eAAS,cAAT,CAAwB,MAAxB,EAAgC;AAC9B,YAAG,EAAE,KAAF,CAAQ,MAAR,KACA,EAAE,KAAF,CAAQ,EAAE,IAAF,CAAO,UAAP,EAAmB,MAAnB,CAAR,CADA,EACqC,OADxC;AAEA,kBAAU,KAAV,EAAiB,IAAjB,EAAuB,MAAvB,EAH8B;OAAhC;KAVF;AAgBA,aAAS,SAAT,CAAmB,KAAnB,EAA0B,IAA1B,EAAgC,MAAhC,EAAwC;AACtC,UAAM,OAAO,EAAE,MAAF,CAAS,EAAE,GAAG,CAAH,EAAM,GAAG,CAAH,EAAjB,EAAyB,MAAzB,EAAiC,MAAjC,CAAP,CADgC;AAEtC,YAAM,MAAN,GAAe,aAAa,MAAb,CAAoB;AACjC,kBADiC;AAEjC,eAAO,EAAE,MAAF,CAAS,MAAM,OAAN,CAAT,CACL,EAAE,KAAF,CAAQ,GAAR,EAAa,KAAK,CAAL,CADR,EAEL,EAAE,KAAF,CAAQ,GAAR,EAAa,KAAK,CAAL,CAFR,CAAP;OAFa,CAAf,CAFsC;KAAxC;GA1BF;CAXD,CAAD","file":"createTerrain.js","sourcesContent":["(function() {\n  angular.module('clickApp.directives')\n    .directive('clickGameCreateTerrain', clickGameCreateTerrainDirectiveFactory);\n\n  clickGameCreateTerrainDirectiveFactory.$inject = [\n    '$rootScope',\n    'appGame',\n    'terrain',\n    'gameTerrainInfo',\n    'gameMap',\n  ];\n  function clickGameCreateTerrainDirectiveFactory($rootScope,\n                                                  appGameService,\n                                                  terrainModel,\n                                                  gameTerrainInfoModel) {\n    return {\n      restrict: 'A',\n      templateUrl: 'app/components/game/create_terrain/create_terrain.html',\n      link: link\n    };\n\n    function link(scope, parent) {\n      parent = parent[0];\n      console.log('clickCreateTerrain', scope.terrain);\n\n      const info = gameTerrainInfoModel\n              .getInfo(scope.terrain.info,\n                       $rootScope.state.terrains);\n      scope.bindCell(onCreateUpdate, appGameService.create, scope);\n      setRender(scope, info, scope.state.create);\n\n      function onCreateUpdate(create) {\n        if(R.isNil(create) ||\n           R.isNil(R.prop('terrains', create))) return;\n        setRender(scope, info, create);\n      }\n    }\n    function setRender(scope, info, create) {\n      const base = R.propOr({ x: 0, y: 0 }, 'base', create);\n      scope.render = terrainModel.render({\n        info,\n        state: R.thread(scope.terrain)(\n          R.assoc('x', base.x),\n          R.assoc('y', base.y)\n        )\n      });\n    }\n  }\n})();\n"]}
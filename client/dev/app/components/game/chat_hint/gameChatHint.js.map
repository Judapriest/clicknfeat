{"version":3,"sources":["gameChatHint.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,qBAAf,EACG,SADH,CACa,eADb,EAC8B,wBAD9B,EADU;;AAIV,2BAAyB,OAAzB,GAAmC,CACjC,YADiC,CAAnC,CAJU;AAOV,WAAS,wBAAT,CAAkC,UAAlC,EAA8C;AAC5C,WAAO;AACL,gBAAU,GAAV;AACA,aAAO,EAAE,MAAM,gBAAN;AACA,eAAO,YAAP,EADT;AAEA,YAAM,IAAN;KAJF,CAD4C;;AAQ5C,aAAS,IAAT,CAAc,KAAd,EAAqB,OAArB,EAA8B;AAC5B,UAAM,MAAM,QAAQ,CAAR,CAAN,CADsB;AAE5B,iBAAW,kBAAX,CAAiC,EAAE,UAAF,CAAa,MAAM,IAAN,WAA9C,EAC8B,MAD9B,EACsC,KADtC,EAF4B;AAI5B,iBAAW,GAAX,CAAe,qBAAf,EAAsC,aAAtC,EAJ4B;;AAM5B,eAAS,MAAT,CAAgB,OAAhB,EAAyB,IAAzB,EAA+B;AAC7B,YAAG,EAAE,KAAF,CAAQ,IAAR,KAAiB,EAAE,KAAF,CAAQ,KAAK,IAAL,CAAzB,IACA,KAAK,IAAL,KAAc,WAAW,KAAX,CAAiB,IAAjB,CAAsB,KAAtB,CAA4B,KAA5B,IACd,KAAK,IAAL,KAAc,WAAW,KAAX,CAAiB,IAAjB,CAAsB,KAAtB,CAA4B,IAA5B,EAAkC,OAFnD;;AAIA,YAAM,OAAO,CAAC,WAAW,OAAX,CAAmB,MAAM,KAAN,CAApB,CALgB;AAM7B,YAAG,IAAH,EAAS;AACP,cAAI,SAAJ,CAAc,GAAd,CAAkB,YAAlB,EADO;SAAT,MAGK;AACH,cAAI,SAAJ,CAAc,MAAd,CAAqB,YAArB,EADG;SAHL;OANF;AAaA,eAAS,aAAT,CAAuB,OAAvB,EAAgC,OAAhC,EAAyC;AACvC,YAAG,QAAQ,IAAR,KAAiB,MAAM,KAAN,EAAa;AAC/B,cAAI,SAAJ,CAAc,MAAd,CAAqB,YAArB,EAD+B;SAAjC;OADF;KAnBF;GARF;CAPD,CAAD","file":"gameChatHint.js","sourcesContent":["(function() {\n  angular.module('clickApp.directives')\n    .directive('clickChatHint', chatHintDirectiveFactory);\n\n  chatHintDirectiveFactory.$inject = [\n    '$rootScope'\n  ];\n  function chatHintDirectiveFactory($rootScope) {\n    return {\n      restrict: 'A',\n      scope: { type: '@clickChatHint',\n               state: '@hintState' },\n      link: link\n    };\n\n    function link(scope, element) {\n      const tab = element[0];\n      $rootScope.onStateChangeEvent(`${s.capitalize(scope.type)}.chat`,\n                                    onChat, scope);\n      $rootScope.$on('$stateChangeSuccess', onStateChange);\n\n      function onChat(_event_, chat) {\n        if(R.isNil(chat) || R.isNil(chat.from) ||\n           chat.from === $rootScope.state.user.state.stamp ||\n           chat.from === $rootScope.state.user.state.name) return;\n\n        const hint = !$rootScope.stateIs(scope.state);\n        if(hint) {\n          tab.classList.add('go-to-hint');\n        }\n        else {\n          tab.classList.remove('go-to-hint');\n        }\n      }\n      function onStateChange(_event_, toState) {\n        if(toState.name === scope.state) {\n          tab.classList.remove('go-to-hint');\n        }\n      }\n    }\n  }\n})();\n"]}
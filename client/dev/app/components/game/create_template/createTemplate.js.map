{"version":3,"sources":["createTemplate.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,qBAAf,EACG,SADH,CACa,yBADb,EACwC,kCADxC,EADU;;AAIV,qCAAmC,OAAnC,GAA6C,CAC3C,UAD2C,CAA7C,CAJU;AAOV,WAAS,kCAAT,CAA4C,aAA5C,EAA2D;AACzD,QAAM,8BAA8B;AAClC,gBAAU,GAAV;AACA,YAAM,IAAN;KAFI,CADmD;AAKzD,WAAO,2BAAP,CALyD;;AAOzD,aAAS,IAAT,CAAc,KAAd,EAAqB;AACnB,cAAQ,GAAR,CAAY,qBAAZ,EAAmC,MAAM,QAAN,CAAnC,CADmB;;AAGnB,YAAM,kBAAN,CAAyB,oBAAzB,EAA+C,QAA/C,EAAyD,KAAzD,EAHmB;AAInB,kBAAY,KAAZ,EAJmB;;AAMnB,eAAS,QAAT,GAAoB;AAClB,YAAM,QAAQ,MAAM,KAAN,CADI;AAElB,YAAG,EAAE,KAAF,CAAQ,EAAE,IAAF,CAAO,CAAC,QAAD,EAAU,WAAV,CAAP,EAA+B,KAA/B,CAAR,CAAH,EAAmD,OAAnD;AACA,oBAAY,KAAZ,EAHkB;AAIlB,cAAM,OAAN,GAJkB;OAApB;KANF;AAaA,aAAS,WAAT,CAAqB,KAArB,EAA4B;AAC1B,UAAM,QAAQ,MAAM,KAAN,CADY;AAE1B,UAAM,OAAO,EAAE,MAAF,CAAS,EAAE,GAAG,CAAH,EAAM,GAAG,CAAH,EAAjB,EAAyB,CAAC,QAAD,EAAU,MAAV,CAAzB,EAA4C,KAA5C,CAAP,CAFoB;AAG1B,UAAM,WAAW,MAAM,QAAN,CAHS;AAI1B,YAAM,GAAN,GAAY,cAAc,MAAd,CAAqB,KAArB,EAA4B,EAAE,MAAF,CAAS,QAAT,EACtC,EAAE,KAAF,CAAQ,GAAR,EAAa,KAAK,CAAL,CADyB,EAEtC,EAAE,KAAF,CAAQ,GAAR,EAAa,KAAK,CAAL,CAFyB,CAA5B,CAAZ,CAJ0B;KAA5B;GApBF;CAPD,CAAD","file":"createTemplate.js","sourcesContent":["(function() {\n  angular.module('clickApp.directives')\n    .directive('clickGameCreateTemplate', gameCreateTemplateDirectiveFactory);\n\n  gameCreateTemplateDirectiveFactory.$inject = [\n    'template',\n  ];\n  function gameCreateTemplateDirectiveFactory(templateModel) {\n    const gameCreateTemplateDirective = {\n      restrict: 'A',\n      link: link\n    };\n    return gameCreateTemplateDirective;\n\n    function link(scope) {\n      console.log('clickCreateTemplate', scope.template);\n\n      scope.onStateChangeEvent('Create.base.change', onUpdate, scope);\n      setPosition(scope);\n\n      function onUpdate() {\n        const state = scope.state;\n        if(R.isNil(R.path(['create','templates'], state))) return;\n        setPosition(scope);\n        scope.$digest();\n      }\n    }\n    function setPosition(scope) {\n      const state = scope.state;\n      const base = R.pathOr({ x: 0, y: 0 }, ['create','base'], state);\n      const template = scope.template;\n      scope.pos = templateModel.render(false, R.thread(template)(\n        R.assoc('x', base.x),\n        R.assoc('y', base.y)\n      ));\n    }\n  }\n})();\n"]}
{"version":3,"sources":["gamePage.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,qBAAf,EACG,SADH,CACa,eADb,EAC8B,6BAD9B,EADU;;AAIV,gCAA8B,OAA9B,GAAwC,CACtC,SADsC,CAAxC,CAJU;AAOV,WAAS,6BAAT,CAAuC,cAAvC,EAAuD;AACrD,WAAO;AACL,gBAAU,GAAV;AACA,YAAM,IAAN;KAFF,CADqD;;AAMrD,aAAS,IAAT,CAAc,KAAd,EAAqB,OAArB,EAA8B;AAC5B,gBAAU,QAAQ,CAAR,CAAV,CAD4B;AAE5B,UAAM,aAAa,gBAAgB,OAAhB,CAAb,CAFsB;;AAI5B,cACG,aADH,CACiB,cADjB,EAEG,gBAFH,CAEoB,OAFpB,EAE6B,UAF7B,EAJ4B;AAO5B,YAAM,YAAN,CAAmB,UAAnB,EAA+B,eAAe,IAAf,CAAoB,WAApB,EAAiC,KAAhE,EAP4B;;AAS5B,UAAM,WAAW,QAAQ,aAAR,CAAsB,WAAtB,CAAX,CATsB;AAU5B,UAAM,OAAO,SAAS,qBAAT,EAAP,CAVsB;AAW5B,eAAS,KAAT,CAAe,KAAf,GAAuB,IAAC,CAAK,MAAL,GAAa,IAAd,CAXK;KAA9B;;AAcA,aAAS,eAAT,CAAyB,OAAzB,EAAkC;AAChC,UAAI,8BAAJ,CADgC;AAEhC,aAAO,YAAM;AACX,YAAM,WAAW,QAAQ,aAAR,CAAsB,WAAtB,CAAX,CADK;AAEX,YAAM,OAAO,QAAQ,aAAR,CAAsB,OAAtB,CAAP,CAFK;AAGX,YAAM,WAAW,QAAQ,aAAR,CAAsB,WAAtB,CAAX,CAHK;AAIX,YAAM,WAAW,QAAQ,aAAR,CAAsB,WAAtB,CAAX,CAJK;;AAMX,YAAM,cAAc,KAAK,SAAL,CAAe,QAAf,CAAwB,QAAxB,CAAd,CANK;AAOX,YAAG,CAAC,WAAD,EAAc;AACf,cAAM,OAAO,SAAS,qBAAT,EAAP,CADS;AAEf,+BAAqB,KAAK,KAAL,CAFN;AAGf,mBAAS,KAAT,CAAe,KAAf,GAAuB,KAAK,MAAL,CAAY,UAAZ,GAAuB,IAAvB,CAHR;SAAjB,MAKK;AACH,mBAAS,KAAT,CAAe,KAAf,GAAuB,qBAAmB,IAAnB,CADpB;SALL;AAQA,iBAAS,SAAT,CAAmB,MAAnB,CAA0B,WAA1B,EAfW;AAgBX,aAAK,SAAL,CAAe,MAAf,CAAsB,QAAtB,EAhBW;AAiBX,iBAAS,SAAT,CAAmB,MAAnB,CAA0B,MAA1B,EAjBW;AAkBX,iBAAS,SAAT,CAAmB,MAAnB,CAA0B,MAA1B,EAlBW;OAAN,CAFyB;KAAlC;GApBF;CAPD,CAAD","file":"gamePage.js","sourcesContent":["(function() {\n  angular.module('clickApp.directives')\n    .directive('clickGamePage', clickGamePageDirectiveFactory);\n\n  clickGamePageDirectiveFactory.$inject = [\n    'appGame',\n  ];\n  function clickGamePageDirectiveFactory(appGameService) {\n    return {\n      restrict: 'A',\n      link: link\n    };\n\n    function link(scope, element) {\n      element = element[0];\n      const menuToggle = buildMenuToggle(element);\n\n      element\n        .querySelector('#menu-toggle')\n        .addEventListener('click', menuToggle);\n      scope.listenSignal(menuToggle, appGameService.view.toggle_menu, scope);\n\n      const gameview = element.querySelector('#gameview');\n      const rect = gameview.getBoundingClientRect();\n      gameview.style.width = (rect.height)+'px';\n    }\n\n    function buildMenuToggle(element) {\n      let gameview_width_mem;\n      return () => {\n        const gameview = element.querySelector('#gameview');\n        const menu = element.querySelector('#menu');\n        const tool_osd = element.querySelector('#tool-osd');\n        const chat_osd = element.querySelector('#chat-osd');\n\n        const menu_hidden = menu.classList.contains('hidden');\n        if(!menu_hidden) {\n          const rect = gameview.getBoundingClientRect();\n          gameview_width_mem = rect.width;\n          gameview.style.width = self.window.innerWidth+'px';\n        }\n        else {\n          gameview.style.width = gameview_width_mem+'px';\n        }\n        gameview.classList.toggle('resizable');\n        menu.classList.toggle('hidden');\n        tool_osd.classList.toggle('show');\n        chat_osd.classList.toggle('show');\n      };\n    }\n  }\n})();\n"]}
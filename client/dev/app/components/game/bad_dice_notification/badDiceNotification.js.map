{"version":3,"sources":["badDiceNotification.es6"],"names":[],"mappings":";;AAAA,CAAC,YAAW;AACV,UAAQ,MAAR,CAAe,qBAAf,EACG,SADH,CACa,0BADb,EACyC,mCADzC,EADU;;AAIV,sCAAoC,OAApC,GAA8C,EAA9C,CAJU;AAKV,WAAS,mCAAT,GAA+C;AAC7C,WAAO;AACL,gBAAU,GAAV;AACA,mBAAa,sEAAb;AACA,YAAM,IAAN;KAHF,CAD6C;;AAO7C,aAAS,IAAT,CAAc,KAAd,EAAqB,OAArB,EAA8B;AAC5B,UAAM,QAAQ,QAAQ,CAAR,EAAW,aAAX,CAAyB,OAAzB,CAAR,CADsB;AAE5B,YAAM,kBAAN,CAAyB,gBAAzB,EAA2C,UAA3C,EAAuD,KAAvD,EAF4B;;AAI5B,eAAS,UAAT,GAAsB;AACpB,YAAM,OAAO,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,EAAT,EAAa,CAAC,OAAD,EAAS,MAAT,EAAgB,MAAhB,CAAb,EAAsC,KAAtC,CAAP,CAAP,CADc;AAEpB,YAAG,KAAK,IAAL,KAAc,eAAd,EAA+B,OAAlC;;AAEA,YAAM,OAAO,EAAE,MAAF,CAAS,EAAT,EAAa,GAAb,EAAkB,IAAlB,CAAP,CAJc;AAKpB,YAAG,EAAE,MAAF,CAAS,IAAT,IAAiB,CAAjB,EAAoB,OAAvB;;AAEA,YAAM,OAAO,EAAE,MAAF,CAAS,EAAE,GAAF,EAAO,CAAhB,EAAmB,IAAnB,IAA2B,EAAE,MAAF,CAAS,IAAT,CAA3B,CAPO;AAQpB,YAAG,QAAQ,CAAR,EAAW,OAAd;;AAEA,cAAM,WAAN,GAAoB,CAApB,CAVoB;AAWpB,cAAM,IAAN,GAXoB;OAAtB;KAJF;GAPF;CALD,CAAD","file":"badDiceNotification.js","sourcesContent":["(function() {\n  angular.module('clickApp.directives')\n    .directive('clickBadDiceNotification', badDiceNotificationDirectiveFactory);\n\n  badDiceNotificationDirectiveFactory.$inject = [];\n  function badDiceNotificationDirectiveFactory() {\n    return {\n      restrict: 'E',\n      templateUrl: 'app/components/game/bad_dice_notification/bad_dice_notification.html',\n      link: link\n    };\n\n    function link(scope, element) {\n      const audio = element[0].querySelector('audio');\n      scope.onStateChangeEvent('Game.dice.roll', onDiceRoll, scope);\n\n      function onDiceRoll() {\n        const ctxt = R.last(R.pathOr([], ['state','game','dice'], scope));\n        if(ctxt.type === 'rollDeviation') return;\n\n        const dice = R.propOr([], 'd', ctxt);\n        if(R.length(dice) < 2) return;\n\n        const mean = R.reduce(R.add, 0, dice) / R.length(dice);\n        if(mean >= 2) return;\n\n        audio.currentTime = 0;\n        audio.play();\n      }\n    }\n  }\n})();\n"]}
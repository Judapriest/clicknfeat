{"version":3,"sources":["badDiceNotification.es6"],"names":[],"mappings":";;AAAA,QAAQ,MAAR,CAAe,qBAAf,EACG,SADH,CACa,0BADb,EACyC,CACrC,YAAW;AACT,SAAO;AACL,cAAU,GAAV;AACA,cAAU,CACR,iDADQ,EAER,UAFQ,EAGR,IAHQ,CAGH,EAHG,CAAV;AAIA,UAAM,cAAS,KAAT,EAAgB,OAAhB,EAAyB;AAC7B,UAAI,QAAQ,QAAQ,CAAR,EAAW,aAAX,CAAyB,OAAzB,CAAR,CADyB;AAE7B,YAAM,kBAAN,CAAyB,gBAAzB,EAA2C,YAAM;AAC/C,YAAI,OAAO,EAAE,IAAF,CAAO,EAAE,MAAF,CAAS,EAAT,EAAa,CAAC,OAAD,EAAS,MAAT,EAAgB,MAAhB,CAAb,EAAsC,KAAtC,CAAP,CAAP,CAD2C;AAE/C,YAAG,KAAK,IAAL,KAAc,eAAd,EAA+B,OAAlC;;AAEA,YAAI,OAAO,EAAE,MAAF,CAAS,EAAT,EAAa,GAAb,EAAkB,IAAlB,CAAP,CAJ2C;AAK/C,YAAG,EAAE,MAAF,CAAS,IAAT,IAAiB,CAAjB,EAAoB,OAAvB;;AAEA,YAAI,OAAO,EAAE,MAAF,CAAS,EAAE,GAAF,EAAO,CAAhB,EAAmB,IAAnB,IAA2B,EAAE,MAAF,CAAS,IAAT,CAA3B,CAPoC;AAQ/C,YAAG,QAAQ,CAAR,EAAW,OAAd;;AAEA,cAAM,WAAN,GAAoB,CAApB,CAV+C;AAW/C,cAAM,IAAN,GAX+C;OAAN,EAYxC,KAZH,EAF6B;KAAzB;GANR,CADS;CAAX,CAFJ","file":"badDiceNotification.js","sourcesContent":["angular.module('clickApp.directives')\n  .directive('clickBadDiceNotification', [\n    function() {\n      return {\n        restrict: 'E',\n        template: [\n          '<audio src=\"/data/sound/naindows-hahaha02.wav\">',\n          '</audio>',\n        ].join(''),\n        link: function(scope, element) {\n          let audio = element[0].querySelector('audio');\n          scope.onStateChangeEvent('Game.dice.roll', () => {\n            let ctxt = R.last(R.pathOr([], ['state','game','dice'], scope));\n            if(ctxt.type === 'rollDeviation') return;\n\n            let dice = R.propOr([], 'd', ctxt);\n            if(R.length(dice) < 2) return;\n\n            let mean = R.reduce(R.add, 0, dice) / R.length(dice);\n            if(mean >= 2) return;\n\n            audio.currentTime = 0;\n            audio.play();\n          }, scope);\n        }\n      };\n    }\n  ]);\n"]}
{"version":3,"sources":["prompt.es6"],"names":[],"mappings":"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","file":"prompt.js","sourcesContent":["angular.module('clickApp.directives')\n  .factory('prompt', [\n    function() {\n      var state;\n      var state_resolves = [];\n      function getState() {\n        if(R.exists(state)) return state;\n        return new self.Promise((resolve) => {\n          state_resolves.push(resolve);\n        });\n      }\n      var prompt_resolve;\n      return {\n        register: function promptRegister(st) {\n          state = st;\n          state.doValidate = () => {\n            var value = state.close();\n            prompt_resolve.resolve(value);\n            prompt_resolve = null;\n          };\n          state.doCancel = () => {\n            state.close();\n            prompt_resolve.reject('canceled');\n            prompt_resolve = null;\n          };\n\n          R.forEach((resolve) => {\n            resolve(state);\n          }, state_resolves);\n          state_resolves = [];\n\n          return state;\n        },\n        prompt: function promptPrompt(prompt_type, msg, input_value) {\n          return R.pipePromise(\n            getState,\n            (state) => {\n              state.open({\n                prompt_type: prompt_type,\n                message: R.type(msg) === 'String' ? [msg] : msg,\n                input_type: R.type(input_value) === 'Number' ? 'number' : 'text',\n                input_value: input_value\n              });\n              return new self.Promise((resolve, reject) => {\n                prompt_resolve = {\n                  resolve: resolve,\n                  reject: reject,\n                };\n              });\n            }\n          )();\n        }\n      };\n    }\n  ])\n  .directive('prompt', [\n    '$window',\n    'prompt',\n    function($window,\n             promptService) {\n      return {\n        restrict: 'E',\n        templateUrl: 'partials/directives/prompt.html',\n        scope: true,\n        link: function(scope, element) {\n          var form = element[0].querySelector('form');\n          var msg_container = element[0].querySelector('p');\n          var input = element[0].querySelector('input');\n          var cancel = element[0].querySelector('button.btn-default');\n\n          element[0].style.display = 'none';\n\n          var state = promptService.register({\n            open: function promptOpen(options = {}) {\n              let { message,\n                    input_type,\n                    prompt_type,\n                    input_value\n                  } = options;\n              $window.requestAnimationFrame(() => {\n                msg_container.innerHTML = R.defaultTo([], message).join('<br />');\n                input.setAttribute('type', R.defaultTo('text', input_type));\n                input.style.display = (prompt_type === 'prompt') ? 'initial' : 'none';\n                cancel.style.display = (prompt_type !== 'alert') ? 'initial' : 'none';\n                element[0].style.display = 'initial';\n                input.focus();\n                input.value = R.defaultTo(null, input_value);\n              });\n            },\n            close: function promptClose() {\n              var value = input.value;\n              if(input.getAttribute('type') === 'number') {\n                value = (R.length(value) === 0) ? null : parseFloat(value);\n              }\n              element[0].style.display = 'none';\n              return value;\n            }\n          });\n\n          form.addEventListener('submit', state.doValidate);\n          cancel.addEventListener('click', state.doCancel);\n        }\n      };\n    }\n  ]);\n"]}
{"version":3,"sources":["../../../es6/controllers/game/mainCtrl.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,sBAAsB,CAAC,CACnC,UAAU,CAAC,cAAc,EAAE,CAC1B,QAAQ,EACR,MAAM,EACN,UAAS,MAAM,EACN,WAAW,EAAE;AACpB,SAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;;AAEjC,QAAM,CAAC,KAAK,CAAC,UAAU,GAAG,KAAK,CAAC;;AAEhC,QAAM,CAAC,UAAU,GAAG,SAAS,UAAU,GAAG;AACxC,QAAG,MAAM,CAAC,aAAa,CAAC,OAAO,CAAC,EAAE;AAChC,YAAM,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;KAC1C,MACI;AACH,YAAM,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;KACvC;GACF,CAAC;AACF,QAAM,CAAC,iBAAiB,GAAG,SAAS,iBAAiB,GAAG;AACtD,UAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,eAAe,CAAC,CAAC;GACtD,CAAC;AACF,QAAM,CAAC,iBAAiB,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAC;;AAEtD,QAAM,CAAC,QAAQ,GAAG,SAAS,QAAQ,GAAG;AACpC,QAAG,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE;AAC9B,YAAM,CAAC,YAAY,CAAC,mBAAmB,CAAC,CAAC;KAC1C,MACI;AACH,YAAM,CAAC,YAAY,CAAC,cAAc,CAAC,CAAC;KACrC;GACF,CAAC;AACF,QAAM,CAAC,eAAe,GAAG,SAAS,eAAe,GAAG;AAClD,UAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,eAAe,CAAC,CAAC;GACpD,CAAC;AACF,QAAM,CAAC,iBAAiB,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;;AAEpD,QAAM,CAAC,gBAAgB,GAAG,SAAS,gBAAgB,CAAC,IAAI,EAAE;AACxD,UAAM,CAAC,MAAM,CAAC,QAAQ,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC;AACxD,UAAM,CAAC,cAAc,CAAC,gBAAgB,EAAE,MAAM,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;GAC/D,CAAC;;AAEF,QAAM,CAAC,UAAU,GAAG,SAAS,MAAM,CAAC,KAAK,EAAE,OAAO,EAAE;AAClD,UAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;GACrD,CAAC;;AAEF,QAAM,CAAC,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,CAAC;AAC1B,QAAM,CAAC,iBAAiB,GAAG,YAAW;AACpC,QAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAClC,QAAG,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,OAAO;;AAE1B,KAAC,CAAC,KAAK,CACL,WAAW,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC,EAAE,MAAM,CAAC,EACzC,GAAG,CAAC,EAC1B,YAAW;AACT,YAAM,CAAC,IAAI,CAAC,GAAG,GAAG,EAAE,CAAC;AACrB,YAAM,CAAC,OAAO,EAAE,CAAC;KAClB,CACF,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;GAChB,CAAC;AACF,QAAM,CAAC,iBAAiB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;CAC1C,CACF,CAAC,CAAC","file":"mainCtrl.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.controllers')\n  .controller('gameMainCtrl', [\n    '$scope',\n    'game',\n    function($scope,\n             gameService) {\n      console.log('init gameMainCtrl');\n\n      $scope.hints.go_to_main = false;\n      \n      $scope.doUseRuler = function doUseRuler() {\n        if($scope.currentModeIs('Ruler')) {\n          $scope.doModeAction('modeBackToDefault');\n        }\n        else {\n          $scope.doModeAction('enterRulerMode');\n        }\n      };\n      $scope.doToggleShowRuler = function doToggleShowRuler() {\n        $scope.doExecuteCommand('setRuler', 'toggleDisplay');\n      };\n      $scope.digestOnGameEvent('changeRemoteRuler', $scope);\n\n      $scope.doUseLos = function doUseLos() {\n        if($scope.currentModeIs('LoS')) {\n          $scope.doModeAction('modeBackToDefault');\n        }\n        else {\n          $scope.doModeAction('enterLosMode');\n        }\n      };\n      $scope.doToggleShowLos = function doToggleShowLos() {\n        $scope.doExecuteCommand('setLos', 'toggleDisplay');\n      };\n      $scope.digestOnGameEvent('changeRemoteLos', $scope);\n      \n      $scope.doCreateTemplate = function doCreateTemplate(type) {\n        $scope.create.template = { type: type, x: 240, y: 240 };\n        $scope.doSwitchToMode('CreateTemplate', $scope, $scope.modes);\n      };\n\n      $scope.doRollDice = function doRoll(sides, nb_dice) {\n        $scope.doExecuteCommand('rollDice', sides, nb_dice);\n      };\n\n      $scope.chat = { msg: '' };\n      $scope.doSendChatMessage = function() {\n        var msg = s.trim($scope.chat.msg);\n        if(R.isEmpty(msg)) return;\n        \n        R.pipeP(\n          gameService.sendChat$(R.path(['user', 'state', 'name'], $scope),\n                                msg),\n          function() {\n            $scope.chat.msg = '';\n            $scope.$digest();\n          }\n        )($scope.game);\n      };\n      $scope.digestOnGameEvent('chat', $scope);\n    }\n  ]);\n"]}
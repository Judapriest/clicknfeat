{"version":3,"sources":["../../es6/controllers/mainCtrl.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,MAAM,CAAC,sBAAsB,CAAC,CACnC,UAAU,CAAC,UAAU,EAAE,CACtB,QAAQ,EACR,QAAQ,EACR,OAAO,EACP,MAAM,EACN,UAAS,MAAM,EACN,MAAM,EACN,YAAY,EACZ,WAAW,EAAE;AACpB,SAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;;AAE7B,QAAM,CAAC,KAAK,GAAG,YAAY,CAAC,IAAI,EAAE,CAAC;AACnC,QAAM,CAAC,UAAU,GAAG,YAAa;sCAAT,IAAI;AAAJ,UAAI;;;AAC1B,WAAO,YAAY,CAAC,KAAK,CACtB,KAAK,CAAC,IAAI,YAAM,IAAI,GAAE,MAAM,CAAC,KAAK,GAAE,CAAC;GACzC,CAAC;AACF,QAAM,CAAC,kBAAkB,GAAG,UAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAK;AACtD,QAAI,WAAW,GAAG,YAAY,CACvB,aAAa,CAAC,KAAK,EAAE,QAAQ,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;AACpD,SAAK,CAAC,GAAG,CAAC,UAAU,EAAE,YAAM;AAAE,iBAAW,EAAE,CAAC;KAAE,CAAC,CAAC;GACjD,CAAC;AACF,QAAM,CAAC,wBAAwB,GAAG,UAAC,KAAK,EAAE,KAAK,EAAK;AAClD,UAAM,CAAC,kBAAkB,CAAC,KAAK,EAAE,YAAM;AACrC,WAAK,CAAC,OAAO,EAAE,CAAC;KACjB,EAAE,KAAK,CAAC,CAAC;GACX,CAAC;AACF,QAAM,CAAC,cAAc,GAAG,YAAM;AAC5B,gBAAY,CAAC,KAAK,CAAC,iBAAiB,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;GACrD,CAAC;;AAEF,QAAM,CAAC,WAAW,GAAG,YAAM;AACzB,WAAO,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;GAC/C,CAAC;AACF,QAAM,CAAC,SAAS,GAAG,YAAM;AACvB,QAAG,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE;AACxB,YAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;KACnB;GACF,CAAC;AACF,QAAM,CAAC,kBAAkB,CAAC,aAAa,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;AACnE,QAAM,CAAC,wBAAwB,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC;;AAEvD,QAAM,CAAC,SAAS,GAAG,YAAa;uCAAT,IAAI;AAAJ,UAAI;;;AACzB,QAAI,CAAC,UAAU,CAAC,YAAM;AACpB,YAAM,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;KAC/B,EAAE,GAAG,CAAC,CAAC;GACT,CAAC;AACF,QAAM,CAAC,OAAO,GAAG,UAAC,IAAI,EAAK;AACzB,WAAO,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;GACxB,CAAC;AACF,QAAM,CAAC,YAAY,GAAG,UAAC,KAAK,EAAK;AAC/B,WAAO,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;GAChD,CAAC;AACF,QAAM,CAAC,YAAY,GAAG,YAAM;AAC1B,WAAO,MAAM,CAAC,OAAO,CAAC;GACvB,CAAC;CACH,CACF,CAAC,CAAC","file":"mainCtrl.js","sourcesContent":["angular.module('clickApp.controllers')\n  .controller('mainCtrl', [\n    '$scope',\n    '$state',\n    'state',\n    'user',\n    function($scope,\n             $state,\n             stateService,\n             userService) {\n      console.log('init mainCtrl');\n\n      $scope.state = stateService.init();\n      $scope.stateEvent = (...args) => {\n        return stateService.event\n          .apply(null, [...args, $scope.state]);\n      };\n      $scope.onStateChangeEvent = (event, listener, scope) => {\n        let unsubscribe = stateService\n              .onChangeEvent(event, listener, $scope.state);\n        scope.$on('$destroy', () => { unsubscribe(); });\n      };\n      $scope.digestOnStateChangeEvent = (event, scope) => {\n        $scope.onStateChangeEvent(event, () => {\n          scope.$digest();\n        }, scope);\n      };\n      $scope.reloadFactions = () => {\n        stateService.event('Factions.reload', $scope.state);\n      };\n\n      $scope.userIsValid = () => {\n        return userService.isValid($scope.state.user);\n      };\n      $scope.checkUser = () => {\n        if(!$scope.userIsValid()) {\n          $state.go('user');\n        }\n      };\n      $scope.onStateChangeEvent('User.change', $scope.checkUser, $scope);\n      $scope.digestOnStateChangeEvent('User.change', $scope);\n      \n      $scope.goToState = (...args) => {\n        self.setTimeout(() => {\n          $state.go.apply($state, args);\n        }, 100);\n      };\n      $scope.stateIs = (name) => {\n        return $state.is(name);\n      };\n      $scope.stateMatches = (match) => {\n        return 0 <= $state.current.name.indexOf(match);\n      };\n      $scope.currentState = () => {\n        return $state.current;\n      };\n    }\n  ]);\n"]}
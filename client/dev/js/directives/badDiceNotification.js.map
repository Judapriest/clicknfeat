{"version":3,"sources":["../../es6/directives/badDiceNotification.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAClC,SAAS,CAAC,0BAA0B,EAAE,CACrC,YAAW;AACT,SAAO;AACL,YAAQ,EAAE,GAAG;AACb,YAAQ,EAAE,CACR,iDAAiD,EACjD,UAAU,CACX,CAAC,IAAI,CAAC,EAAE,CAAC;AACV,QAAI,EAAE,cAAS,KAAK,EAAE,OAAO,EAAE;AAC7B,UAAI,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;AAC9C,WAAK,CAAC,kBAAkB,CAAC,gBAAgB,EAAE,YAAM;AAC/C,YAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,OAAO,EAAC,MAAM,EAAC,MAAM,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;AAChE,YAAG,IAAI,CAAC,IAAI,KAAK,eAAe,EAAE,OAAO;;AAEzC,YAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,CAAC,CAAC;AACnC,YAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,OAAO;;AAE9B,YAAI,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;AACrD,YAAG,IAAI,IAAI,CAAC,EAAE,OAAO;;AAErB,aAAK,CAAC,WAAW,GAAG,CAAC,CAAC;AACtB,aAAK,CAAC,IAAI,EAAE,CAAC;OACd,EAAE,KAAK,CAAC,CAAC;KACX;GACF,CAAC;CACH,CACF,CAAC,CAAC","file":"badDiceNotification.js","sourcesContent":["angular.module('clickApp.directives')\n  .directive('clickBadDiceNotification', [\n    function() {\n      return {\n        restrict: 'E',\n        template: [\n          '<audio src=\"/data/sound/naindows-hahaha02.wav\">',\n          '</audio>',\n        ].join(''),\n        link: function(scope, element) {\n          let audio = element[0].querySelector('audio');\n          scope.onStateChangeEvent('Game.dice.roll', () => {\n            let ctxt = R.last(R.pathOr([], ['state','game','dice'], scope));\n            if(ctxt.type === 'rollDeviation') return;\n\n            let dice = R.propOr([], 'd', ctxt);\n            if(R.length(dice) < 2) return;\n\n            let mean = R.reduce(R.add, 0, dice) / R.length(dice);\n            if(mean >= 2) return;\n\n            audio.currentTime = 0;\n            audio.play();\n          }, scope);\n        }\n      };\n    }\n  ]);\n"]}
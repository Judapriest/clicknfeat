{"version":3,"sources":["../../es6/directives/gameModelDamage.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAClC,UAAU,CAAC,0BAA0B,EAAE,CACtC,QAAQ,EACR,UAAS,MAAM,EAAE;AACf,SAAO,CAAC,GAAG,CAAC,2BAA2B,EAAE,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;AACpE,MAAI,KAAK,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC;;AAEjC,QAAM,CAAC,KAAK,GAAG,UAAC,CAAC,EAAK;AACpB,WAAO,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;GACtB,CAAC;;AAEF,QAAM,CAAC,eAAe,GAAG,UAAC,CAAC,EAAK;AAC9B,WAAO,AAAC,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAI,MAAM,GAAG,EAAE,CAAC;GAC/D,CAAC;AACF,QAAM,CAAC,aAAa,GAAG,UAAC,GAAG,EAAE,IAAI,EAAK;AACpC,WAAO,AAAC,MAAM,CAAC,KAAK,IACZ,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,GAAC,CAAC,GAAG,GAAG,GAAI,MAAM,GAAG,EAAE,CAAC;GAC9E,CAAC;AACF,QAAM,CAAC,YAAY,GAAG,UAAC,GAAG,EAAE,IAAI,EAAK;AACnC,WAAS,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,MAAM,GAChC,AAAC,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAI,MAAM,GAC5D,EAAE,CACF;GACV,CAAC;AACF,QAAM,CAAC,aAAa,GAAG,YAAM;AAC3B,QAAG,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO;;AAEjC,UAAM,CAAC,UAAU,CAAC,sBAAsB,EACtB,UAAU,EAAE,CAAE,aAAa,EAAE,EAAE,CAChB,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CACrB,CAAC,CAC7B,IAAI,CAAC,YAAM;AAAE,YAAM,CAAC,OAAO,EAAE,CAAC;KAAE,CAAC,CAAC;GACtC,CAAC;AACF,QAAM,CAAC,eAAe,GAAG,UAAC,CAAC,EAAK;AAC9B,QAAG,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO;AACjC,UAAM,CAAC,UAAU,CAAC,sBAAsB,EACtB,UAAU,EAAE,CAAE,kBAAkB,EAClB,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,EACnB,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CACrB,CAAC,CAC7B,IAAI,CAAC,YAAM;AAAE,YAAM,CAAC,OAAO,EAAE,CAAC;KAAE,CAAC,CAAC;GACtC,CAAC;AACF,QAAM,CAAC,aAAa,GAAG,UAAC,CAAC,EAAK;AAC5B,QAAG,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO;AACjC,UAAM,CAAC,UAAU,CAAC,sBAAsB,EACtB,UAAU,EAAE,CAAE,gBAAgB,EAChB,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,EACnB,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CACrB,CAAC,CAC7B,IAAI,CAAC,YAAM;AAAE,YAAM,CAAC,OAAO,EAAE,CAAC;KAAE,CAAC,CAAC;GACtC,CAAC;AACF,QAAM,CAAC,YAAY,GAAG,UAAC,IAAI,EAAE,GAAG,EAAK;AACnC,QAAG,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO;AACjC,QAAG,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,OAAO;AAC3C,UAAM,CAAC,UAAU,CAAC,sBAAsB,EACtB,UAAU,EAAE,CAAE,eAAe,EACf,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,GAAG,CAAC,EAC3B,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CACrB,CAAC,CAC7B,IAAI,CAAC,YAAM;AAAE,YAAM,CAAC,OAAO,EAAE,CAAC;KAAE,CAAC,CAAC;GACtC,CAAC;AACF,QAAM,CAAC,eAAe,GAAG,UAAC,GAAG,EAAK;AAChC,QAAG,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,OAAO;AACjC,UAAM,CAAC,UAAU,CAAC,sBAAsB,EACtB,UAAU,EAAE,CAAE,kBAAkB,EAClB,CAAC,KAAK,CAAC,QAAQ,EAAE,GAAG,CAAC,EACrB,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CACrB,CAAC,CAC7B,IAAI,CAAC,YAAM;AAAE,YAAM,CAAC,OAAO,EAAE,CAAC;KAAE,CAAC,CAAC;GACtC,CAAC;CACH,CACF,CAAC,CACD,SAAS,CAAC,sBAAsB,EAAE,CACjC,YAAW;AACT,SAAO;AACL,YAAQ,EAAE,GAAG;AACb,SAAK,EAAE;AACL,UAAI,EAAE,GAAG;AACT,WAAK,EAAE,GAAG;AACV,aAAO,EAAE,GAAG;KACb;AACD,cAAU,EAAE,0BAA0B;AACtC,eAAW,EAAE,iCAAiC;AAC9C,QAAI,EAAE,cAAS,KAAK,EAAE;AACpB,aAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,KAAK,CAAC,CAAC;KACvC;GACF,CAAC;CACH,CACF,CAAC,CAAC","file":"gameModelDamage.js","sourcesContent":["angular.module('clickApp.directives')\n  .controller('clickGameModelDamageCtrl', [\n    '$scope',\n    function($scope) {\n      console.log('init clickModelDamageCtrl', $scope.info, $scope.state);\n      let state = $scope.$parent.state;\n\n      $scope.range = (n) => {\n        return R.range(0, n);\n      };\n\n      $scope.warriorBoxClass = (i) => {\n        return ($scope.state && $scope.state.dmg.n > i) ? 'mark' : '';\n      };\n      $scope.fieldBoxClass = (col, line) => {\n        return ($scope.state &&\n                $scope.state.dmg.f > line * $scope.info.field/2 + col) ? 'mark' : '';\n      };\n      $scope.gridBoxClass = (col, line) => {\n        return ( !$scope.info[col][line] ? 'none' :\n                 ($scope.state && $scope.state.dmg[col][line] === 1) ? 'mark' :\n                 ''\n               );\n      };\n      $scope.doResetDamage = () => {\n        if(R.isNil($scope.state)) return;\n\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'resetDamage', []\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n      $scope.doWarriorDamage = (i) => {\n        if(R.isNil($scope.state)) return;\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'setWarriorDamage',\n                                        [state.factions, i],\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n      $scope.doFieldDamage = (i) => {\n        if(R.isNil($scope.state)) return;\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'setFieldDamage',\n                                        [state.factions, i],\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n      $scope.doGridDamage = (line, col) => {\n        if(R.isNil($scope.state)) return;\n        if(R.isNil($scope.info[col][line])) return;\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'setGridDamage',\n                                        [state.factions, line, col],\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n      $scope.doGridColDamage = (col) => {\n        if(R.isNil($scope.state)) return;\n        $scope.stateEvent('Game.command.execute',\n                          'onModels', [ 'setGridColDamage',\n                                        [state.factions, col],\n                                        [$scope.state.stamp]\n                                      ])\n          .then(() => { $scope.$digest(); });\n      };\n    }\n  ])\n  .directive('clickGameModelDamage', [\n    function() {\n      return {\n        restrict: 'E',\n        scope: {\n          info: '=',\n          state: '=',\n          onError: '&'\n        },\n        controller: 'clickGameModelDamageCtrl',\n        templateUrl: 'partials/game/model_damage.html',\n        link: function(scope) {\n          console.log('gameModelDamage', scope);\n        }\n      };\n    }\n  ]);\n"]}
{"version":3,"sources":["../../es6/directives/gameModelDamage.js"],"names":[],"mappings":"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","file":"gameModelDamage.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.controllers')\n  .controller('clickGameModelDamageCtrl', [\n    '$scope',\n    'game',\n    function($scope,\n             gameService) {\n      console.log('init clickModelDamageCtrl', $scope.info, $scope.state);\n      $scope.range = function(n) {\n        return R.range(0, n);\n      };\n\n      $scope.warriorBoxClass = function warriorBoxClass(i) {\n        return ($scope.state && $scope.state.dmg.n > i) ? 'mark' : '';\n      };\n      $scope.fieldBoxClass = function fieldBoxClass(col, line) {\n        return ($scope.state &&\n                $scope.state.dmg.f > line * $scope.info.field/2 + col) ? 'mark' : '';\n      };\n      $scope.gridBoxClass = function gridBoxClass(col, line) {\n        return ( !$scope.info[col][line] ? 'none' :\n                 ($scope.state && $scope.state.dmg[col][line] === 1) ? 'mark' :\n                 ''\n               );\n      };\n      $scope.doResetDamage = function doResetDamage() {\n        if(R.isNil($scope.state)) return;\n        gameService.executeCommand('onModels', 'resetDamage',\n                                   [$scope.state.stamp],\n                                   $scope.$parent, $scope.$parent.game)\n          .then(function() { $scope.$digest(); })\n          .catch(function(reason) {\n            console.error('Damage: ', reason);\n            $scope.onError({ reason: reason });\n          });\n      };\n      $scope.doWarriorDamage = function doWarriorDamage(i) {\n        if(R.isNil($scope.state)) return;\n        gameService.executeCommand('onModels', 'setWarriorDamage', $scope.$parent.factions, i,\n                                   [$scope.state.stamp],\n                                   $scope.$parent, $scope.$parent.game)\n          .then(function() { $scope.$digest(); })\n          .catch(function(reason) {\n            console.error('Damage: ', reason);\n            $scope.onError({ reason: reason });\n          });\n      };\n      $scope.doFieldDamage = function doFieldDamage(i) {\n        if(R.isNil($scope.state)) return;\n        gameService.executeCommand('onModels', 'setFieldDamage', $scope.$parent.factions, i,\n                                   [$scope.state.stamp],\n                                   $scope.$parent, $scope.$parent.game)\n          .then(function() { $scope.$digest(); })\n          .catch(function(reason) {\n            console.error('Damage: ', reason);\n            $scope.onError({ reason: reason });\n          });\n      };\n      $scope.doGridDamage = function doGridDamage(line, col) {\n        if(R.isNil($scope.state)) return;\n        if(R.isNil($scope.info[col][line])) return;\n        gameService.executeCommand('onModels', 'setGridDamage', $scope.$parent.factions, line, col,\n                                   [$scope.state.stamp],\n                                   $scope.$parent, $scope.$parent.game)\n          .then(function() { $scope.$digest(); })\n          .catch(function(reason) {\n            console.error('Damage: ', reason);\n            $scope.onError({ reason: reason });\n          });\n      };\n      $scope.doGridColDamage = function doGridColDamage(col) {\n        if(R.isNil($scope.state)) return;\n        gameService.executeCommand('onModels', 'setGridColDamage', $scope.$parent.factions, col,\n                                   [$scope.state.stamp],\n                                   $scope.$parent, $scope.$parent.game)\n          .then(function() { $scope.$digest(); })\n          .catch(function(reason) {\n            console.error('Damage: ', reason);\n            $scope.onError({ reason: reason });\n          });\n      };\n    }\n  ]);\n\nangular.module('clickApp.directives')\n  .directive('clickGameModelDamage', [\n    function() {\n      return {\n        restrict: 'E',\n        scope: {\n          info: '=',\n          state: '=',\n          onError: '&',\n        },\n        controller: 'clickGameModelDamageCtrl',\n        templateUrl: 'partials/game/model_damage.html',\n        link: function(scope/*, element, attrs*/) {\n          console.log('gameModelDamage', scope);\n        }\n      };\n    }\n  ]);\n"]}
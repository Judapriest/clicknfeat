{"version":3,"sources":["../../../es6/directives/gameModel/melee.js"],"names":[],"mappings":"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","file":"melee.js","sourcesContent":["angular.module('clickApp.directives')\n  .factory('clickGameModelMelee', [\n    'model',\n    function(modelService) {\n      function computeMeleePath(size, img, info) {\n        return [\n          'M',img.width/2-info.base_radius-size,',',img.height/2,' ',\n\n          'L',img.width/2+info.base_radius+size,',',img.height/2,' ',\n\n          'A',info.base_radius+size,',',info.base_radius+size,' 0 0,0 ',\n          img.width/2-info.base_radius-size,',',img.height/2,' ',\n\n          'M',img.width/2,',',img.height/2,' ',\n\n          'L',img.width/2,',',img.height/2-info.base_radius-size,' ',\n        ].join('');\n      }\n      return {\n        create: function clickGameModelMeleeCreate(svgNS, parent) {\n          let melee = document.createElementNS(svgNS, 'path');\n          melee.classList.add('model-melee');\n          melee.setAttribute('d', '');\n          parent.appendChild(melee);\n\n          let reach = document.createElementNS(svgNS, 'path');\n          reach.classList.add('model-melee');\n          reach.setAttribute('d', '');\n          parent.appendChild(reach);\n\n          let strike = document.createElementNS(svgNS, 'path');\n          strike.classList.add('model-melee');\n          strike.setAttribute('d', '');\n          parent.appendChild(strike);\n\n          return [ melee, reach, strike ];\n        },\n        update: function clickGameModeMeleeUpdate(info, model, img, element) {\n          let [ melee, reach, strike ] = element;\n          let path;\n          if(modelService.isMeleeDisplayed('mm', model)) {\n            path = computeMeleePath(5, img, info);\n            melee.setAttribute('d', path);\n            melee.style.visibility = 'visible';\n          }\n          else {\n            melee.style.visibility = 'hidden';\n          }\n          if(modelService.isMeleeDisplayed('mr', model)) {\n            path = computeMeleePath(20, img, info);\n            reach.setAttribute('d', path);\n            reach.style.visibility = 'visible';\n          }\n          else {\n            reach.style.visibility = 'hidden';\n          }\n          if(modelService.isMeleeDisplayed('ms', model)) {\n            path = computeMeleePath(40, img, info);\n            strike.setAttribute('d', path);\n            strike.style.visibility = 'visible';\n          }\n          else {\n            strike.style.visibility = 'hidden';\n          }\n        }\n      };\n    }\n  ]);\n"]}
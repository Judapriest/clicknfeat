{"version":3,"sources":["../../../es6/directives/gameModel/icon.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAClC,OAAO,CAAC,oBAAoB,EAAE,CAC7B,OAAO,EACP,UAAS,YAAY,EAAE;AACrB,MAAI,OAAO,GAAG,CACZ,CAAE,GAAG,EAAE,uBAAuB,CAAE,EAChC,CAAE,GAAG,EAAE,2BAA2B,CAAE,EACpC,CAAE,GAAG,EAAE,0BAA0B,CAAE,EACnC,CAAE,GAAG,EAAE,sBAAsB,CAAE,EAC/B,CAAE,GAAG,EAAE,4BAA4B,CAAE,EACrC,CAAE,GAAG,EAAE,oBAAoB,CAAE,EAC7B,CAAE,GAAG,EAAE,4BAA4B,CAAE,CACtC,CAAC;;AAEF,SAAO;AACL,UAAM,EAAE,SAAS,0BAA0B,CAAC,KAAK,EAAE,MAAM,EAAE;AACzD,UAAI,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,UAAS,GAAG,EAAE,MAAM,EAAE;AAC3C,YAAI,KAAK,GAAG,QAAQ,CAAC,eAAe,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;AACrD,aAAK,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AACnC,aAAK,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC7B,aAAK,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC7B,aAAK,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AAClC,aAAK,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACnC,aAAK,CAAC,cAAc,CAAC,8BAA8B,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;AACxE,aAAK,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;AAClC,cAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAC1B,eAAO,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,EAAE,GAAG,CAAC,CAAC;OACvC,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;;AAEhB,UAAI,MAAM,GAAG,QAAQ,CAAC,eAAe,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;AACtD,YAAM,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AACpC,YAAM,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC9B,YAAM,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC9B,YAAM,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACnC,YAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AACpC,YAAM,CAAC,cAAc,CAAC,8BAA8B,EAAE,MAAM,EAAE,wBAAwB,CAAC,CAAC;AACxF,YAAM,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;;AAE3B,UAAI,IAAI,GAAG,QAAQ,CAAC,eAAe,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;AACpD,UAAI,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAClC,UAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC5B,UAAI,CAAC,YAAY,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;AAC5B,UAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACjC,UAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;AAClC,UAAI,CAAC,cAAc,CAAC,8BAA8B,EAC9B,MAAM,EAAE,sBAAsB,CAAC,CAAC;AACpD,UAAI,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;AAClC,YAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;;AAEzB,aAAO,CAAE,OAAO,EAAE,MAAM,EAAE,IAAI,CAAE,CAAC;KAClC;AACD,UAAM,EAAE,SAAS,yBAAyB,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,EAAE;AAC/D,UAAI,OAAO,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AACpB,OAAC,CAAC,IAAI,CACJ,CAAC,CAAC,IAAI,EACN,CAAC,CAAC,MAAM,CAAC,UAAS,MAAM,EAAE;AACxB,eAAO,YAAY,CAAC,iBAAiB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;OACtD,CAAC,EACF,UAAS,OAAO,EAAE;AAChB,YAAI,MAAM,GAAG,GAAG,CAAC,KAAK,GAAG,CAAC,GAAI,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,AAAC,CAAC;AAC1D,YAAI,MAAM,GAAG,GAAG,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AACnD,SAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,UAAS,MAAM,EAAE,CAAC,EAAE;AACxC,iBAAO,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,GAAG,EAAE,AAAC,MAAM,GAAG,CAAC,GAAG,EAAE,GAAE,EAAE,CAAC,CAAC;AACxD,iBAAO,CAAC,MAAM,CAAC,CAAC,YAAY,CAAC,GAAG,EAAE,AAAC,MAAM,GAAE,EAAE,CAAC,CAAC;AAC/C,iBAAO,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;SAC9C,EAAE,OAAO,CAAC,CAAC;OACb,CACF,CAAC,OAAO,CAAC,CAAC;AACX,OAAC,CAAC,IAAI,CACJ,CAAC,CAAC,IAAI,EACN,CAAC,CAAC,MAAM,CAAC,UAAS,MAAM,EAAE;AACxB,eAAO,YAAY,CAAC,iBAAiB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;OACtD,CAAC,EACF,CAAC,CAAC,OAAO,CAAC,UAAS,MAAM,EAAE;AACzB,eAAO,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;OAC7C,CAAC,CACH,CAAC,OAAO,CAAC,CAAC;;AAEX,UAAI,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AACnB,YAAM,CAAC,YAAY,CAAC,GAAG,EAAE,AAAC,GAAG,CAAC,KAAK,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,GAAE,EAAE,CAAC,CAAC;AAC1E,YAAM,CAAC,YAAY,CAAC,GAAG,EAAE,AAAC,GAAG,CAAC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,GAAE,EAAE,CAAC,CAAC;AAC3E,UAAG,YAAY,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE;AACxC,cAAM,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;OACrC,MACI;AACH,cAAM,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;OACpC;;AAED,UAAI,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;AACjB,UAAG,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;AAChC,YAAI,CAAC,KAAK,CAAC,UAAU,GAAG,QAAQ,CAAC;AACjC,eAAO;OACR;AACD,UAAI,CAAC,YAAY,CAAC,GAAG,EAAE,AAAC,GAAG,CAAC,KAAK,GAAC,CAAC,GAAC,IAAI,CAAC,WAAW,GAAC,CAAC,GAAE,EAAE,CAAC,CAAC;AAC5D,UAAI,CAAC,YAAY,CAAC,GAAG,EAAE,AAAC,GAAG,CAAC,MAAM,GAAC,CAAC,GAAC,CAAC,GAAE,EAAE,CAAC,CAAC;AAC5C,UAAI,CAAC,KAAK,CAAC,UAAU,GAAG,SAAS,CAAC;KACnC;GACF,CAAC;CACH,CACF,CAAC,CAAC","file":"icon.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.directives')\n  .factory('clickGameModelIcon', [\n    'model',\n    function(modelService) {\n      var EFFECTS = [\n        [ 'b', '/data/icons/Blind.png' ],\n        [ 'c', '/data/icons/Corrosion.png' ],\n        [ 'd', '/data/icons/BoltBlue.png' ],\n        [ 'f', '/data/icons/Fire.png' ],\n        [ 'e', '/data/icons/BoltYellow.png' ],\n        [ 'k', '/data/icons/KD.png' ],\n        [ 't', '/data/icons/Stationary.png' ],\n      ];\n\n      return {\n        create: function clickGameModelInconsCreate(svgNS, parent) {\n          var effects = R.reduce(function(mem, effect) {\n            var image = document.createElementNS(svgNS, 'image');\n            image.classList.add('model-image');\n            image.setAttribute('x', '0');\n            image.setAttribute('y', '0');\n            image.setAttribute('width', '10');\n            image.setAttribute('height', '10');\n            image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', effect[1]);\n            image.style.visibility = 'hidden';\n            parent.appendChild(image);\n            return R.assoc(effect[0], image, mem);\n          }, {}, EFFECTS);\n          \n          var leader = document.createElementNS(svgNS, 'image');\n          leader.classList.add('model-image');\n          leader.setAttribute('x', '0');\n          leader.setAttribute('y', '0');\n          leader.setAttribute('width', '10');\n          leader.setAttribute('height', '10');\n          leader.setAttributeNS('http://www.w3.org/1999/xlink', 'href', '/data/icons/Leader.png');\n          parent.appendChild(leader);\n\n          var lock = document.createElementNS(svgNS, 'image');\n          lock.classList.add('model-image');\n          lock.setAttribute('x', '0');\n          lock.setAttribute('y', '0');\n          lock.setAttribute('width', '10');\n          lock.setAttribute('height', '10');\n          lock.setAttributeNS('http://www.w3.org/1999/xlink',\n                              'href', '/data/icons/Lock.png');\n          lock.style.visibility = 'visible';\n          parent.appendChild(lock);\n\n          return [ effects, leader, lock ];\n        },\n        update: function clickGameModelIconsUpdate(info, model, img, el) {\n          var effects = el[0];\n          R.pipe(\n            R.keys,\n            R.filter(function(effect) {\n              return modelService.isEffectDisplayed(effect, model);\n            }),\n            function(actives) {\n              var base_x = img.width / 2 - (R.length(actives) * 10 / 2);\n              var base_y = img.height / 2 + info.base_radius + 1;\n              R.addIndex(R.forEach)(function(effect, i) {\n                effects[effect].setAttribute('x', (base_x + i * 10)+'');\n                effects[effect].setAttribute('y', (base_y)+'');\n                effects[effect].style.visibility = 'visible';\n              }, actives);\n            }\n          )(effects);\n          R.pipe(\n            R.keys,\n            R.reject(function(effect) {\n              return modelService.isEffectDisplayed(effect, model);\n            }),\n            R.forEach(function(effect) {\n              effects[effect].style.visibility = 'hidden';\n            })\n          )(effects);\n\n          var leader = el[1];\n          leader.setAttribute('x', (img.width / 2 - 0.7 * info.base_radius - 5)+'');\n          leader.setAttribute('y', (img.height / 2 - 0.7 * info.base_radius - 5)+'');\n          if(modelService.isLeaderDisplayed(model)) {\n            leader.style.visibility = 'visible';\n          }\n          else {\n            leader.style.visibility = 'hidden';\n          }\n\n          var lock = el[2];\n          if(!modelService.isLocked(model)) {\n            lock.style.visibility = 'hidden';\n            return;\n          }\n          lock.setAttribute('x', (img.width/2+info.base_radius-5)+'');\n          lock.setAttribute('y', (img.height/2-5)+'');\n          lock.style.visibility = 'visible';\n        },\n      };\n    }\n  ]);\n"]}
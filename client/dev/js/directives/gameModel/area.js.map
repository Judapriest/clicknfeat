{"version":3,"sources":["../../../es6/directives/gameModel/area.js"],"names":[],"mappings":"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","file":"area.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.directives')\n  .factory('clickGameModelArea', [\n    'model',\n    function(modelService) {\n      return {\n        create: function clickGameModelAreaCreate(svgNS, parent) {\n          var ctrl_area = document.createElementNS(svgNS, 'circle');\n          ctrl_area.classList.add('model-ctrl-area');\n          ctrl_area.setAttribute('cx', '0');\n          ctrl_area.setAttribute('cy', '0');\n          ctrl_area.setAttribute('r', '0');\n          ctrl_area.style.visibility = 'hidden';\n          parent.appendChild(ctrl_area);\n          \n          var area = document.createElementNS(svgNS, 'circle');\n          area.classList.add('model-area');\n          area.setAttribute('cx', '0');\n          area.setAttribute('cy', '0');\n          area.setAttribute('r', '0');\n          area.style.visibility = 'hidden';\n          parent.appendChild(area);\n\n          return [ area, ctrl_area ];\n        },\n        update: function clickGameModelAreaUpdate(factions, info, model, img, el) {\n          var ctrl_area = el[1];\n          ctrl_area.setAttribute('cx', (img.width/2)+'');\n          ctrl_area.setAttribute('cy', (img.height/2)+'');\n          modelService.isCtrlAreaDisplayed(factions, model)\n            .then(function(is_displayed) {\n              if(is_displayed) {\n                var radius = ((info.focus || info.fury)*20 + info.base_radius);\n                ctrl_area.setAttribute('r', radius+'');\n                ctrl_area.style.visibility = 'visible';\n              }\n              else {\n                ctrl_area.style.visibility = 'hidden';\n              }\n            });\n\n          var area = el[0];\n          area.setAttribute('cx', (img.width/2)+'');\n          area.setAttribute('cy', (img.height/2)+'');\n          if(modelService.isAreaDisplayed(model)) {\n            area.setAttribute('r', (model.state.are * 10 + info.base_radius)+'');\n            area.style.visibility = 'visible';\n          }\n          else {\n            area.style.visibility = 'hidden';\n          }\n        },\n      };\n    }\n  ]);\n"]}
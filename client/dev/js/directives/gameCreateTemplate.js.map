{"version":3,"sources":["../../es6/directives/gameCreateTemplate.js"],"names":[],"mappings":"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","file":"gameCreateTemplate.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.directives')\n  .directive('clickGameCreateTemplate', [\n    function() {\n      var templates = {};\n      return {\n        restrict: 'A',\n        link: function(scope, element/*, attrs*/) {\n          var map = document.getElementById('map');\n          var svgNS = map.namespaceURI;\n\n          templates['aoe'] = {\n            element: createAoE(document, svgNS, element[0]),\n            setPosition: setAoEPosition,\n          };\n          templates['spray'] = {\n            element: createSpray(document, svgNS, element[0]),\n            setPosition: setSprayPosition,\n          };\n          templates['wall'] = {\n            element: createWall(document, svgNS, element[0]),\n            setPosition: setWallPosition,\n          };\n\n          scope.onGameEvent('enableCreateTemplate', function onEnableCreateTemplate() {\n            var type = scope.create.template.type;\n            templates[type].setPosition(scope.create.template);\n            templates[type].element.style.visibility = 'visible';\n          }, scope);\n          scope.onGameEvent('moveCreateTemplate', function onMoveCreateTemplate() {\n            var type = scope.create.template.type;\n            templates[type].setPosition(scope.create.template);\n          }, scope);\n          scope.onGameEvent('disableCreateTemplate', function onDisableCreateTemplate() {\n            templates['aoe'].element.style.visibility = 'hidden';\n            templates['spray'].element.style.visibility = 'hidden';\n            templates['wall'].element.style.visibility = 'hidden';\n          }, scope);\n        }\n      };\n      function createAoE(document, svgNS, element) {\n        var aoe = document.createElementNS(svgNS, 'circle');\n        aoe.id = 'create-template-aoe';\n        aoe.setAttribute('cx', '240');\n        aoe.setAttribute('cy', '240');\n        aoe.setAttribute('r', '15');\n        element.appendChild(aoe);\n        return aoe;\n      }\n      function setAoEPosition(coord) {\n        templates['aoe'].element.setAttribute('cx', coord.x+'');\n        templates['aoe'].element.setAttribute('cy', coord.y+'');\n      }\n      function createSpray(document, svgNS, element) {\n        var sp = document.createElementNS(svgNS, 'polygon');\n        sp.id = 'create-template-spray';\n        sp.setAttribute('points', '8.75,0 5.125,-59 10,-60 14.875,-59 11.25,0');\n        sp.setAttribute('transform', 'translate(230,240)');\n        element.appendChild(sp);\n        return sp;\n      }\n      function setSprayPosition(coord) {\n        templates['spray'].element.setAttribute('transform', [\n          'translate(',\n          coord.x-10,\n          ',',\n          coord.y,\n          ')',\n        ].join(''));\n      }\n      function createWall(document, svgNS, element) {\n        var wall = document.createElementNS(svgNS, 'rect');\n        wall.id = 'create-template-wall';\n        wall.setAttribute('x', '220');\n        wall.setAttribute('y', '236.25');\n        wall.setAttribute('width', '40');\n        wall.setAttribute('height', '7.5');\n        element.appendChild(wall);\n        return wall;\n      }\n      function setWallPosition(coord) {\n        templates['wall'].element.setAttribute('x', (coord.x-20)+'');\n        templates['wall'].element.setAttribute('y', (coord.y-3.75)+'');\n      }\n    }\n  ]);\n"]}
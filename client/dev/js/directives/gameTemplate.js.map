{"version":3,"sources":["../../es6/directives/gameTemplate.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAClC,SAAS,CAAC,mBAAmB,EAAE,CAC9B,cAAc,EACd,oBAAoB,EACpB,sBAAsB,EACtB,qBAAqB,EACrB,UAAS,mBAAmB,EACnB,yBAAyB,EACzB,2BAA2B,EAC3B,0BAA0B,EAAE;AACnC,MAAI,SAAS,GAAG;AACd,OAAG,EAAE,yBAAyB;AAC9B,SAAK,EAAE,2BAA2B;AAClC,QAAI,EAAE,0BAA0B;GACjC,CAAC;AACF,SAAO;AACL,YAAQ,EAAE,GAAG;AACb,QAAI,EAAE,UAAS,KAAK,EAAE,cAAE,EAAa;AACnC,UAAI,GAAG,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC;AACzC,UAAI,KAAK,GAAG,GAAG,CAAC,YAAY,CAAC;;AAE7B,UAAI,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAC;AAC9B,aAAO,CAAC,GAAG,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;AACtC,UAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE,OAAO;;AAE7B,UAAI,OAAO,GAAG,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;AAC5E,aAAO,CAAC,SAAS,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;;AAE1B,WAAK,CAAC,WAAW,CAAC,YAAY,EAAE,SAAS,YAAY,GAAG;AACtD,2BAAmB,CAAC,eAAe,CAAC,GAAG,EAAE,QAAQ,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;OACzE,EAAE,KAAK,CAAC,CAAC;AACV,eAAS,cAAc,GAAG;AACxB,iBAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;OACtE;AACD,oBAAc,EAAE,CAAC;AACjB,WAAK,CAAC,WAAW,CAAC,iBAAiB,GAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,EACtC,cAAc,EAAE,KAAK,CAAC,CAAC;KAC1C;GACF,CAAC;CACH,CACF,CAAC,CAAC;;AAEL,OAAO,CAAC,MAAM,CAAC,qBAAqB,CAAC,CAClC,SAAS,CAAC,wBAAwB,EAAE,CACnC,YAAW;AACT,SAAO;AACL,YAAQ,EAAE,GAAG;AACb,eAAW,EAAE,mCAAmC;AAChD,SAAK,EAAE,IAAI;AACX,QAAI,EAAE,UAAS,KAAK,EAAE,mBAAO,EAAa;AACxC,WAAK,CAAC,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,2BAA2B,CAAC,CAAC;AAClE,aAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;KACnD;GACF,CAAC;CACH,CACF,CAAC,CAAC","file":"gameTemplate.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.directives')\n  .directive('clickGameTemplate', [\n    'labelElement',\n    'aoeTemplateElement',\n    'sprayTemplateElement',\n    'wallTemplateElement',\n    function(labelElementService,\n             aoeTemplateElementService,\n             sprayTemplateElementService,\n             wallTemplateElementService) {\n      var templates = {\n        aoe: aoeTemplateElementService,\n        spray: sprayTemplateElementService,\n        wall: wallTemplateElementService,\n      };\n      return {\n        restrict: 'A',\n        link: function(scope, el/*, attrs*/) {\n          var map = document.getElementById('map');\n          var svgNS = map.namespaceURI;\n\n          var template = scope.template;\n          console.log('gameTemplate', template);\n          if(R.isNil(template)) return;\n\n          var element = templates[template.state.type].create(svgNS, el[0], template);\n          element.container = el[0];\n          \n          scope.onGameEvent('mapFlipped', function onMapFlipped() {\n            labelElementService.updateOnFlipMap(map, template.state, element.label);\n          }, scope);\n          function updateTemplate() {\n            templates[template.state.type].update(map, scope, template, element);\n          }\n          updateTemplate();\n          scope.onGameEvent('changeTemplate-'+template.state.stamp,\n                            updateTemplate, scope);\n        }\n      };\n    }\n  ]);\n\nangular.module('clickApp.directives')\n  .directive('clickGameTemplatesList', [\n    function() {\n      return {\n        restrict: 'A',\n        templateUrl: 'partials/game/templates_list.html',\n        scope: true,\n        link: function(scope, element/*, attrs*/) {\n          scope.type = element[0].getAttribute('click-game-templates-list');\n          console.log('clickGameTemplatesList', scope.type);\n        }\n      };\n    }\n  ]);\n"]}
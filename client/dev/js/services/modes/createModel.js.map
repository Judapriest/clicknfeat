{"version":3,"sources":["../../../es6/services/modes/createModel.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,iBAAiB,EAAE,CAC1B,OAAO,EACP,UAAU,EACV,YAAY,EACZ,MAAM,EACN,SAAS,6BAA6B,CAAC,YAAY,EACZ,eAAe,EACf,iBAAiB,EACjB,WAAW,EAAE;AAClD,MAAI,mBAAmB,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;AACnE,qBAAmB,CAAC,OAAO,GAAG,SAAS,kBAAkB,CAAC,KAAK,EAAE,KAAK,EAAE;AACtE,SAAK,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACpC,SAAK,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACpC,SAAK,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAAC;GACpC,CAAC;AACF,qBAAmB,CAAC,MAAM,GAAG,SAAS,iBAAiB,CAAC,KAAK,EAAE,KAAK,EAAE;AACpE,SAAK,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC9C,SAAK,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAC9C,QAAI,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,EAAC,UAAU,CAAC,EAAE,KAAK,CAAC,CAAC;AACxD,WAAO,WAAW,CAAC,cAAc,CAAC,aAAa,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,UAAU,EAC7C,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;GACtD,CAAC;AACF,MAAI,4BAA4B,GAAG;AACjC,YAAQ,EAAE,UAAU;GACrB,CAAC;AACF,MAAI,oBAAoB,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EACzC,4BAA4B,CAAC,CAAC;AAClE,MAAI,mBAAmB,GAAG,EAAE,CAAC;AAC7B,MAAI,gBAAgB,GAAG;AACrB,WAAO,EAAE,SAAS,kBAAkB,CAAC,KAAK,EAAE;AAC1C,WAAK,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;AACrC,WAAK,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;KAClC;AACD,WAAO,EAAE,SAAS,kBAAkB,CAAC,KAAK,EAAE;AAC1C,WAAK,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;AAC1B,WAAK,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;AAClC,WAAK,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;KACvC;AACD,QAAI,EAAE,aAAa;AACnB,WAAO,EAAE,mBAAmB;AAC5B,WAAO,EAAE,mBAAmB;AAC5B,YAAQ,EAAE,oBAAoB;GAC/B,CAAC;AACF,cAAY,CAAC,YAAY,CAAC,gBAAgB,CAAC,CAAC;AAC5C,iBAAe,CAAC,QAAQ,CAAC,UAAU,EACV,gBAAgB,CAAC,IAAI,EACrB,4BAA4B,EAC5B,UAAS,EAAE,EAAE;AACX,KAAC,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;GACzC,CAAC,CAAC;AAC5B,SAAO,gBAAgB,CAAC;CACzB,CACF,CAAC,CAAC","file":"createModel.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('createModelMode', [\n    'modes',\n    'settings',\n    'commonMode',\n    'game',\n    function createModelModeServiceFactory(modesService,\n                                           settingsService,\n                                           commonModeService,\n                                           gameService) {\n      var createModel_actions = Object.create(commonModeService.actions);\n      createModel_actions.moveMap = function createModelMoveMap(scope, coord) {\n        scope.create.model.base.x = coord.x;\n        scope.create.model.base.y = coord.y;\n        scope.gameEvent('moveCreateModel');\n      };\n      createModel_actions.create = function createModelCreate(scope, event) {\n        scope.create.model.base.x = event['click#'].x;\n        scope.create.model.base.y = event['click#'].y;\n        var is_flipped = R.path(['ui_state','flip_map'], scope);\n        return gameService.executeCommand('createModel', scope.create.model, is_flipped,\n                                          scope, scope.game);\n      };\n      var createModel_default_bindings = {\n        'create': 'clickMap',\n      };\n      var createModel_bindings = R.extend(Object.create(commonModeService.bindings),\n                                          createModel_default_bindings);\n      var createModel_buttons = [];\n      var createModel_mode = {\n        onEnter: function createModelOnEnter(scope) {\n          scope.gameEvent('enableCreateModel');\n          scope.gameEvent('enableMoveMap');\n        },\n        onLeave: function createModelOnLeave(scope) {\n          scope.create.model = null;\n          scope.gameEvent('disableMoveMap');\n          scope.gameEvent('disableCreateModel');\n        },\n        name: 'CreateModel',\n        actions: createModel_actions,\n        buttons: createModel_buttons,\n        bindings: createModel_bindings,\n      };\n      modesService.registerMode(createModel_mode);\n      settingsService.register('Bindings',\n                               createModel_mode.name,\n                               createModel_default_bindings,\n                               function(bs) {\n                                 R.extend(createModel_mode.bindings, bs);\n                               });\n      return createModel_mode;\n    }\n  ]);\n"]}
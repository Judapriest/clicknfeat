{"version":3,"sources":["../../../es6/services/modes/createTerrain.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,mBAAmB,EAAE,CAC5B,OAAO,EACP,UAAU,EACV,YAAY,EACZ,MAAM,EACN,SAAS,+BAA+B,CAAC,YAAY,EACZ,eAAe,EACf,iBAAiB,EACjB,WAAW,EAAE;AACpD,MAAI,qBAAqB,GAAG,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;AACrE,uBAAqB,CAAC,OAAO,GAAG,SAAS,oBAAoB,CAAC,KAAK,EAAE,KAAK,EAAE;AAC1E,SAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACtC,SAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC;AACtC,SAAK,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAAC;GACtC,CAAC;AACF,uBAAqB,CAAC,MAAM,GAAG,SAAS,mBAAmB,CAAC,KAAK,EAAE,KAAK,EAAE;AACxE,SAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAChD,SAAK,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;AAChD,QAAI,UAAU,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,EAAC,UAAU,CAAC,EAAE,KAAK,CAAC,CAAC;AACxD,WAAO,WAAW,CACf,cAAc,CAAC,eAAe,EAAE,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE,UAAU,EACjD,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,CAAC;GACtC,CAAC;AACF,MAAI,8BAA8B,GAAG;AACnC,YAAQ,EAAE,UAAU;GACrB,CAAC;AACF,MAAI,sBAAsB,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,EAC3C,8BAA8B,CAAC,CAAC;AACpE,MAAI,qBAAqB,GAAG,EAAE,CAAC;AAC/B,MAAI,kBAAkB,GAAG;AACvB,WAAO,EAAE,SAAS,oBAAoB,CAAC,KAAK,EAAE;AAC5C,WAAK,CAAC,SAAS,CAAC,qBAAqB,CAAC,CAAC;AACvC,WAAK,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;KAClC;AACD,WAAO,EAAE,SAAS,oBAAoB,CAAC,KAAK,EAAE;AAC5C,WAAK,CAAC,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC;AAC5B,WAAK,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC;AAClC,WAAK,CAAC,SAAS,CAAC,sBAAsB,CAAC,CAAC;KACzC;AACD,QAAI,EAAE,eAAe;AACrB,WAAO,EAAE,qBAAqB;AAC9B,WAAO,EAAE,qBAAqB;AAC9B,YAAQ,EAAE,sBAAsB;GACjC,CAAC;AACF,cAAY,CAAC,YAAY,CAAC,kBAAkB,CAAC,CAAC;AAC9C,iBAAe,CAAC,QAAQ,CAAC,UAAU,EACV,kBAAkB,CAAC,IAAI,EACvB,8BAA8B,EAC9B,UAAS,EAAE,EAAE;AACX,KAAC,CAAC,MAAM,CAAC,kBAAkB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;GAC3C,CAAC,CAAC;AAC5B,SAAO,kBAAkB,CAAC;CAC3B,CACF,CAAC,CAAC","file":"createTerrain.js","sourcesContent":["angular.module('clickApp.services')\n  .factory('createTerrainMode', [\n    'modes',\n    'settings',\n    'commonMode',\n    'game',\n    function createTerrainModeServiceFactory(modesService,\n                                             settingsService,\n                                             commonModeService,\n                                             gameService) {\n      var createTerrain_actions = Object.create(commonModeService.actions);\n      createTerrain_actions.moveMap = function createTerrainMoveMap(scope, coord) {\n        scope.create.terrain.base.x = coord.x;\n        scope.create.terrain.base.y = coord.y;\n        scope.gameEvent('moveCreateTerrain');\n      };\n      createTerrain_actions.create = function createTerrainCreate(scope, event) {\n        scope.create.terrain.base.x = event['click#'].x;\n        scope.create.terrain.base.y = event['click#'].y;\n        var is_flipped = R.path(['ui_state','flip_map'], scope);\n        return gameService\n          .executeCommand('createTerrain', scope.create.terrain, is_flipped,\n                          scope, scope.game);\n      };\n      var createTerrain_default_bindings = {\n        'create': 'clickMap'\n      };\n      var createTerrain_bindings = R.extend(Object.create(commonModeService.bindings),\n                                          createTerrain_default_bindings);\n      var createTerrain_buttons = [];\n      var createTerrain_mode = {\n        onEnter: function createTerrainOnEnter(scope) {\n          scope.gameEvent('enableCreateTerrain');\n          scope.gameEvent('enableMoveMap');\n        },\n        onLeave: function createTerrainOnLeave(scope) {\n          scope.create.terrain = null;\n          scope.gameEvent('disableMoveMap');\n          scope.gameEvent('disableCreateTerrain');\n        },\n        name: 'CreateTerrain',\n        actions: createTerrain_actions,\n        buttons: createTerrain_buttons,\n        bindings: createTerrain_bindings\n      };\n      modesService.registerMode(createTerrain_mode);\n      settingsService.register('Bindings',\n                               createTerrain_mode.name,\n                               createTerrain_default_bindings,\n                               function(bs) {\n                                 R.extend(createTerrain_mode.bindings, bs);\n                               });\n      return createTerrain_mode;\n    }\n  ]);\n"]}
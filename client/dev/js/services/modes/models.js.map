{"version":3,"sources":["../../../es6/services/modes/models.js"],"names":[],"mappings":"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","file":"models.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('modelsMode', [\n    'modes',\n    'settings',\n    'defaultMode',\n    'model',\n    'game',\n    'gameModels',\n    'gameModelSelection',\n    'point',\n    'prompt',\n    function modelsModeServiceFactory(modesService,\n                                      settingsService,\n                                      defaultModeService,\n                                      modelService,\n                                      gameService,\n                                      gameModelsService,\n                                      gameModelSelectionService,\n                                      pointService,\n                                      promptService) {\n      var models_actions = Object.create(defaultModeService.actions);\n      function modelsClearSelection(scope) {\n        return gameService.executeCommand('setModelSelection', 'clear', null,\n                                          scope, scope.game);\n      }\n      models_actions.clickMap = modelsClearSelection;\n      models_actions.rightClickMap = modelsClearSelection;\n      models_actions.modeBackToDefault = modelsClearSelection;\n      models_actions.deleteSelection = function modelsDeleteSelection(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return gameService.executeCommand('deleteModel', stamps, scope, scope.game);\n      };\n      models_actions.toggleLock = function modelsToggleLock(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isLocked,\n          function(present) {\n            return gameService.executeCommand('lockModels', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.toggleImageDisplay = function modelsToggleImageDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isImageDisplayed,\n          function(present) {\n            return gameService.executeCommand('onModels', 'setImageDisplay', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.setNextImage = function modelsSetNextImage(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return gameService.executeCommand('onModels', 'setNextImage', scope.factions,\n                                          stamps, scope, scope.game);\n      };\n      models_actions.toggleWreckDisplay = function modelsToggleWreckDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isWreckDisplayed,\n          function(present) {\n            return gameService.executeCommand('onModels', 'setWreckDisplay', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.toggleUnitDisplay = function modelsToggleUnitDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isUnitDisplayed,\n          function(present) {\n            return gameService.executeCommand('onModels', 'setUnitDisplay', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.setUnit = function modelsSetUnit(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          function(model) {\n            var value = R.defaultTo(0, modelService.unit(model));\n\n            return promptService.prompt('prompt',\n                                        'Set unit number :',\n                                        value)\n              .catch(R.always(null));\n          },\n          function(value) {\n            return gameService.executeCommand('onModels', 'setUnit', value,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.toggleMeleeDisplay = function modelsToggleMeleeDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isMeleeDisplayed$('mm'),\n          function(present) {\n            return gameService.executeCommand('onModels', 'setMeleeDisplay', 'mm', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.toggleReachDisplay = function modelsToggleReachDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isMeleeDisplayed$('mr'),\n          function(present) {\n            return gameService.executeCommand('onModels', 'setMeleeDisplay', 'mr', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.toggleStrikeDisplay = function modelsToggleStrikeDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isMeleeDisplayed$('ms'),\n          function(present) {\n            return gameService.executeCommand('onModels', 'setMeleeDisplay', 'ms', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.toggleCounterDisplay = function modelsToggleCounterDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isCounterDisplayed$('c'),\n          function(present) {\n            return gameService.executeCommand('onModels', 'setCounterDisplay', 'c', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.incrementCounter = function modelsIncrementCounter(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return gameService.executeCommand('onModels', 'incrementCounter', 'c',\n                                          stamps, scope, scope.game);\n      };\n      models_actions.decrementCounter = function modelsDecrementCounter(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return gameService.executeCommand('onModels', 'decrementCounter', 'c',\n                                          stamps, scope, scope.game);\n      };\n      models_actions.toggleSoulsDisplay = function modelsToggleSoulsDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isCounterDisplayed$('s'),\n          function(present) {\n            return gameService.executeCommand('onModels', 'setCounterDisplay', 's', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.incrementSouls = function modelsIncrementSouls(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return gameService.executeCommand('onModels', 'incrementCounter', 's',\n                                          stamps, scope, scope.game);\n      };\n      models_actions.decrementSouls = function modelsDecrementSouls(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return gameService.executeCommand('onModels', 'decrementCounter', 's',\n                                          stamps, scope, scope.game);\n      };\n      models_actions.setRulerMaxLength = function modelsSetRulerMaxLength(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.rulerMaxLength,\n          R.defaultTo(0),\n          function(value) {\n            return promptService.prompt('prompt',\n                                        'Set ruler max length :',\n                                        value)\n              .catch(R.always(null));\n          },\n          function(value) {\n            value = (value === 0) ? null : value;\n\n            return gameService.executeCommand('onModels', 'setRulerMaxLength', value,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.setChargeMaxLength = function modelsSetChargeMaxLength(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.chargeMaxLength,\n          function(value) {\n            return promptService.prompt('prompt', 'Set charge max length :', value)\n              .catch(R.always(null));\n          },\n          function(value) {\n            value = (value === 0) ? null : value;\n\n            return gameService.executeCommand('onModels',\n                                              'setChargeMaxLength', scope.factions, value,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.setPlaceMaxLength = function modelsSetPlaceMaxLength(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.placeMaxLength,\n          R.defaultTo(0),\n          function(value) {\n            return promptService.prompt('prompt','Set place max length :', value)\n              .catch(R.always(null));\n          },\n          function(value) {\n            value = (value === 0) ? null : value;\n\n            return gameService.executeCommand('onModels',\n                                              'setPlaceMaxLength', scope.factions, value,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.togglePlaceWithin = function modelsTogglePlaceWithin(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.placeWithin,\n          function(present) {\n            return gameService.executeCommand('onModels',\n                                              'setPlaceWithin', scope.factions, !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.toggleLeaderDisplay = function modelsToggleLeaderDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isLeaderDisplayed,\n          function(present) {\n            return gameService.executeCommand('onModels', 'setLeaderDisplay', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      models_actions.toggleIncorporealDisplay = function modelsToggleIncorporealDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isIncorporealDisplayed,\n          function(present) {\n            return gameService.executeCommand('onModels', 'setIncorporealDisplay', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      var effects = [\n        [ 'Blind', 'b' ],\n        [ 'Corrosion', 'c' ],\n        [ 'Disrupt', 'd' ],\n        [ 'Fire', 'f' ],\n        [ 'Fleeing', 'r' ],\n        [ 'KD', 'k' ],\n        [ 'Stationary', 's' ],\n      ];\n      R.forEach(function(effect) {\n        models_actions['toggle'+effect[0]+'EffectDisplay'] = function modelsToggleEffectDisplay(scope) {\n          var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n          return R.pipeP(\n            gameModelsService.findStamp$(stamps[0]),\n            modelService.isEffectDisplayed$(effect[1]),\n            function(present) {\n              return gameService.executeCommand('onModels', 'setEffectDisplay', effect[1], !present,\n                                                stamps, scope, scope.game);\n            }\n          )(scope.game.models);\n        };\n      }, effects);\n      var auras = [\n        [ 'Red', '#F00' ],\n        [ 'Green', '#0F0' ],\n        [ 'Blue', '#00F' ],\n        [ 'Yellow', '#FF0' ],\n        [ 'Purple', '#F0F' ],\n        [ 'Cyan', '#0FF' ],\n      ];\n      R.forEach(function(aura) {\n        models_actions['toggle'+aura[0]+'AuraDisplay'] = function modelsToggleAuraDisplay(scope) {\n          var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n          return R.pipeP(\n            gameModelsService.findStamp$(stamps[0]),\n            modelService.auraDisplay,\n            function(present) {\n              return gameService.executeCommand('onModels', 'setAuraDisplay',\n                                                (present === aura[1]) ? null : aura[1],\n                                                stamps, scope, scope.game);\n            }\n          )(scope.game.models);\n        };\n      }, auras);\n      models_actions.toggleCtrlAreaDisplay = function modelsToggleCtrlAreaDisplay(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.findStamp$(stamps[0]),\n          modelService.isCtrlAreaDisplayed$(scope.factions),\n          function(present) {\n            return gameService.executeCommand('onModels', 'setCtrlAreaDisplay', !present,\n                                              stamps, scope, scope.game);\n          }\n        )(scope.game.models);\n      };\n      var areas = R.range(0, 10);\n      R.forEach(function(area) {\n        var size = area === 0 ? 10 : area;\n        models_actions['toggle'+size+'InchesAreaDisplay'] = function modelsToggleAreaDisplay(scope) {\n          var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n          return R.pipeP(\n            gameModelsService.findStamp$(stamps[0]),\n            function(model) {\n              var present = modelService.areaDisplay(model);\n\n              return gameService.executeCommand('onModels', 'setAreaDisplay',\n                                                (present === size) ? null : size,\n                                                stamps, scope, scope.game);\n            }\n          )(scope.game.models);\n        };\n        var big_size = size + 10;\n        models_actions['toggle'+big_size+'InchesAreaDisplay'] =\n          function modelsToggle10InchesAreaDisplay(scope) {\n            var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n            return R.pipeP(\n              gameModelsService.findStamp$(stamps[0]),\n              function(model) {\n                var present = modelService.areaDisplay(model);\n\n                return gameService.executeCommand('onModels', 'setAreaDisplay',\n                                                  (present === big_size) ? null : big_size,\n                                                  stamps, scope, scope.game);\n              }\n            )(scope.game.models);\n          };\n      }, areas);\n      var moves = [\n        ['moveFront', 'up'],\n        ['moveBack', 'down'],\n        ['rotateLeft', 'left'],\n        ['rotateRight', 'right'],\n      ];\n      R.forEach(function(move) {\n        models_actions[move[0]] = function modelsMove(scope) {\n          var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n          return gameService.executeCommand('onModels', move[0], scope.factions, false,\n                                            stamps, scope, scope.game);\n        };\n        models_actions[move[0]+'Small'] = function modelsMoveSmall(scope) {\n          var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n          return gameService.executeCommand('onModels', move[0], scope.factions, true,\n                                            stamps, scope, scope.game);\n        };\n      }, moves);\n      var shifts = [\n        ['shiftUp', 'ctrl+up', 'shiftDown'],\n        ['shiftDown', 'ctrl+down', 'shiftUp'],\n        ['shiftLeft', 'ctrl+left', 'shiftRight'],\n        ['shiftRight', 'ctrl+right', 'shiftLeft'],\n      ];\n      R.forEach(function(shift) {\n        models_actions[shift[0]] = function modelsShift(scope) {\n          var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n          var model_shift = R.path(['ui_state', 'flip_map'], scope) ? shift[2] : shift[0];\n          return gameService.executeCommand('onModels', model_shift, scope.factions, false,\n                                            stamps, scope, scope.game);\n        };\n        models_actions[shift[0]+'Small'] = function modelsShiftSmall(scope) {\n          var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n          var model_shift = R.path(['ui_state', 'flip_map'], scope) ? shift[2] : shift[0];\n          return gameService.executeCommand('onModels', model_shift, scope.factions, true,\n                                            stamps, scope, scope.game);\n        };\n      }, shifts);\n      models_actions.setOrientationUp = function modelsSetOrientationUp(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        var orientation = scope.ui_state.flip_map ? 180 : 0;\n        gameService.executeCommand('onModels', 'setOrientation', scope.factions, orientation,\n                                   stamps, scope, scope.game);\n      };\n      models_actions.setOrientationDown = function modelsSetOrientationDown(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        var orientation = scope.ui_state.flip_map ? 0 : 180;\n        gameService.executeCommand('onModels', 'setOrientation', scope.factions, orientation,\n                                   stamps, scope, scope.game);\n      };\n      models_actions.setTargetModel = function modelsSetTargetModel(scope, event) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return gameService.executeCommand('onModels',\n                                          'orientTo', scope.factions, event['click#'].target,\n                                          stamps, scope, scope.game);\n      };\n\n      (function() {\n        var drag_charge_target;\n        var drag_models_start_states;\n        var drag_models_start_selection;\n        models_actions.dragStartModel = function modelsDragStartModel(scope, event) {\n          var stamp = event.target.state.stamp;\n          return R.pipeP(\n            function() {\n              if(gameModelSelectionService.in('local', stamp, scope.game.model_selection)) {\n                return self.Promise.resolve();\n              }\n              return gameService.executeCommand('setModelSelection', 'set', [stamp],\n                                                scope, scope.game);\n            },\n            function() {\n              return gameModelSelectionService.get('local', scope.game.model_selection);\n            },\n            function(stamps) {\n              return gameModelsService.findAnyStamps(stamps, scope.game.models);\n            },\n            R.reject(R.isNil),\n            function(models) {\n              drag_charge_target = null;\n              if(R.length(models) === 1) {\n                R.pipeP(\n                  modelService.chargeTarget,\n                  function(target_stamp) {\n                    return gameModelsService.findStamp(target_stamp, scope.game.models);\n                  },\n                  function(target_model) {\n                    drag_charge_target = target_model;\n                  }\n                )(models[0]);\n              }\n              return models;\n            },\n            function(models) {\n              drag_models_start_selection = models;\n\n              return R.map(modelService.saveState, models);\n            },\n            function(states) {\n              drag_models_start_states = states;\n\n              return models_actions.dragModel(scope, event);\n            }\n          )();\n        };\n        defaultModeService.actions.dragStartModel = models_actions.dragStartModel;\n        models_actions.dragModel = function modelsDragModel(scope, event) {\n          return R.pipeP(\n            R.bind(self.Promise.resolve, self.Promise),\n            R.addIndex(R.map)(function(model, index) {\n              var pos = {\n                x: drag_models_start_states[index].x + event.now.x - event.start.x,\n                y: drag_models_start_states[index].y + event.now.y - event.start.y,\n              };\n              return modelService.setPosition(scope.factions, drag_charge_target,\n                                              pos, model);\n            }),\n            R.bind(self.Promise.all, self.Promise),\n            R.forEach(function(model) {\n              scope.gameEvent('changeModel-'+modelService.eventName(model));\n            })\n          )(drag_models_start_selection);\n        };\n        models_actions.dragEndModel = function modelsDragEndModel(scope, event) {\n          return R.pipeP(\n            R.bind(self.Promise.resolve, self.Promise),\n            R.addIndex(R.map)(function(model, index) {\n              return modelService.setPosition(scope.factions, drag_charge_target,\n                                              drag_models_start_states[index], model);\n            }),\n            R.bind(self.Promise.all, self.Promise),\n            R.map(R.path(['state','stamp'])),\n            function(stamps) {\n              var shift = {\n                x: event.now.x - event.start.x,\n                y: event.now.y - event.start.y,\n              };\n              return gameService.executeCommand('onModels',\n                                                'shiftPosition',\n                                                scope.factions, drag_charge_target, shift,\n                                                stamps, scope, scope.game);\n            }\n          )(drag_models_start_selection);\n        };\n      })();\n\n      models_actions.copySelection = function modelsCopySelection(scope) {\n        var stamps = gameModelSelectionService.get('local', scope.game.model_selection);\n        return R.pipeP(\n          gameModelsService.copyStamps$(stamps),\n          function(copy) {\n            scope.create.model = copy;\n            return scope.doSwitchToMode('CreateModel');\n          }\n        )(scope.game.models);\n      };\n      \n      var models_default_bindings = {\n        'clickMap': 'clickMap',\n        'rightClickMap': 'rightClickMap',\n        'deleteSelection': 'del',\n        'copySelection': 'ctrl+c',\n        'toggleLock': 'shift+l',\n        'toggleImageDisplay': 'i',\n        'setNextImage': 'shift+i',\n        'toggleWreckDisplay': 'alt+w',\n        'setOrientationUp': 'pageup',\n        'setOrientationDown': 'pagedown',\n        'setTargetModel': 'shift+clickModel',\n        'toggleCounterDisplay': 'n',\n        'incrementCounter': '+',\n        'decrementCounter': '-',\n        'toggleSoulsDisplay': 'shift+s',\n        'incrementSouls': 'shift++',\n        'decrementSouls': 'shift+-',\n        'toggleCtrlAreaDisplay': 'shift+c',\n        'setRulerMaxLength': 'alt+m',\n        'setChargeMaxLength': 'shift+m',\n        'setPlaceMaxLength': 'shift+p',\n        'togglePlaceWithin': 'shift+w',\n        'toggleMeleeDisplay': 'm',\n        'toggleReachDisplay': 'r',\n        'toggleStrikeDisplay': 's',\n        'toggleUnitDisplay': 'alt+u',\n        'setUnit': 'shift+u',\n        'toggleLeaderDisplay': 'alt+l',\n        'toggleIncorporealDisplay': 'alt+i',\n      };\n      R.forEach(function(move) {\n        models_default_bindings[move[0]] = move[1];\n        models_default_bindings[move[0]+'Small'] = 'shift+'+move[1];\n      }, moves);\n      R.forEach(function(shift) {\n        models_default_bindings[shift[0]] = shift[1];\n        models_default_bindings[shift[0]+'Small'] = 'shift+'+shift[1];\n      }, shifts);\n      R.forEach(function(area) {\n        var size = area === 0 ? 10 : area;\n        models_default_bindings['toggle'+size+'InchesAreaDisplay'] = 'alt+'+area;\n        size += 10;\n        models_default_bindings['toggle'+size+'InchesAreaDisplay'] = 'alt+shift+'+area;\n      }, areas);\n      R.addIndex(R.forEach)(function(aura, index) {\n        models_default_bindings['toggle'+aura[0]+'AuraDisplay'] = 'ctrl+'+(index+1);\n      }, auras);\n      R.forEach(function(effect) {\n        models_default_bindings['toggle'+effect[0]+'EffectDisplay'] = 'alt+'+effect[1];\n      }, effects);\n      var models_bindings = R.extend(Object.create(defaultModeService.bindings),\n                                     models_default_bindings);\n\n      var models_buttons = buildModelsModesButtons();\n      var models_mode = {\n        onEnter: function modelsOnEnter(/*scope*/) {\n        },\n        onLeave: function modelsOnLeave(/*scope*/) {\n        },\n        name: 'Models',\n        actions: models_actions,\n        buttons: models_buttons,\n        buildButtons: buildModelsModesButtons,\n        bindings: models_bindings,\n        areas: areas,\n        // auras: auras,\n        effects: effects,\n      };\n      modesService.registerMode(models_mode);\n      settingsService.register('Bindings',\n                               models_mode.name,\n                               models_default_bindings,\n                               function(bs) {\n                                 R.extend(models_mode.bindings, bs);\n                               });\n\n      function buildModelsModesButtons(options) {\n        options = R.defaultTo({}, options);\n        var ret = [\n          [ 'Delete', 'deleteSelection' ],\n          [ 'Copy', 'copySelection' ],\n          [ 'Lock', 'toggleLock' ],\n          [ 'Ruler Max Len.', 'setRulerMaxLength' ],\n          [ 'Image', 'toggle', 'image' ],\n          [ 'Show/Hide', 'toggleImageDisplay', 'image' ],\n          [ 'Next', 'setNextImage', 'image' ],\n          [ 'Wreck', 'toggleWreckDisplay', 'image' ],\n          [ 'Orient.', 'toggle', 'orientation' ],\n          [ 'Face Up', 'setOrientationUp', 'orientation' ],\n          [ 'Face Down', 'setOrientationDown', 'orientation' ],\n          [ 'Counter', 'toggle', 'counter' ],\n          [ 'Show/Hide', 'toggleCounterDisplay', 'counter' ],\n          [ 'Inc.', 'incrementCounter', 'counter' ],\n          [ 'Dec.', 'decrementCounter', 'counter' ],\n          [ 'Souls', 'toggle', 'souls' ],\n          [ 'Show/Hide', 'toggleSoulsDisplay', 'souls' ],\n          [ 'Inc.', 'incrementSouls', 'souls' ],\n          [ 'Dec.', 'decrementSouls', 'souls' ],\n          [ 'Melee', 'toggle', 'melee' ],\n          [ '0.5\"', 'toggleMeleeDisplay', 'melee' ],\n          [ 'Reach', 'toggleReachDisplay', 'melee' ],\n          [ 'Strike', 'toggleStrikeDisplay', 'melee' ],\n        ];\n        if(R.prop('single', options)) {\n          ret = R.concat(ret, [ [ 'Templates', 'toggle', 'templates' ],\n                                [ 'AoE', 'createAoEOnModel', 'templates' ],\n                                [ 'Spray', 'createSprayOnModel', 'templates' ],\n                              ]);\n        }\n        ret = R.append([ 'Areas', 'toggle', 'areas' ], ret);\n        ret = R.append([ 'CtrlArea', 'toggleCtrlAreaDisplay', 'areas' ], ret);\n        ret = R.concat(ret, R.map(function(area) {\n          var size = area + 1;\n          return [ size+'\"', 'toggle'+size+'InchesAreaDisplay', 'areas' ];\n        }, areas));\n        ret = R.concat(ret, R.map(function(area) {\n          var size = area + 11;\n          return [ size+'\"', 'toggle'+size+'InchesAreaDisplay', 'areas' ];\n        }, areas));\n        ret = R.append([ 'Auras', 'toggle', 'auras' ], ret);\n        ret = R.concat(ret, R.map(function(aura) {\n          return [ aura[0], 'toggle'+aura[0]+'AuraDisplay', 'auras' ];\n        }, auras));\n        ret = R.append([ 'Effects', 'toggle', 'effects' ], ret);\n        ret = R.concat(ret, R.map(function(effect) {\n          return [ effect[0], 'toggle'+effect[0]+'EffectDisplay', 'effects' ];\n        }, effects));\n        ret = R.append([ 'Incorp.', 'toggleIncorporealDisplay', 'effects' ], ret);\n        ret = R.append([ 'Charge', 'toggle', 'charge' ], ret);\n        if(R.prop('start_charge', options)) {\n          ret = R.append([ 'Start', 'startCharge', 'charge' ], ret);\n        }\n        if(R.prop('end_charge', options)) {\n          ret = R.append([ 'End', 'endCharge', 'charge' ], ret);\n        }\n        ret = R.append([ 'Max Len.', 'setChargeMaxLength', 'charge' ], ret);\n        ret = R.append([ 'Place', 'toggle', 'place' ], ret);\n        if(R.prop('start_place', options)) {\n          ret = R.append([ 'Start', 'startPlace', 'place' ], ret);\n        }\n        if(R.prop('end_place', options)) {\n          ret = R.append([ 'End', 'endPlace', 'place' ], ret);\n        }\n        ret = R.append([ 'Max Len.', 'setPlaceMaxLength', 'place' ], ret);\n        ret = R.append([ 'Within', 'togglePlaceWithin', 'place' ], ret);\n        ret = R.concat(ret, [ [ 'Unit', 'toggle', 'unit' ],\n                              [ 'Show/Hide', 'toggleUnitDisplay', 'unit' ],\n                              [ 'Set #', 'setUnit', 'unit' ],\n                              [ 'Leader', 'toggleLeaderDisplay', 'unit' ],\n                            ]);\n        if(R.prop('single', options)) {\n          ret = R.append([ 'Select All', 'selectAllUnit', 'unit' ], ret);\n          ret = R.append([ 'Select Friends', 'selectAllFriendly' ], ret);\n        }\n\n        return ret;\n      }\n      \n      return models_mode;\n    }\n  ]);\n"]}
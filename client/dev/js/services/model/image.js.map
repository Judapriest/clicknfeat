{"version":3,"sources":["../../../es6/services/model/image.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,YAAY,EAAE,CACrB,cAAc,EACd,SAAS,wBAAwB,CAAC,mBAAmB,EAAE;AACrD,SAAO,UAAS,YAAY,EAAE;AAC5B,QAAI,iBAAiB,GAAG;AACtB,sBAAgB,EAAE,SAAS,qBAAqB,CAAC,KAAK,EAAE;AACtD,eAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;OACjD;AACD,cAAQ,EAAE,SAAS,aAAa,CAAC,QAAQ,EAAE,KAAK,EAAE;AAChD,eAAO,CAAC,CAAC,KAAK,CACZ,mBAAmB,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EACnD,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EACb,UAAS,QAAQ,EAAE;AACjB,cAAI,GAAG,GAAG,CAAC,CAAC,IAAI,CACd,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,EAAC,SAAS,CAAC,CAAC,EACpC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CACxB,CAAC,QAAQ,CAAC,CAAC;AACZ,cAAG,YAAY,CAAC,iBAAiB,CAAC,KAAK,CAAC,EAAE;AACxC,eAAG,GAAG,CAAC,CAAC,IAAI,CACV,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,EAAC,QAAQ,CAAC,CAAC,EACnC,CAAC,CAAC,IAAI,EACN,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CACjB,CAAC,QAAQ,CAAC,CAAC;WACb;AACD,cAAG,YAAY,CAAC,sBAAsB,CAAC,KAAK,CAAC,EAAE;AAC7C,eAAG,GAAG,CAAC,CAAC,IAAI,CACV,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,EAAC,aAAa,CAAC,CAAC,EACxC,CAAC,CAAC,IAAI,EACN,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CACjB,CAAC,QAAQ,CAAC,CAAC;WACb;AACD,cAAI,IAAI,GAAG,YAAY,CAAC,gBAAgB,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC;AAClE,iBAAO,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;SACnC,CACF,CAAC,QAAQ,CAAC,CAAC;OACb;AACD,kBAAY,EAAE,SAAS,iBAAiB,CAAC,QAAQ,EAAE,KAAK,EAAE;AACxD,eAAO,CAAC,CAAC,KAAK,CACZ,mBAAmB,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,EACnD,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,EACb,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,EAAC,SAAS,CAAC,CAAC,EACpC,UAAS,IAAI,EAAE;AACb,iBAAO,AAAC,KAAK,CAAC,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC,MAAM,GAAC,CAAC,GAAI,CAAC,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC;SACrE,EACD,UAAS,QAAQ,EAAE;AACjB,iBAAO,CAAC,CAAC,SAAS,CAAC,CAAC,OAAO,EAAC,KAAK,CAAC,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;SACtD,CACF,CAAC,QAAQ,CAAC,CAAC;OACb;AACD,qBAAe,EAAE,SAAS,oBAAoB,CAAC,GAAG,EAAE,KAAK,EAAE;AACzD,YAAG,GAAG,EAAE;AACN,iBAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAC3B,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAChC,KAAK,CAAC,CAAC;SACtB,MACI;AACH,iBAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAC3B,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EACvB,KAAK,CAAC,CAAC;SACtB;OACF;AACD,wBAAkB,EAAE,SAAS,uBAAuB,CAAC,KAAK,EAAE;AAC1D,YAAG,YAAY,CAAC,gBAAgB,CAAC,KAAK,CAAC,EAAE;AACvC,iBAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAC3B,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EACvB,KAAK,CAAC,CAAC;SACtB,MACI;AACH,iBAAO,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAC,KAAK,CAAC,CAAC,EAC3B,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,EACb,KAAK,CAAC,CAAC;SACtB;OACF;KACF,CAAC;AACF,WAAO,iBAAiB,CAAC;GAC1B,CAAC;CACH,CACF,CAAC,CAAC","file":"image.js","sourcesContent":["angular.module('clickApp.services')\n  .factory('modelImage', [\n    'gameFactions',\n    function modelImageServiceFactory(gameFactionsService) {\n      return function(modelService) {\n        var modelImageService = {\n          isImageDisplayed: function modelIsImageDisplayed(model) {\n            return !!R.find(R.equals('i'), model.state.dsp);\n          },\n          getImage: function modelGetImage(factions, model) {\n            return R.pipeP(\n              gameFactionsService.getModelInfo$(model.state.info),\n              R.prop('img'),\n              function(info_img) {\n                var img = R.pipe(\n                  R.filter(R.propEq('type','default')),\n                  R.prop(model.state.img)\n                )(info_img);\n                if(modelService.isLeaderDisplayed(model)) {\n                  img = R.pipe(\n                    R.filter(R.propEq('type','leader')),\n                    R.head,\n                    R.defaultTo(img)\n                  )(info_img);\n                }\n                if(modelService.isIncorporealDisplayed(model)) {\n                  img = R.pipe(\n                    R.filter(R.propEq('type','incorporeal')),\n                    R.head,\n                    R.defaultTo(img)\n                  )(info_img);\n                }\n                var link = modelService.isImageDisplayed(model) ? img.link : null;\n                return R.assoc('link', link, img);\n              }\n            )(factions);\n          },\n          setNextImage: function modelSetNextImage(factions, model) {\n            return R.pipeP(\n              gameFactionsService.getModelInfo$(model.state.info),\n              R.prop('img'),\n              R.filter(R.propEq('type','default')),\n              function(imgs) {\n                return (model.state.img >= imgs.length-1) ? 0 : model.state.img + 1;\n              },\n              function(next_img) {\n                return R.assocPath(['state','img'], next_img, model);\n              }\n            )(factions);\n          },\n          setImageDisplay: function modelSetImageDisplay(set, model) {\n            if(set) {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.compose(R.uniq, R.append('i')),\n                            model);\n            }\n            else {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.reject(R.equals('i')),\n                            model);\n            }\n          },\n          toggleImageDisplay: function modelToggleImageDisplay(model) {\n            if(modelService.isImageDisplayed(model)) {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.reject(R.equals('i')),\n                            model);\n            }\n            else {\n              return R.over(R.lensPath(['state','dsp']),\n                            R.append('i'),\n                            model);\n            }\n          }\n        };\n        return modelImageService;\n      };\n    }\n  ]);\n"]}
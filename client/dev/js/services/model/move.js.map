{"version":3,"sources":["../../../es6/services/model/move.js"],"names":[],"mappings":"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","file":"move.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('modelMove', [\n    'settings',\n    'point',\n    function modelMoveServiceFactory(settingsService,\n                                     pointService) {\n      return function(MOVES, modelService) {\n        var modelMoveService = {\n          setPosition: function modelSet(factions, target, pos, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n            \n            model.state = R.pipe(\n              R.assoc('x', pos.x),\n              R.assoc('y', pos.y)\n            )(model.state);\n            return modelService.checkState(factions, target, model);\n          },\n          shiftPosition: function modelSet(factions, target, shift, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            model.state = R.pipe(\n              R.assoc('x', model.state.x + shift.x),\n              R.assoc('y', model.state.y + shift.y)\n            )(model.state);\n            return modelService.checkState(factions, target, model);\n          },\n          setOrientation: function modelSet(factions, orientation, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            model.state = R.assoc('r', orientation, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          orientTo: function modelSet(factions, other, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            model.state = R.assoc('r', pointService.directionTo(other.state, model.state), model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          moveFront: function modelMoveFront(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'MoveSmall' : 'Move'];\n            model.state = pointService.moveFront(dist, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          moveBack: function modelMoveBack(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'MoveSmall' : 'Move'];\n            model.state = pointService.moveBack(dist, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          rotateLeft: function modelRotateLeft(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var angle = MOVES[small ? 'RotateSmall' : 'Rotate'];\n            model.state = pointService.rotateLeft(angle, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          rotateRight: function modelRotateRight(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var angle = MOVES[small ? 'RotateSmall' : 'Rotate'];\n            model.state = pointService.rotateRight(angle, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          shiftLeft: function modelShiftLeft(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n            model.state = pointService.shiftLeft(dist, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          shiftRight: function modelShiftRight(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n            model.state = pointService.shiftRight(dist, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          shiftUp: function modelShiftUp(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n            model.state = pointService.shiftUp(dist, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n          shiftDown: function modelShiftDown(factions, small, model) {\n            if(modelService.isLocked(model)) {\n              return self.Promise.reject('Model is locked');\n            }\n\n            var dist = MOVES[small ? 'ShiftSmall' : 'Shift'];\n            model.state = pointService.shiftDown(dist, model.state);\n            return modelService.checkState(factions, null, model);\n          },\n        };\n        return modelMoveService;\n      };\n    }\n  ]);\n"]}
{"version":3,"sources":["../../../es6/services/command/rollDeviation.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,sBAAsB,EAAE,CAC/B,UAAU,EACV,SAAS,kCAAkC,CAAC,eAAe,EAAE;AAC3D,MAAI,2BAA2B,GAAG;AAChC,WAAO,EAAE,SAAS,oBAAoB,CAAC,KAAK,EAAE,IAAI,EAAE;AAClD,UAAI,SAAS,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACpC,UAAI,QAAQ,GAAG,CAAC,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;AAEnC,UAAI,IAAI,GAAG;AACT,YAAI,EAAE,4BAA4B,GAAC,SAAS,GAAC,aAAa,GAAC,QAAQ,GAAC,GAAG;AACvE,SAAC,EAAE,SAAS;AACZ,SAAC,EAAE,QAAQ;OACZ,CAAC;AACF,UAAI,CAAC,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AACtC,WAAK,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;AAC5B,aAAO,IAAI,CAAC;KACb;AACD,UAAM,EAAE,SAAS,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AAC/C,UAAI,CAAC,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AACtC,WAAK,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;KAC7B;AACD,QAAI,EAAE,SAAS,YAAY,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AAC7C,UAAI,CAAC,IAAI,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;AAC/D,WAAK,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;KAC7B;GACF,CAAC;AACF,iBAAe,CAAC,eAAe,CAAC,eAAe,EAAE,2BAA2B,CAAC,CAAC;AAC9E,SAAO,2BAA2B,CAAC;CACpC,CACF,CAAC,CAAC","file":"rollDeviation.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('rollDeviationCommand', [\n    'commands',\n    function rollDeviationCommandServiceFactory(commandsService) {\n      var rollDeviationCommandService = {\n        execute: function rollDeviationExecute(scope, game) {\n          var direction = R.randomRange(1, 6);\n          var distance = R.randomRange(1, 6);\n          \n          var ctxt = {\n            desc: 'AoE deviation : direction '+direction+', distance '+distance+'\"',\n            r: direction,\n            d: distance,\n          };\n          game.dice = R.append(ctxt, game.dice);\n          scope.gameEvent('diceRoll');\n          return ctxt;\n        },\n        replay: function rollDiceRedo(ctxt, scope, game) {\n          game.dice = R.append(ctxt, game.dice);\n          scope.gameEvent('diceRoll');\n        },\n        undo: function rollDiceUndo(ctxt, scope, game) {\n          game.dice = R.reject(R.propEq('stamp', ctxt.stamp), game.dice);\n          scope.gameEvent('diceRoll');\n        }\n      };\n      commandsService.registerCommand('rollDeviation', rollDeviationCommandService);\n      return rollDeviationCommandService;\n    }\n  ]);\n"]}
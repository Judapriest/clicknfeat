{"version":3,"sources":["../../../es6/services/command/lockTerrains.js"],"names":[],"mappings":";;AAAA,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,qBAAqB,EAAE,CAC9B,UAAU,EACV,cAAc,EACd,SAAS,iCAAiC,CAAC,eAAe,EACf,mBAAmB,EAAE;AAC9D,MAAI,0BAA0B,GAAG;AAC/B,WAAO,EAAE,SAAS,mBAAmB,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE;AAC/D,UAAI,IAAI,GAAG;AACT,YAAI,EAAE,IAAI;AACV,cAAM,EAAE,MAAM;OACf,CAAC;;AAEF,aAAO,CAAC,CAAC,KAAK,CACZ,mBAAmB,CAAC,WAAW,CAAC,IAAI,EAAE,MAAM,CAAC,EAC7C,UAAS,aAAa,EAAE;AACtB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE,aAAa,EAAE,IAAI,CAAC,CAAC;;AAEhD,SAAC,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AACnB,eAAK,CAAC,WAAW,0BAAwB,KAAK,CAAG,CAAC;SACnD,EAAE,MAAM,CAAC,CAAC;AACX,aAAK,CAAC,WAAW,CAAC,qBAAqB,CAAC,CAAC;;AAEzC,eAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;OACrB,CACF,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KAClB;AACD,UAAM,EAAE,SAAS,gBAAgB,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AACnD,aAAO,CAAC,CAAC,KAAK,CACZ,mBAAmB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EACvD,UAAS,aAAa,EAAE;AACtB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE,aAAa,EAAE,IAAI,CAAC,CAAC;;AAEhD,SAAC,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AACnB,eAAK,CAAC,WAAW,0BAAwB,KAAK,CAAG,CAAC;SACnD,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAChB,aAAK,CAAC,WAAW,CAAC,qBAAqB,CAAC,CAAC;;AAEzC,eAAO,IAAI,CAAC;OACb,CACF,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KAClB;AACD,QAAI,EAAE,SAAS,gBAAgB,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AACjD,aAAO,CAAC,CAAC,KAAK,CACZ,mBAAmB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EACxD,UAAS,aAAa,EAAE;AACtB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,UAAU,EAAE,aAAa,EAAE,IAAI,CAAC,CAAC;;AAEhD,SAAC,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AACnB,eAAK,CAAC,WAAW,0BAAwB,KAAK,CAAG,CAAC;SACnD,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;AAChB,aAAK,CAAC,WAAW,CAAC,qBAAqB,CAAC,CAAC;;AAEzC,eAAO,IAAI,CAAC;OACb,CACF,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;KAClB;GACF,CAAC;AACF,iBAAe,CAAC,eAAe,CAAC,cAAc,EAAE,0BAA0B,CAAC,CAAC;AAC5E,SAAO,0BAA0B,CAAC;CACnC,CACF,CAAC,CAAC","file":"lockTerrains.js","sourcesContent":["angular.module('clickApp.services')\n  .factory('lockTerrainsCommand', [\n    'commands',\n    'gameTerrains',\n    function lockTerrainsCommandServiceFactory(commandsService,\n                                               gameTerrainsService) {\n      var lockTerrainsCommandService = {\n        execute: function lockTerrainsExecute(lock, stamps, state, game) {\n          var ctxt = {\n            desc: lock,\n            stamps: stamps\n          };\n\n          return R.pipeP(\n            gameTerrainsService.lockStamps$(lock, stamps),\n            function(game_terrains) {\n              game = R.assoc('terrains', game_terrains, game);\n\n              R.forEach((stamp) => {\n                state.changeEvent(`Game.terrain.change.${stamp}`);\n              }, stamps);\n              state.changeEvent('Game.terrain.create');\n              \n              return [ctxt, game];\n            }\n          )(game.terrains);\n        },\n        replay: function lockTerrainsRedo(ctxt, state, game) {\n          return R.pipeP(\n            gameTerrainsService.lockStamps$(ctxt.desc, ctxt.stamps),\n            function(game_terrains) {\n              game = R.assoc('terrains', game_terrains, game);\n              \n              R.forEach((stamp) => {\n                state.changeEvent(`Game.terrain.change.${stamp}`);\n              }, ctxt.stamps);\n              state.changeEvent('Game.terrain.create');\n\n              return game;\n            }\n          )(game.terrains);\n        },\n        undo: function lockTerrainsUndo(ctxt, state, game) {\n          return R.pipeP(\n            gameTerrainsService.lockStamps$(!ctxt.desc, ctxt.stamps),\n            function(game_terrains) {\n              game = R.assoc('terrains', game_terrains, game);\n              \n              R.forEach((stamp) => {\n                state.changeEvent(`Game.terrain.change.${stamp}`);\n              }, ctxt.stamps);\n              state.changeEvent('Game.terrain.create');\n\n              return game;\n            }\n          )(game.terrains);\n        }\n      };\n      commandsService.registerCommand('lockTerrains', lockTerrainsCommandService);\n      return lockTerrainsCommandService;\n    }\n  ]);\n"]}
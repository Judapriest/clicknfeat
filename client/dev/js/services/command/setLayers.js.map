{"version":3,"sources":["../../../es6/services/command/setLayers.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,kBAAkB,EAAE,CAC3B,UAAU,EACV,YAAY,EACZ,SAAS,8BAA8B,CAAC,eAAe,EACf,iBAAiB,EAAE;AACzD,MAAI,uBAAuB,GAAG;AAC5B,WAAO,EAAE,SAAS,gBAAgB,CAAC,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE;AACtD,UAAG,UAAU,KAAK,CAAC,CAAC,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,EAAE;AAChD,eAAO,IAAI,CAAC,OAAO,CAAC,MAAM,6BAA2B,GAAG,OAAI,CAAC;OAC9D;;AAED,UAAI,IAAI,GAAG;AACT,cAAM,EAAE,IAAI,CAAC,MAAM;AACnB,YAAI,EAAK,GAAG,SAAI,CAAC,MAAG;OACrB,CAAC;AACF,UAAI,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,iBAAiB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,CAAC;AACvE,UAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;;AAEzB,WAAK,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;;AAExC,aAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KACrB;AACD,UAAM,EAAE,SAAS,aAAa,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AAChD,UAAI,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;;AAE3C,WAAK,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;;AAExC,aAAO,IAAI,CAAC;KACb;AACD,QAAI,EAAE,SAAS,aAAa,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AAC9C,UAAI,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;;AAE5C,WAAK,CAAC,WAAW,CAAC,oBAAoB,CAAC,CAAC;;AAExC,aAAO,IAAI,CAAC;KACb;GACF,CAAC;AACF,iBAAe,CAAC,eAAe,CAAC,WAAW,EAAE,uBAAuB,CAAC,CAAC;AACtE,SAAO,uBAAuB,CAAC;CAChC,CACF,CAAC,CAAC","file":"setLayers.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('setLayersCommand', [\n    'commands',\n    'gameLayers',\n    function setLayersCommandServiceFactory(commandsService,\n                                            gameLayersService) {\n      var setLayersCommandService = {\n        execute: function setLayersExecute(cmd, l, state, game) {\n          if('Function' !== R.type(gameLayersService[cmd])) {\n            return self.Promise.reject(`Layers unknown method \"${cmd}\"`);\n          }\n          \n          var ctxt = {\n            before: game.layers,\n            desc: `${cmd}(${l})`\n          };\n          game = R.assoc('layers', gameLayersService[cmd](l, game.layers), game);\n          ctxt.after = game.layers;\n\n          state.changeEvent('Game.layers.change');\n\n          return [ctxt, game];\n        },\n        replay: function setLayersRedo(ctxt, state, game) {\n          game = R.assoc('layers', ctxt.after, game);\n\n          state.changeEvent('Game.layers.change');\n\n          return game;\n        },\n        undo: function setLayersUndo(ctxt, state, game) {\n          game = R.assoc('layers', ctxt.before, game);\n\n          state.changeEvent('Game.layers.change');\n\n          return game;\n        }\n      };\n      commandsService.registerCommand('setLayers', setLayersCommandService);\n      return setLayersCommandService;\n    }\n  ]);\n"]}
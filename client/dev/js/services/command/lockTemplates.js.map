{"version":3,"sources":["../../../es6/services/command/lockTemplates.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,sBAAsB,EAAE,CAC/B,UAAU,EACV,eAAe,EACf,SAAS,kCAAkC,CAAC,eAAe,EACf,oBAAoB,EAAE;AAChE,MAAI,2BAA2B,GAAG;AAChC,WAAO,EAAE,SAAS,oBAAoB,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE;AAChE,UAAI,IAAI,GAAG;AACT,cAAM,EAAE,MAAM;AACd,YAAI,EAAE,IAAI;OACX,CAAC;;AAEF,aAAO,CAAC,CAAC,KAAK,CACZ,oBAAoB,CAAC,WAAW,CAAC,IAAI,EAAE,MAAM,CAAC,EAC9C,UAAS,cAAc,EAAE;AACvB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,WAAW,EAAE,cAAc,EAAE,IAAI,CAAC,CAAC;;AAElD,aAAK,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC;;AAE1C,eAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;OACrB,CACF,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACnB;AACD,UAAM,EAAE,SAAS,mBAAmB,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AACtD,aAAO,CAAC,CAAC,KAAK,CACZ,oBAAoB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EACxD,UAAS,cAAc,EAAE;AACvB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,WAAW,EAAE,cAAc,EAAE,IAAI,CAAC,CAAC;;AAElD,aAAK,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC;;AAE1C,eAAO,IAAI,CAAC;OACb,CACF,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACnB;AACD,QAAI,EAAE,SAAS,iBAAiB,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AAClD,aAAO,CAAC,CAAC,KAAK,CACZ,oBAAoB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EACzD,UAAS,cAAc,EAAE;AACvB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,WAAW,EAAE,cAAc,EAAE,IAAI,CAAC,CAAC;;AAElD,aAAK,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAC;;AAE1C,eAAO,IAAI,CAAC;OACb,CACF,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACnB;GACF,CAAC;AACF,iBAAe,CAAC,eAAe,CAAC,eAAe,EAAE,2BAA2B,CAAC,CAAC;AAC9E,SAAO,2BAA2B,CAAC;CACpC,CACF,CAAC,CAAC","file":"lockTemplates.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('lockTemplatesCommand', [\n    'commands',\n    'gameTemplates',\n    function lockTemplatesCommandServiceFactory(commandsService,\n                                                gameTemplatesService) {\n      var lockTemplatesCommandService = {\n        execute: function lockTemplatesExecute(lock, stamps, state, game) {\n          var ctxt = {\n            stamps: stamps,\n            desc: lock\n          };\n\n          return R.pipeP(\n            gameTemplatesService.lockStamps$(lock, stamps),\n            function(game_templates) {\n              game = R.assoc('templates', game_templates, game);\n\n              state.changeEvent('Game.template.create');\n              \n              return [ctxt, game];\n            }\n          )(game.templates);\n        },\n        replay: function lockTemplatesReplay(ctxt, state, game) {\n          return R.pipeP(\n            gameTemplatesService.lockStamps$(ctxt.desc, ctxt.stamps),\n            function(game_templates) {\n              game = R.assoc('templates', game_templates, game);\n              \n              state.changeEvent('Game.template.create');\n\n              return game;\n            }\n          )(game.templates);\n        },\n        undo: function lockTemplatesUndo(ctxt, state, game) {\n          return R.pipeP(\n            gameTemplatesService.lockStamps$(!ctxt.desc, ctxt.stamps),\n            function(game_templates) {\n              game = R.assoc('templates', game_templates, game);\n              \n              state.changeEvent('Game.template.create');\n\n              return game;\n            }\n          )(game.templates);\n        }\n      };\n      commandsService.registerCommand('lockTemplates', lockTemplatesCommandService);\n      return lockTemplatesCommandService;\n    }\n  ]);\n"]}
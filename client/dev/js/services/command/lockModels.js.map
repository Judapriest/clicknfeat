{"version":3,"sources":["../../../es6/services/command/lockModels.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,OAAO,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAChC,OAAO,CAAC,mBAAmB,EAAE,CAC5B,UAAU,EACV,YAAY,EACZ,SAAS,+BAA+B,CAAC,eAAe,EACf,iBAAiB,EAAE;AAC1D,MAAI,wBAAwB,GAAG;AAC7B,WAAO,EAAE,SAAS,iBAAiB,CAAC,IAAI,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE;AAC7D,UAAI,IAAI,GAAG;AACT,YAAI,EAAE,IAAI;AACV,cAAM,EAAE,MAAM;OACf,CAAC;;AAEF,aAAO,CAAC,CAAC,KAAK,CACZ,iBAAiB,CAAC,WAAW,CAAC,IAAI,EAAE,MAAM,CAAC,EAC3C,UAAS,WAAW,EAAE;AACpB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;;AAE5C,SAAC,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AACnB,eAAK,CAAC,WAAW,wBAAsB,KAAK,CAAG,CAAC;SACjD,EAAE,MAAM,CAAC,CAAC;;AAEX,eAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;OACrB,CACF,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAChB;AACD,UAAM,EAAE,SAAS,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AACjD,aAAO,CAAC,CAAC,KAAK,CACZ,iBAAiB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EACrD,UAAS,WAAW,EAAE;AACpB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;;AAE5C,SAAC,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AACnB,eAAK,CAAC,WAAW,wBAAsB,KAAK,CAAG,CAAC;SACjD,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;;AAEhB,eAAO,IAAI,CAAC;OACb,CACF,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAChB;AACD,QAAI,EAAE,SAAS,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AAC/C,aAAO,CAAC,CAAC,KAAK,CACZ,iBAAiB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,EACtD,UAAS,WAAW,EAAE;AACpB,YAAI,GAAG,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,WAAW,EAAE,IAAI,CAAC,CAAC;;AAE5C,SAAC,CAAC,OAAO,CAAC,UAAC,KAAK,EAAK;AACnB,eAAK,CAAC,WAAW,wBAAsB,KAAK,CAAG,CAAC;SACjD,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;;AAEhB,eAAO,IAAI,CAAC;OACb,CACF,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;KAChB;GACF,CAAC;AACF,iBAAe,CAAC,eAAe,CAAC,YAAY,EAAE,wBAAwB,CAAC,CAAC;AACxE,SAAO,wBAAwB,CAAC;CACjC,CACF,CAAC,CAAC","file":"lockModels.js","sourcesContent":["'use strict';\n\nangular.module('clickApp.services')\n  .factory('lockModelsCommand', [\n    'commands',\n    'gameModels',\n    function lockModelsCommandServiceFactory(commandsService,\n                                             gameModelsService) {\n      var lockModelsCommandService = {\n        execute: function lockModelsExecute(lock, stamps, state, game) {\n          var ctxt = {\n            desc: lock,\n            stamps: stamps\n          };\n\n          return R.pipeP(\n            gameModelsService.lockStamps$(lock, stamps),\n            function(game_models) {\n              game = R.assoc('models', game_models, game);\n\n              R.forEach((stamp) => {\n                state.changeEvent(`Game.model.change.${stamp}`);\n              }, stamps);\n              \n              return [ctxt, game];\n            }\n          )(game.models);\n        },\n        replay: function lockModelsRedo(ctxt, state, game) {\n          return R.pipeP(\n            gameModelsService.lockStamps$(ctxt.desc, ctxt.stamps),\n            function(game_models) {\n              game = R.assoc('models', game_models, game);\n              \n              R.forEach((stamp) => {\n                state.changeEvent(`Game.model.change.${stamp}`);\n              }, ctxt.stamps);\n\n              return game;\n            }\n          )(game.models);\n        },\n        undo: function lockModelsUndo(ctxt, state, game) {\n          return R.pipeP(\n            gameModelsService.lockStamps$(!ctxt.desc, ctxt.stamps),\n            function(game_models) {\n              game = R.assoc('models', game_models, game);\n              \n              R.forEach((stamp) => {\n                state.changeEvent(`Game.model.change.${stamp}`);\n              }, ctxt.stamps);\n\n              return game;\n            }\n          )(game.models);\n        }\n      };\n      commandsService.registerCommand('lockModels', lockModelsCommandService);\n      return lockModelsCommandService;\n    }\n  ]);\n"]}